(function(e){function t(t){for(var i,r,o=t[0],c=t[1],l=t[2],h=0,u=[];h<o.length;h++)r=o[h],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&u.push(n[r][0]),n[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(u.length)u.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],i=!0,o=1;o<s.length;o++){var c=s[o];0!==n[c]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=s[0]))}return e}var i={},n={app:0},a=[];function r(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=i,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=c;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0489":function(e,t,s){"use strict";var i=s("4c63"),n=s.n(i);n.a},"06b2":function(e,t,s){"use strict";var i=s("5e7c"),n=s.n(i);n.a},"0977":function(e,t,s){},"0b0d":function(e,t,s){"use strict";var i=s("d314"),n=s.n(i);n.a},1:function(e,t){},"16a5":function(e,t,s){},"1ea5":function(e,t,s){"use strict";var i=s("c3ab"),n=s.n(i);n.a},2:function(e,t){},"230c":function(e,t,s){},"24bb":function(e,t,s){"use strict";var i=s("ec05"),n=s.n(i);n.a},26212:function(e,t,s){"use strict";var i=s("697c"),n=s.n(i);n.a},2685:function(e,t,s){},2883:function(e,t,s){"use strict";var i=s("4cc9"),n=s.n(i);n.a},"2d67":function(e,t,s){},"2fe0":function(e,t,s){"use strict";var i=s("eb91"),n=s.n(i);n.a},3:function(e,t){},3034:function(e,t,s){e.exports=s.p+"img/android-desktop.ae925618.png"},"34f2":function(e,t,s){"use strict";var i=s("2d67"),n=s.n(i);n.a},"3b27":function(e,t,s){},"3bbc":function(e,t,s){"use strict";var i=s("4bad"),n=s.n(i);n.a},4:function(e,t){},"4ab4":function(e,t,s){},"4bad":function(e,t,s){},"4c63":function(e,t,s){},"4cc9":function(e,t,s){},"4d04":function(e,t,s){},"51d2":function(e,t,s){},5390:function(e,t,s){"use strict";var i=s("6303"),n=s.n(i);n.a},"55b5":function(e,t,s){"use strict";var i=s("e0f7"),n=s.n(i);n.a},"56d7":function(e,t,s){"use strict";s.r(t);s("4917"),s("6762"),s("2fdb"),s("cadf"),s("551c"),s("f751"),s("097d");var i=s("a026"),n=s("03a5"),a=s.n(n),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{style:{color:e.text_color},attrs:{id:"toolbar"}},[i("div",{style:{marginLeft:e.margin+"px"},attrs:{id:"toolbar_inner"}},[i("div",{attrs:{id:"logo"},on:{click:e.toggleSidebar}},[i("img",{staticClass:"icon",class:e.icon_class,attrs:{id:"logo-image",src:s("b7fb"),width:"30",height:"30"}})]),i("span",{staticClass:"mdl-layout-title",attrs:{id:"toolbar-title"}},[e._v(e._s(e.title))]),i("div",{attrs:{id:"toolbar_icons"}},[i("transition-group",{attrs:{name:"list"}},[e.has_selected?i("button",{key:"delete",staticClass:"menu_icon delete mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect",attrs:{id:"delete-button"},on:{click:function(t){return e.dispatchMenuButton("delete-selected")}}},[i("i",{staticClass:"material-icons"},[e._v("delete")])]):e._e(),e.show_archive?i("button",{key:"archive",staticClass:"menu_icon archive mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect",attrs:{id:"archive-button"},on:{click:function(t){return e.dispatchMenuButton("archive-selected")}}},[i("i",{staticClass:"material-icons"},[e._v("archive")])]):e._e(),e.show_unarchive?i("button",{key:"unarchive",staticClass:"menu_icon unarchive mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect",attrs:{id:"unarchive-button"},on:{click:function(t){return e.dispatchMenuButton("unarchive-selected")}}},[i("i",{staticClass:"material-icons"},[e._v("unarchive")])]):e._e(),e.show_search?i("button",{key:"search",staticClass:"menu_icon search mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect",attrs:{id:"search-button",tag:"button"},on:{click:function(t){return e.dispatchMenuButton("search")}}},[i("i",{staticClass:"material-icons"},[e._v("search")])]):e._e(),e.show_compose?i("button",{key:"add",staticClass:"menu_icon add mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect",attrs:{id:"add-button",tag:"button"},on:{click:function(t){e.$router.push("/compose").catch((function(){}))}}},[i("i",{staticClass:"material-icons material-icons-white"},[e._v("add")])]):e._e(),e.has_selected?e._e():i("button",{key:"refresh",staticClass:"menu_icon refresh mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect",attrs:{id:"refresh-button"},on:{click:function(t){return e.dispatchMenuButton("refresh")}}},[i("i",{staticClass:"material-icons"},[e._v("refresh")])]),i("button",{key:"more",staticClass:"menu_icon android-more-button mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect",attrs:{id:"more-button"}},[i("i",{staticClass:"material-icons"},[e._v("more_vert")])])]),i("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect",attrs:{for:"more-button"}},e._l(e.menu_items,(function(t){return i("li",{directives:[{name:"mdl",rawName:"v-mdl"}],key:t.name,staticClass:"mdl-menu__item",attrs:{id:t.name+"-btn"},on:{click:function(s){return s.preventDefault(),e.dispatchMenuButton(t.name)}}},[i("a",{staticClass:"mdl-menu__item",attrs:{id:t.name+"-conversation",href:"#"}},[e._v(e._s(t.title))])])})),0)],1)])]),e._v(" "),i("div",{style:{marginLeft:e.margin+"px"},attrs:{id:"wrapper"}},[i("div",{attrs:{id:"side-menu"}},[i("sidebar",{directives:[{name:"mdl",rawName:"v-mdl"}]})],1),e._v(" "),i("div",{attrs:{id:"content"}},[i("main",{staticClass:"mdl-layout__content"},[i("router-view")],1)])]),e._v(" "),i("Snackbar"),i("ImageViewer"),i("div",{staticClass:"file-drag"}),i("div",{attrs:{id:"unread_count"}},[e._v(" "+e._s(e.unread_count)+" ")])],1)},o=[],c=(s("ac4d"),s("8a81"),s("ac6a"),s("a481"),s("78ce"),s("f559"),s("7f7f"),s("57e7"),s("28a5"),s("6d67"),s("d225")),l=s("b0b4"),d=s("f672"),h=s("59ca"),u=s.n(h),m=(s("588e"),s("2f62")),p=(s("2caf"),{ACCOUNT_ID:"account_id",HASH:"hash",SALT:"salt",CONTACTS:"contacts",COMPOSE_CONTACTS:"compose_contacts",CONVERSATIONS:"conversations",NOTIFICATIONS:"notifications",ENTER_TO_SEND:"enter_to_send",ARCHIVE_AFTER_SEND:"archive_after_send",LARGER_APP_BAR:"larger_app_bar",UNREAD_COUNT_IN_SIDEBAR:"unread_count_in_sidebar",SUBSCRIPTION_TYPE:"subscription_type",THEME:{BASE:"theme_base",GLOBAL_DEFAULT:"theme_global_default",GLOBAL_DARK:"theme_global_dark",GLOBAL_ACCENT:"theme_global_accent",USE_GLOBAL:"theme_use_global",APPLY_APPBAR_COLOR:"theme_apply_appbar_color",CONVERSATION_CATEGORIES:"conversation_categories",MESSAGE_TIMESTAMP:"message_timestamp"}}),f='""',_={account_id:JSON.parse(window.localStorage.getItem(p.ACCOUNT_ID)||f),hash:JSON.parse(window.localStorage.getItem(p.HASH)||f),salt:JSON.parse(window.localStorage.getItem(p.SALT)||f),contacts:JSON.parse(window.localStorage.getItem(p.CONTACTS)||"{}"),compose_contacts:JSON.parse(window.localStorage.getItem(p.COMPOSE_CONTACTS)||"{}"),conversations:JSON.parse(window.localStorage.getItem(p.CONVERSATIONS)||"{}"),theme_base:JSON.parse(window.localStorage.getItem(p.THEME.BASE)||'"light"'),theme_global_default:JSON.parse(window.localStorage.getItem(p.THEME.GLOBAL_DEFAULT)||'"#1775D2"'),theme_global_dark:JSON.parse(window.localStorage.getItem(p.THEME.GLOBAL_DARK)||'"#1665C0"'),theme_global_accent:JSON.parse(window.localStorage.getItem(p.THEME.GLOBAL_ACCENT)||'"#FF6E40"'),theme_use_global:JSON.parse(window.localStorage.getItem(p.THEME.USE_GLOBAL)||"false"),theme_apply_appbar_color:JSON.parse(window.localStorage.getItem(p.THEME.APPLY_APPBAR_COLOR)||"true"),theme_conversation_categories:JSON.parse(window.localStorage.getItem(p.THEME.CONVERSATION_CATEGORIES)||"true"),theme_message_timestamp:JSON.parse(window.localStorage.getItem(p.THEME.MESSAGE_TIMESTAMP)||"false"),notifications:JSON.parse(window.localStorage.getItem(p.NOTIFICATIONS)||"true"),enter_to_send:JSON.parse(window.localStorage.getItem(p.ENTER_TO_SEND)||"true"),archive_after_send:JSON.parse(window.localStorage.getItem(p.ARCHIVE_AFTER_SEND)||"false"),larger_app_bar:JSON.parse(window.localStorage.getItem(p.LARGER_APP_BAR)||"false"),unread_count_in_sidebar:JSON.parse(window.localStorage.getItem(p.UNREAD_COUNT_IN_SIDEBAR)||"false"),subscription_type:window.localStorage.getItem(p.SUBSCRIPTION_TYPE)||1,key:"",aes:"",full_theme:!0,sidebar_open:!0,title:"Pulse SMS",loading:!0,hotkey_navigation:!1,unread_count:0,colors_default:JSON.parse(window.localStorage.getItem(p.THEME.GLOBAL_DEFAULT)||'"#1775D2"'),colors_dark:JSON.parse(window.localStorage.getItem(p.THEME.GLOBAL_DARK)||'"#1665C0"'),colors_accent:JSON.parse(window.localStorage.getItem(p.THEME.GLOBAL_ACCENT)||'"#FF6E40"'),colors_text:"#ffffff",msgbus:new i["default"],media_loader:null,loaded_media:null,media_sending:!1,offline:!navigator.onLine,last_ping:null,last_passcode_entry:null,session_conversations:{},session_messages:{}},v={getConversationData:function(e){return function(t){return e.conversations[t]}},getContact:function(e){return function(t){return e.contacts[t]}}},g={title:function(e,t){return e.title=t},loading:function(e,t){return e.loading=t},hotkey_navigation:function(e,t){return e.hotkey_navigation=t},unread_count:function(e,t){return e.unread_count=t},full_theme:function(e,t){return e.full_theme=t},sidebar_open:function(e,t){return e.sidebar_open=t},account_id:function(e,t){return e.account_id=t},hash:function(e,t){return e.hash=t},salt:function(e,t){return e.salt=t},key:function(e,t){return e.key=t},aes:function(e,t){return e.aes=t},compose_contacts:function(e,t){return e.compose_contacts=t},theme_base:function(e,t){return e.theme_base=t},theme_global_default:function(e,t){return e.theme_global_default=t},theme_global_dark:function(e,t){return e.theme_global_dark=t},theme_global_accent:function(e,t){return e.theme_global_accent=t},theme_use_global:function(e,t){return e.theme_use_global=t},theme_apply_appbar_color:function(e,t){return e.theme_apply_appbar_color=t},theme_conversation_categories:function(e,t){return e.theme_conversation_categories=t},theme_message_timestamp:function(e,t){return e.theme_message_timestamp=t},notifications:function(e,t){return e.notifications=t},enter_to_send:function(e,t){return e.enter_to_send=t},archive_after_send:function(e,t){return e.archive_after_send=t},larger_app_bar:function(e,t){return e.larger_app_bar=t},unread_count_in_sidebar:function(e,t){return e.unread_count_in_sidebar=t},subscription_type:function(e,t){return e.subscription_type=t},media_loader:function(e,t){return e.media_loader=t},colors_default:function(e,t){return e.colors_default=t},colors_dark:function(e,t){return e.colors_dark=t},colors_accent:function(e,t){return e.colors_accent=t},loaded_media:function(e,t){return e.loaded_media=t},media_sending:function(e,t){return e.media_sending=t},last_ping:function(e,t){return e.last_ping=t},last_passcode_entry:function(e,t){return e.last_passcode_entry=t},session_conversations:function(e,t){return e.session_conversations=t},session_messages:function(e,t){return e.session_messages=t},theme_global:function(e,t){t.default&&t.dark&&t.accent&&(e.theme_global_default=t.default,e.theme_global_dark=t.dark,e.theme_global_accent=t.accent,window.localStorage.setItem("theme_global_default",JSON.stringify(t.default)),window.localStorage.setItem("theme_global_dark",JSON.stringify(t.dark)),window.localStorage.setItem("theme_global_accent",JSON.stringify(t.accent)))},colors:function(e,t){e.colors_default=t.default,e.colors_dark=t.dark,e.colors_accent=t.accent},conversations:function(e,t){Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++)e.conversations[t[s].id]=t[s]},contacts:function(e,t){Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++)e.contacts[t[s].id]=t[s]},clearContacts:function(e){e.contacts={}}},b={},C=(s("456d"),function(e){var t={compose_contacts:p.COMPOSE_CONTACTS,contacts:p.CONTACTS,conversations:p.CONVERSATIONS,clearContacts:p.CONTACTS,account_id:p.ACCOUNT_ID,hash:p.HASH,salt:p.SALT,theme_base:p.THEME.BASE,theme_global_default:p.THEME.GLOBAL_DEFAULT,theme_global_dark:p.THEME.GLOBAL_DARK,theme_global_accent:p.THEME.GLOBAL_ACCENT,theme_use_global:p.THEME.USE_GLOBAL,theme_conversation_categories:p.THEME.CONVERSATION_CATEGORIES,theme_message_timestamp:p.THEME.MESSAGE_TIMESTAMP,theme_apply_appbar_color:p.THEME.APPLY_APPBAR_COLOR,notifications:p.NOTIFICATIONS,enter_to_send:p.ENTER_TO_SEND,archive_after_send:p.ARCHIVE_AFTER_SEND,larger_app_bar:p.LARGER_APP_BAR,unread_count_in_sidebar:p.UNREAD_COUNT_IN_SIDEBAR,subscription_type:p.SUBSCRIPTION_TYPE};e.subscribe((function(e,s){if(Object.keys(t).contains(e.type)){var i=t[e.type],n=JSON.stringify(s[e.type]);window.localStorage.setItem(i,n)}}))}),y=[C];i["default"].use(m["a"]);var E=new m["a"].Store({state:_,getters:v,mutations:g,actions:b,plugins:y}),A=s("8c4f"),k=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-card mdl-shadow--6dp",attrs:{id:"login-pane"}},[e._m(0),s("div",{staticClass:"mdl-card__supporting-text"},[s("p",{domProps:{innerHTML:e._s(e.$t("login.first"))}}),e.error?s("p",{staticClass:"error"},[e._v(" "+e._s(e.$t("login.error"))+" ")]):e._e(),s("form",[s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"mdl-textfield__input",attrs:{id:"username",type:"email",autofocus:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"username"}},[e._v(e._s(e.$t("login.email")))])]),s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"mdl-textfield__input",attrs:{id:"password",type:"password"},domProps:{value:e.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doLogin(t)},input:function(t){t.target.composing||(e.password=t.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"password"}},[e._v(e._s(e.$t("login.password")))])])]),s("a",{attrs:{href:"https://messenger.klinkerapps.com/forgot_password.html",target:"_blank"}},[e._v(e._s(e.$t("login.forgotpassword")))]),s("br"),s("a",{attrs:{href:"https://messenger.klinkerapps.com/overview/platform-ios.html",target:"_blank"},domProps:{innerHTML:e._s(e.$t("login.iphone"))}})]),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("button",{staticClass:"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect",attrs:{id:"login"},on:{click:e.doLogin}},[e._v(" "+e._s(e.$t("login.login"))+" ")])]),s("transition",{attrs:{name:"loading-fade"}},[e.loading?s("div",{staticClass:"loading-center"},[s("spinner")],1):e._e()])],1)},w=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mdl-card__title mdl-color--primary mdl-color-text--white"},[s("h2",{staticClass:"mdl-card__title-text"},[e._v(" Pulse SMS ")])])}],S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"spinner",attrs:{id:"loading"}},[s("div",{staticClass:"mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"})])},D=[],x={name:"Spinner"},L=x,B=(s("26212"),s("2877")),T=Object(B["a"])(L,S,D,!1,null,"73ae89fc",null),F=T.exports,I=s("c788");sjcl.hash.sha1=function(e){e?(this._h=e._h.slice(0),this._buffer=e._buffer.slice(0),this._length=e._length):this.reset()},sjcl.hash.sha1.hash=function(e){return(new sjcl.hash.sha1).update(e).finalize()},sjcl.hash.sha1.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(e){"string"==typeof e&&(e=sjcl.codec.utf8String.toBits(e));var t,s=this._buffer=sjcl.bitArray.concat(this._buffer,e),i=this._length,n=this._length=i+sjcl.bitArray.bitLength(e);for(t=this.blockSize+i&-this.blockSize;t<=n;t+=this.blockSize)this._block(s.splice(0,16));return this},finalize:function(){var e,t=this._buffer,s=this._h;for(t=sjcl.bitArray.concat(t,[sjcl.bitArray.partial(1,1)]),e=t.length+2;15&e;e++)t.push(0);for(t.push(Math.floor(this._length/4294967296)),t.push(0|this._length);t.length;)this._block(t.splice(0,16));return this.reset(),s},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(e,t,s,i){return e<=19?t&s|~t&i:e<=39?t^s^i:e<=59?t&s|t&i|s&i:e<=79?t^s^i:void 0},_S:function(e,t){return t<<e|t>>>32-e},_block:function(e){var t,s,i,n,a,r,o,c=e.slice(0),l=this._h;for(i=l[0],n=l[1],a=l[2],r=l[3],o=l[4],t=0;t<=79;t++)t>=16&&(c[t]=this._S(1,c[t-3]^c[t-8]^c[t-14]^c[t-16])),s=this._S(5,i)+this._f(t,n,a,r)+o+c[t]+this._key[Math.floor(t/20)]|0,o=r,r=a,a=this._S(30,n),n=i,i=s;l[0]=l[0]+i|0,l[1]=l[1]+n|0,l[2]=l[2]+a|0,l[3]=l[3]+r|0,l[4]=l[4]+o|0}};var $=function(e){var t=new sjcl.misc.hmac(e,sjcl.hash.sha1);this.encrypt=function(){return t.encrypt.apply(t,arguments)}};window["hmacSHA1"]=$;var M={name:"Login",components:{Spinner:F},data:function(){return{title:"",username:"",password:"",loading:!1,error:!1}},mounted:function(){if(""!=this.$store.state.account_id)return this.$router.push({name:"conversations-list"});this.$store.commit("loading",!1),this.$store.commit("title",this.title)},methods:{doLogin:function(){var e=this;""!=this.username&&""!=this.password&&(this.error=!1,this.loading=!0,sa.account.login(this.username,this.password).then((function(t){return e.handleData(t.data)})).catch((function(t){return e.handleError(t)})))},handleData:function(e){this.error=!1;var t=I["a"].misc.pbkdf2(this.password,e.salt2,1e4,256,$),s=I["a"].codec.base64.fromBits(t);this.$store.commit("account_id",e.account_id),this.$store.commit("hash",s),this.$store.commit("salt",e.salt1),On.setupAes(),this.loading=!1,this.$store.state.msgbus.$emit("start-app"),this.$router.push({name:"conversations-list"})},handleError:function(){this.password="",this.error=!0,this.loading=!1}}},O=M,N=(s("1ea5"),Object(B["a"])(O,k,w,!1,null,"0aac1e7c",null)),R=N.exports,j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"settings"}},[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"page-content",attrs:{id:"account-list"}},[s("h4",[e._v(e._s(e.$t("settings.theme")))]),e.showSettingsRefresh?s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",attrs:{id:"refresh_settings"},on:{click:e.refreshSettings}},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("settings.refresh"))+" ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" "+e._s(e.$t("settings.explanatory_intro"))+" ")])]):e._e(),s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",attrs:{id:"base-theme"},on:{click:function(t){return e.theme_menu.toggle()}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("settings.base"))+" ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" "+e._s(e.base_theme)+" ")])]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"base-theme-menu","data-mdl-for":"base-theme"}},[s("li",{staticClass:"mdl-menu__item",on:{click:function(t){e.theme="day_night"}}},[e._v(" "+e._s(e.$t("settings.daynight"))+" ")]),s("li",{staticClass:"mdl-menu__item",on:{click:function(t){e.theme="light"}}},[e._v(" "+e._s(e.$t("settings.light"))+" ")]),s("li",{staticClass:"mdl-menu__item",on:{click:function(t){e.theme="dark"}}},[e._v(" "+e._s(e.$t("settings.dark"))+" ")]),s("li",{staticClass:"mdl-menu__item",on:{click:function(t){e.theme="black"}}},[e._v(" "+e._s(e.$t("settings.black"))+" ")])]),s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",on:{click:e.showColorDialog}},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("settings.primary"))+", "+e._s(e.$t("settings.darkprimary"))+", "+e._s(e.$t("settings.accent"))+" ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" "+e._s(e.global_colors)+" ")])]),e._v(" "),e.showColorSettings?s("div",{staticClass:"mdl-dialog"},[s("div",{staticClass:"mdl-dialog__content mdl-dialog-card mdl-card"},[s("h4",[e._v("Update Theme Colors")]),s("div",{staticClass:"container"},[s("div",{staticClass:"mdl-textfield mdl-js-textfield horizontal"},[e._v(" "+e._s(e.$t("settings.primary"))+" "),s("sketch-picker",{attrs:{"disable-alpha":!0,"preset-colors":e.presetColors},model:{value:e.theme_default,callback:function(t){e.theme_default=t},expression:"theme_default"}})],1),s("div",{staticClass:"mdl-textfield mdl-js-textfield horizontal"},[e._v(" "+e._s(e.$t("settings.darkprimary"))+" "),s("sketch-picker",{attrs:{"disable-alpha":!0,"preset-colors":e.presetColors},model:{value:e.theme_dark,callback:function(t){e.theme_dark=t},expression:"theme_dark"}})],1),s("div",{staticClass:"mdl-textfield mdl-js-textfield horizontal"},[e._v(" "+e._s(e.$t("settings.accent"))+" "),s("sketch-picker",{attrs:{"disable-alpha":!0,"preset-colors":e.presetColors},model:{value:e.theme_accent,callback:function(t){e.theme_accent=t},expression:"theme_accent"}})],1)]),s("div",{staticClass:"mdl-dialog__actions"},[s("button",{staticClass:"mdl-button close",attrs:{type:"button"},on:{click:e.saveColors}},[e._v(" "+e._s(e.$t("dialog.save"))+" ")]),s("button",{staticClass:"mdl-button close",attrs:{type:"button"},on:{click:e.closeColorDialog}},[e._v(" "+e._s(e.$t("dialog.close"))+" ")])])])]):e._e(),s("br"),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"global-theme"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.global_theme,expression:"global_theme"}],staticClass:"mdl-switch__input",attrs:{id:"global-theme",type:"checkbox"},domProps:{checked:Array.isArray(e.global_theme)?e._i(e.global_theme,null)>-1:e.global_theme},on:{change:function(t){var s=e.global_theme,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=e._i(s,a);i.checked?r<0&&(e.global_theme=s.concat([a])):r>-1&&(e.global_theme=s.slice(0,r).concat(s.slice(r+1)))}else e.global_theme=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("settings.applyeverywhere"))+" ")])])]),e._v(" "),s("br"),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"theme-appbar"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.theme_appbar,expression:"theme_appbar"}],staticClass:"mdl-switch__input",attrs:{id:"theme-appbar",type:"checkbox"},domProps:{checked:Array.isArray(e.theme_appbar)?e._i(e.theme_appbar,null)>-1:e.theme_appbar},on:{change:function(t){var s=e.theme_appbar,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=e._i(s,a);i.checked?r<0&&(e.theme_appbar=s.concat([a])):r>-1&&(e.theme_appbar=s.slice(0,r).concat(s.slice(r+1)))}else e.theme_appbar=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("settings.applyprimary"))+" ")])])]),s("br"),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"theme-message-timestamp"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.theme_message_timestamp,expression:"theme_message_timestamp"}],staticClass:"mdl-switch__input",attrs:{id:"theme-message-timestamp",type:"checkbox"},domProps:{checked:Array.isArray(e.theme_message_timestamp)?e._i(e.theme_message_timestamp,null)>-1:e.theme_message_timestamp},on:{change:function(t){var s=e.theme_message_timestamp,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=e._i(s,a);i.checked?r<0&&(e.theme_message_timestamp=s.concat([a])):r>-1&&(e.theme_message_timestamp=s.slice(0,r).concat(s.slice(r+1)))}else e.theme_message_timestamp=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("settings.messagetimestamp"))+" ")])])]),s("br"),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"theme-conversation-categories"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.theme_conversation_categories,expression:"theme_conversation_categories"}],staticClass:"mdl-switch__input",attrs:{id:"theme-conversation-categories",type:"checkbox"},domProps:{checked:Array.isArray(e.theme_conversation_categories)?e._i(e.theme_conversation_categories,null)>-1:e.theme_conversation_categories},on:{change:function(t){var s=e.theme_conversation_categories,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=e._i(s,a);i.checked?r<0&&(e.theme_conversation_categories=s.concat([a])):r>-1&&(e.theme_conversation_categories=s.slice(0,r).concat(s.slice(r+1)))}else e.theme_conversation_categories=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("settings.conversationcategories"))+" ")])])]),s("br"),s("h4",[e._v(e._s(e.$t("settings.webspecific")))]),s("br"),e.showNotification?s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"show-notifications"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.show_notifications,expression:"show_notifications"}],staticClass:"mdl-switch__input",attrs:{id:"show-notifications",type:"checkbox"},domProps:{checked:Array.isArray(e.show_notifications)?e._i(e.show_notifications,null)>-1:e.show_notifications},on:{change:function(t){var s=e.show_notifications,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=e._i(s,a);i.checked?r<0&&(e.show_notifications=s.concat([a])):r>-1&&(e.show_notifications=s.slice(0,r).concat(s.slice(r+1)))}else e.show_notifications=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("settings.shownotifs"))+" ")])])]):e._e(),s("br"),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"enter-to-send"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.enter_to_send,expression:"enter_to_send"}],staticClass:"mdl-switch__input",attrs:{id:"enter-to-send",type:"checkbox"},domProps:{checked:Array.isArray(e.enter_to_send)?e._i(e.enter_to_send,null)>-1:e.enter_to_send},on:{change:function(t){var s=e.enter_to_send,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=e._i(s,a);i.checked?r<0&&(e.enter_to_send=s.concat([a])):r>-1&&(e.enter_to_send=s.slice(0,r).concat(s.slice(r+1)))}else e.enter_to_send=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("settings.entersend"))+" ")])])])])])},P=[],H=(s("6b54"),s("87b3"),s("f3e2"),s("c345")),U={name:"Settings",components:{"sketch-picker":H["Sketch"]},data:function(){return{title:"Settings",global_theme:this.$store.state.theme_use_global,theme_appbar:this.$store.state.theme_apply_appbar_color,theme_message_timestamp:this.$store.state.theme_message_timestamp,theme_conversation_categories:this.$store.state.theme_conversation_categories,show_notifications:this.$store.state.notifications,enter_to_send:this.$store.state.enter_to_send,theme:this.$store.state.theme_base,theme_default:this.rgbaToHex(this.$store.state.theme_global_default).length>1?this.rgbaToHex(this.$store.state.theme_global_default):"#1775D2",theme_dark:this.rgbaToHex(this.$store.state.theme_global_dark).length>1?this.rgbaToHex(this.$store.state.theme_global_dark):"#1665C0",theme_accent:this.rgbaToHex(this.$store.state.theme_global_accent).length>1?this.rgbaToHex(this.$store.state.theme_global_accent):"#FF6E40",theme_menu:null,showColorSettings:!1,presetColors:["#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#1775D2","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FDD835","#FFC411","#FF9800","#FF5722","#9E9E9E","#607D8B","#374248"]}},computed:{base_theme:function(){var e=this.$store.state.theme_base;return e=e.split("_"),e.forEach((function(t,s){e[s]=t.charAt(0).toUpperCase()+t.slice(1)})),e.join(" / ")},global_colors:function(){var e=this.$store.state.theme_global_default,t=this.$store.state.theme_global_dark,s=this.$store.state.theme_global_accent;if(e||t||s){var i=this.rgbaToHex(e),n=this.rgbaToHex(t),a=this.rgbaToHex(s),r=i.length>1?i:"#1775D2",o=n.length>1?n:"#1665C0",c=a.length>1?a:"#FF6E40";return r+", "+o+", "+c}return"#1775D2, #1665C0, #FF6E40"},use_global_theme:function(){return this.boolToStr(this.$store.state.theme_use_global)},apply_primary_color_to_appbar:function(){return this.boolToStr(this.$store.state.theme_apply_appbar_color)},showSettingsRefresh:function(){return!1},showNotification:function(){return pa.isWebsite()}},watch:{show_notifications:function(){this.$store.commit("notifications",this.show_notifications),Mn.requestNotifications()},enter_to_send:function(){this.$store.commit("enter_to_send",this.enter_to_send)},global_theme:function(){this.$store.commit("theme_use_global",this.global_theme),sa.account.settings.update("apply_theme_globally","boolean",this.global_theme)},theme_appbar:function(){this.$store.commit("theme_apply_appbar_color",this.theme_appbar),sa.account.settings.update("apply_primary_color_toolbar","boolean",this.theme_appbar)},theme_conversation_categories:function(){this.$store.commit("theme_conversation_categories",this.theme_conversation_categories),sa.account.settings.update("conversation_categories","boolean",this.theme_conversation_categories)},theme_message_timestamp:function(){this.$store.commit("theme_message_timestamp",this.theme_message_timestamp),sa.account.settings.update("message_timestamp","boolean",this.theme_message_timestamp)},theme:function(){this.$store.commit("theme_base",this.theme),sa.account.settings.update("base_theme","string",this.theme)},"$store.state.theme_global_default":function(){var e=this.$store.state.theme_global_default;this.theme_default=e?this.rgbaToHex(e):"#1775D2"},"$store.state.theme_global_dark":function(){var e=this.$store.state.theme_global_dark;this.theme_dark=e?this.rgbaToHex(e):"#1665C0"},"$store.state.theme_global_accent":function(){var e=this.$store.state.theme_global_accent;this.theme_accent=e?this.rgbaToHex(e):"#FF6E40"},showColorSettings:function(){this.showColorSettings?document.querySelector("#sidebar").style["z-index"]=0:document.querySelector("#sidebar").style["z-index"]=3}},mounted:function(){var e=this;sa.account.settings.get().then((function(){e.$store.commit("loading",!1)})),this.$store.commit("title",this.title),this.$store.state.msgbus.$on("refresh-btn",this.refreshSettings);var t=this.$el.querySelector("#base-theme-menu");this.theme_menu=t.MaterialMenu},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refreshSettings)},methods:{refreshSettings:function(){sa.account.settings.get(),Mn.snackbar("Settings Refreshed")},showColorDialog:function(){this.showColorSettings=!0},closeColorDialog:function(){this.showColorSettings=!1},rgbaToHex:function(e){var t,s=e.match(/[0-9]+/g),i=[],n=!0,a=!1,r=void 0;try{for(var o,c=s[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var l=o.value;t=parseInt(l).toString(16),t=1==t.length?"0"+t:t,i.push(t)}}catch(d){a=!0,r=d}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}return"#"+i.slice(0,i.length-1).join("")},hexToRgb:function(e){var t=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16),n=255;return(t<<16)+(s<<8)+(i<<0)+(n<<24)},boolToStr:function(e){return e?va.t("settings.yes"):va.t("settings.no")},saveColors:function(){this.theme_default.hex&&(this.theme_default=this.theme_default.hex),this.theme_dark.hex&&(this.theme_dark=this.theme_dark.hex),this.theme_accent.hex&&(this.theme_accent=this.theme_accent.hex);var e=this.hexToRgb(this.theme_default),t=this.hexToRgb(this.theme_dark),s=this.hexToRgb(this.theme_accent);sa.account.settings.update("global_primary_color","int",e),sa.account.settings.update("global_primary_dark_color","int",t),sa.account.settings.update("global_accent_color","int",s),this.$store.commit("theme_global_default",Mn.expandColor(e)),this.$store.commit("theme_global_dark",Mn.expandColor(t)),this.$store.commit("theme_global_accent",Mn.expandColor(s)),this.$store.commit("colors_default",Mn.expandColor(e)),this.$store.commit("colors_dark",Mn.expandColor(t)),this.$store.commit("colors_accent",Mn.expandColor(s)),this.closeColorDialog()}}},q=U,z=(s("a1a5"),Object(B["a"])(q,j,P,!1,null,"47f726a5",null)),G=z.exports,K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"settings"}},[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"page-content",attrs:{id:"experiments-list"}},[s("h4",[e._v(e._s(e.$t("experiments.disclaimer")))]),s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" "+e._s(e.$t("experiments.explanatory_intro"))+" ")]),s("br"),s("h4",[e._v(e._s(e.$t("settings.theme")))]),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"larger_app_bar"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.larger_app_bar,expression:"larger_app_bar"}],staticClass:"mdl-switch__input",attrs:{id:"larger_app_bar",type:"checkbox"},domProps:{checked:Array.isArray(e.larger_app_bar)?e._i(e.larger_app_bar,null)>-1:e.larger_app_bar},on:{change:function(t){var s=e.larger_app_bar,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=e._i(s,a);i.checked?r<0&&(e.larger_app_bar=s.concat([a])):r>-1&&(e.larger_app_bar=s.slice(0,r).concat(s.slice(r+1)))}else e.larger_app_bar=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("experiments.larger_app_bar"))+" ")])])]),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"unread_count_in_sidebar"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.unread_count_in_sidebar,expression:"unread_count_in_sidebar"}],staticClass:"mdl-switch__input",attrs:{id:"unread_count_in_sidebar",type:"checkbox"},domProps:{checked:Array.isArray(e.unread_count_in_sidebar)?e._i(e.unread_count_in_sidebar,null)>-1:e.unread_count_in_sidebar},on:{change:function(t){var s=e.unread_count_in_sidebar,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=e._i(s,a);i.checked?r<0&&(e.unread_count_in_sidebar=s.concat([a])):r>-1&&(e.unread_count_in_sidebar=s.slice(0,r).concat(s.slice(r+1)))}else e.unread_count_in_sidebar=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("experiments.unread_count_in_sidebar"))+" ")])])]),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",attrs:{for:"archive_after_send"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.archive_after_send,expression:"archive_after_send"}],staticClass:"mdl-switch__input",attrs:{id:"archive_after_send",type:"checkbox"},domProps:{checked:Array.isArray(e.archive_after_send)?e._i(e.archive_after_send,null)>-1:e.archive_after_send},on:{change:function(t){var s=e.archive_after_send,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=e._i(s,a);i.checked?r<0&&(e.archive_after_send=s.concat([a])):r>-1&&(e.archive_after_send=s.slice(0,r).concat(s.slice(r+1)))}else e.archive_after_send=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("experiments.archive_after_send"))+" ")])])])])])},V=[],W={name:"Experiments",data:function(){return{title:"Experiments",archive_after_send:this.$store.state.archive_after_send,larger_app_bar:this.$store.state.larger_app_bar,unread_count_in_sidebar:this.$store.state.unread_count_in_sidebar}},watch:{larger_app_bar:function(){var e=document.querySelector("body"),t="larger_app_bar";this.$store.commit("larger_app_bar",this.larger_app_bar),this.larger_app_bar&&!e.className.includes(t)?e.className+=" ".concat(t," "):!this.larger_app_bar&&e.className.includes(t)&&(e.className=e.className.replace(" ".concat(t," "),""))},unread_count_in_sidebar:function(){this.$store.commit("unread_count_in_sidebar",this.unread_count_in_sidebar)},archive_after_send:function(){this.$store.commit("archive_after_send",this.archive_after_send)}},mounted:function(){this.$store.commit("title",this.title),this.$store.state.msgbus.$on("refresh-btn",this.refreshExperiments)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refreshExperiments)},methods:{refreshExperiments:function(){}}},J=W,Y=(s("a7ba"),Object(B["a"])(J,K,V,!1,null,"f2aeb15a",null)),X=Y.exports,Q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"settings"}},[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"page-content",attrs:{id:"account-list"}},[s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",on:{click:e.showTitleDialog}},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("thread.settings.conversationtitle"))+" ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" "+e._s(e.conversationTitle)+" ")])]),e.showTitleSettings?s("div",{staticClass:"mdl-dialog"},[s("div",{staticClass:"mdl-dialog__content mdl-dialog-card mdl-card"},[s("h4",[e._v(e._s(e.$t("thread.settings.updatetitle")))]),s("div",{staticClass:"container"},[s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.conversationTitle,expression:"conversationTitle"}],staticClass:"mdl-textfield__input",attrs:{id:"conversation_title",autofocus:""},domProps:{value:e.conversationTitle},on:{input:function(t){t.target.composing||(e.conversationTitle=t.target.value)}}})])]),s("div",{staticClass:"mdl-dialog__actions"},[s("button",{staticClass:"mdl-button close",attrs:{type:"button"},on:{click:e.saveTitle}},[e._v(" "+e._s(e.$t("dialog.save"))+" ")]),s("button",{staticClass:"mdl-button close",attrs:{type:"button"},on:{click:e.closeTitleDialog}},[e._v(" "+e._s(e.$t("dialog.close"))+" ")])])])]):e._e(),s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",on:{click:e.showColorDialog}},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("settings.primary"))+", "+e._s(e.$t("settings.darkprimary"))+", "+e._s(e.$t("settings.accent"))+" ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" "+e._s(e.hex.default)+", "+e._s(e.hex.dark)+", "+e._s(e.hex.accent)+" ")])]),e.showColorSettings?s("div",{staticClass:"mdl-dialog"},[s("div",{staticClass:"mdl-dialog__content mdl-dialog-card mdl-card"},[s("h4",[e._v(e._s(e.$t("thread.settings.updatecolors")))]),s("div",{staticClass:"container"},[s("div",{staticClass:"mdl-textfield mdl-js-textfield horizontal"},[e._v(" "+e._s(e.$t("settings.primary"))+" "),s("sketch-picker",{attrs:{"disable-alpha":!0,"preset-colors":e.presetColors},model:{value:e.hex.default,callback:function(t){e.$set(e.hex,"default",t)},expression:"hex.default"}})],1),s("div",{staticClass:"mdl-textfield mdl-js-textfield horizontal"},[e._v(" "+e._s(e.$t("settings.darkprimary"))+" "),s("sketch-picker",{attrs:{"disable-alpha":!0,"preset-colors":e.presetColors},model:{value:e.hex.dark,callback:function(t){e.$set(e.hex,"dark",t)},expression:"hex.dark"}})],1),s("div",{staticClass:"mdl-textfield mdl-js-textfield horizontal"},[e._v(" "+e._s(e.$t("settings.accent"))+" "),s("sketch-picker",{attrs:{"disable-alpha":!0,"preset-colors":e.presetColors},model:{value:e.hex.accent,callback:function(t){e.$set(e.hex,"accent",t)},expression:"hex.accent"}})],1)]),s("div",{staticClass:"mdl-dialog__actions"},[s("button",{staticClass:"mdl-button close",attrs:{type:"button"},on:{click:e.saveColors}},[e._v(" "+e._s(e.$t("dialog.save"))+" ")]),s("button",{staticClass:"mdl-button close",attrs:{type:"button"},on:{click:e.closeColorDialog}},[e._v(" "+e._s(e.$t("dialog.close"))+" ")])])])]):e._e(),s("br"),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",class:e.pin_class,attrs:{for:"pin"}},[s("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.pin,expression:"pin",modifiers:{lazy:!0}}],staticClass:"mdl-switch__input",attrs:{id:"pin",type:"checkbox"},domProps:{checked:Array.isArray(e.pin)?e._i(e.pin,null)>-1:e.pin},on:{change:function(t){var s=e.pin,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=e._i(s,a);i.checked?r<0&&(e.pin=s.concat([a])):r>-1&&(e.pin=s.slice(0,r).concat(s.slice(r+1)))}else e.pin=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("thread.settings.pin"))+" ")])])]),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",class:e.mute_class,attrs:{for:"mute"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.mute,expression:"mute"}],staticClass:"mdl-switch__input",attrs:{id:"mute",type:"checkbox"},domProps:{checked:Array.isArray(e.mute)?e._i(e.mute,null)>-1:e.mute},on:{change:function(t){var s=e.mute,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=e._i(s,a);i.checked?r<0&&(e.mute=s.concat([a])):r>-1&&(e.mute=s.slice(0,r).concat(s.slice(r+1)))}else e.mute=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("thread.settings.mute"))+" ")])])]),s("div",{staticClass:"label-item"},[s("label",{staticClass:"mdl-switch mdl-js-switch mdl-js-ripple-effect mdl-js-ripple-effect--ignore-events",class:e.private_class,attrs:{for:"private"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.private_notifications,expression:"private_notifications"}],staticClass:"mdl-switch__input",attrs:{id:"private",type:"checkbox"},domProps:{checked:Array.isArray(e.private_notifications)?e._i(e.private_notifications,null)>-1:e.private_notifications},on:{change:function(t){var s=e.private_notifications,i=t.target,n=!!i.checked;if(Array.isArray(s)){var a=null,r=e._i(s,a);i.checked?r<0&&(e.private_notifications=s.concat([a])):r>-1&&(e.private_notifications=s.slice(0,r).concat(s.slice(r+1)))}else e.private_notifications=n}}}),s("span",{staticClass:"mdl-switch__label mdl-color-text--grey-900"},[e._v(" "+e._s(e.$t("thread.settings.private"))+" ")])])])])])},Z=[],ee={name:"ConversationSettings",components:{"sketch-picker":H["Sketch"]},props:["conversationTitle","conversationId"],data:function(){return{title:"Settings - "+this.conversationTitle,phone_numbers:null,pin:!1,mute:!1,private_notifications:!1,colors:{},hex:{},pin_class:"",mute_class:"",private_class:"",showColorSettings:!1,showTitleSettings:!1,presetColors:["#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#1775D2","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FDD835","#FFC411","#FF9800","#FF5722","#9E9E9E","#607D8B","#374248"]}},computed:{colors_string:function(){if(null==this.colors.default)return"Loading...";var e=this.rgbaToHex(this.colors.default),t=this.rgbaToHex(this.colors.dark),s=this.rgbaToHex(this.colors.accent);return e+", "+t+", "+s}},watch:{pin:function(){var e={account_id:this.$store.state.account_id,pinned:this.pin};sa.conversations.update(this.conversationId,e)},mute:function(){var e={account_id:this.$store.state.account_id,mute:this.mute};sa.conversations.update(this.conversationId,e)},private_notifications:function(){var e={account_id:this.$store.state.account_id,private_notifications:this.private_notifications};sa.conversations.update(this.conversationId,e)},showColorSettings:function(){this.showColorSettings?document.querySelector("#sidebar").style["z-index"]=0:document.querySelector("#sidebar").style["z-index"]=3},showTitleSettings:function(){this.showTitleSettings?document.querySelector("#sidebar").style["z-index"]=0:document.querySelector("#sidebar").style["z-index"]=3}},mounted:function(){var e=this;ha.invalidateAllConversations(),sa.conversations.getById(this.conversationId).then((function(t){return e.processConversation(t)})),this.$store.commit("loading",!1),this.$store.commit("title",this.title)},methods:{showColorDialog:function(){this.showColorSettings=!0},closeColorDialog:function(){this.showColorSettings=!1},showTitleDialog:function(){this.showTitleSettings=!0},closeTitleDialog:function(){this.showTitleSettings=!1},processConversation:function(e){this.phone_numbers=e.phone_numbers,this.title="Settings - "+e.title,this.$store.commit("title",this.title),this.pin=e.pinned,this.mute=e.mute,this.private_notifications=e.private_notifications,this.colors={default:e.color,dark:Mn.expandColor(e.color_dark),accent:Mn.expandColor(e.color_accent)},this.hex={default:this.rgbaToHex(this.colors.default),dark:this.rgbaToHex(this.colors.dark),accent:this.rgbaToHex(this.colors.accent)},this.pin&&(this.pin_class="is-upgraded is-checked"),this.mute&&(this.mute_class="is-upgraded is-checked"),this.private_notifications&&(this.private_class="is-upgraded is-checked")},rgbaToHex:function(e){var t,s=e.match(/[0-9]+/g),i=[],n=!0,a=!1,r=void 0;try{for(var o,c=s[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var l=o.value;t=parseInt(l).toString(16),t=1==t.length?"0"+t:t,i.push(t)}}catch(d){a=!0,r=d}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}return"#"+i.slice(0,i.length-1).join("")},hexToRgb:function(e){var t=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16),n=255;return(t<<16)+(s<<8)+(i<<0)+(n<<24)},saveColors:function(){this.hex.default.hex&&(this.hex.default=this.hex.default.hex),this.hex.dark.hex&&(this.hex.dark=this.hex.dark.hex),this.hex.accent.hex&&(this.hex.accent=this.hex.accent.hex);var e=this.hexToRgb(this.hex.default),t=this.hexToRgb(this.hex.dark),s=this.hexToRgb(this.hex.accent),i={account_id:this.$store.state.account_id,color:e,color_dark:t,color_accent:s};sa.conversations.update(this.conversationId,i),this.closeColorDialog()},saveTitle:function(){var e={account_id:this.$store.state.account_id,title:On.encrypt(this.conversationTitle)};sa.conversations.update(this.conversationId,e),this.closeTitleDialog()}}},te=ee,se=(s("24bb"),Object(B["a"])(te,Q,Z,!1,null,"be2856e4",null)),ie=se.exports,ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-card shadow",attrs:{id:"passcode-pane"}},[s("div",{staticClass:"mdl-card__title"},[s("h2",{staticClass:"mdl-card__title-text"},[e._v(" "+e._s(e.$t("passcode.enter"))+" ")])]),s("div",{staticClass:"mdl-card__supporting-text"},[s("form",[s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.passcode,expression:"passcode"}],staticClass:"mdl-textfield__input",attrs:{id:"passcode",type:"password",autofocus:""},domProps:{value:e.passcode},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),t.stopPropagation(),t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.continueClicked(t))},input:function(t){t.target.composing||(e.passcode=t.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"passcode"}},[e._v(e._s(e.$t("passcode.passcode")))])])])]),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"continue"},on:{click:e.continueClicked}},[e._v(" "+e._s(e.$t("dialog.continue"))+" ")]),s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"cancel"},on:{click:e.cancelClicked}},[e._v(" "+e._s(e.$t("dialog.cancel"))+" ")])])])},ae=[],re={name:"Passcode",data:function(){return{title:"",passcode:"",stored_passcode:null}},mounted:function(){var e=this;this.$store.commit("loading",!1),this.$store.commit("title",this.title),sa.account.settings.get().then((function(t){e.stored_passcode=On.decrypt(t.passcode)}))},methods:{continueClicked:function(){this.passcode==this.stored_passcode?(this.$store.commit("last_passcode_entry",Date.now()),this.$router.push({name:"conversations-list-private"})):Mn.snackbar("Incorrect passcode.")},cancelClicked:function(){this.$router.push({name:"conversations-list"})}}},oe=re,ce=(s("06b2"),Object(B["a"])(oe,ne,ae,!1,null,"4de5fdae",null)),le=ce.exports,de=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"page-content",attrs:{id:"account-list"}},[s("h4",[e._v("Get Help")]),e._m(0),s("div",{staticClass:"click-item",on:{click:function(t){return e.routeTo("https://messenger.klinkerapps.com/help")}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v(" Help Page ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" Search here, first! ")])]),s("div",{staticClass:"click-item",on:{click:function(t){return e.routeTo("https://twitter.com/pulsesms")}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v(" Twitter ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" @PulseSMS ")])]),s("div",{staticClass:"click-item",on:{click:function(t){return e.routeTo("mailto:pulsesmsapp@gmail.com?subject=Pulse%20SMS")}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v(" Email ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" pulsesmsapp@gmail.com ")])]),s("h4",[e._v("Information")]),s("div",{staticClass:"click-item mdl-color-text--grey-900",on:{click:function(t){return e.routeTo("https://github.com/klinker24/pulse-sms-web/releases")}}},[e._v(" Web App Changelog ")]),s("div",{staticClass:"click-item mdl-color-text--grey-900",on:{click:function(t){return e.routeTo("https://messenger.klinkerapps.com/overview/")}}},[e._v(" Pulse's Features ")]),s("div",{staticClass:"click-item mdl-color-text--grey-900",on:{click:function(t){return e.routeTo("https://messenger.klinkerapps.com/overview/")}}},[e._v(" Supported Platforms ")]),s("div",{staticClass:"click-item mdl-color-text--grey-900",on:{click:function(t){return e.routeTo("https://github.com/klinker-apps/pulse-sms-issues/issues/344")}}},[e._v(" Web Shortcut Keys ")]),s("div",{staticClass:"click-item mdl-color-text--grey-900",on:{click:function(t){return e.routeTo("https://messenger.klinkerapps.com/privacy.html")}}},[e._v(" Privacy Policy ")]),s("div",{staticClass:"click-item mdl-color-text--grey-900",on:{click:function(t){return e.routeTo("https://messenger.klinkerapps.com/tos.html")}}},[e._v(" Terms of Service ")]),s("h4",[e._v("Contributions")]),e._m(1),s("div",{staticClass:"click-item",on:{click:function(t){return e.routeTo("https://github.com/klinker-apps/pulse-sms-web/")}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v(" Pulse's web app is open-source ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" Thanks to everyone that has contributed their ideas and code! ")])]),e._m(2)])},he=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"item"},[s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" I have created a very extensive FAQ section for the app."),s("br"),e._v("As a one-man crew, I get a significant amount of emails, and they cut heavily into my development time. Before sending an email, do a quick search to free up time for both of us. You will probably find your answer, very easily."),s("br"),s("br"),e._v("If you don't find what you are looking for, feel free to reach out and I will be more than happy to get back to you as quickly as I am able. ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"item"},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v("  2019 Luke and Jake Klinker ")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"item"},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v(" Special Thanks ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" Solomon Rubin for creating the base for this web app. ")])])}],ue={name:"HelpFeedback",data:function(){return{title:"Help and Feedback",loading:!1}},mounted:function(){this.$store.commit("title",this.title)},methods:{routeTo:function(e){window.open(e,"_blank")}}},me=ue,pe=(s("2883"),Object(B["a"])(me,de,he,!1,null,"16221724",null)),fe=pe.exports,_e=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"thread-wrap"}},[s("div",{staticClass:"page-content",style:{marginBottom:e.margin_bottom+"px"},attrs:{id:"message-list"}},[e.messages.length>69?s("button",{staticClass:"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect",on:{click:e.handleShowMore}},[e._v(" Load Previous ")]):e._e(),0==e.messages.length?s("spinner",{staticClass:"spinner"}):e._e(),s("transition-group",{attrs:{name:"fade",tag:"div"}},e._l(e.messages,(function(t){return s("message",{key:t.device_id,attrs:{"message-data":t,"thread-color":e.getColor(t),"text-color":e.text_color(t)}})})),1)],1),s("sendbar",{ref:"sendbar",attrs:{"thread-id":e.threadId,"on-send":e.sendMessage,loading:e.$store.state.media_sending}})],1)},ve=[],ge=(s("4f37"),s("b047")),be=s.n(ge),Ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-wrapper",attrs:{title:e.stringTime},on:{mouseover:e.showOptions,mouseleave:e.hideOptions}},[e.messageData.marker?s("div",{attrs:{id:"offset-marker"}}):e._e(),s("transition",{attrs:{name:"fade"}},[e.messageData.marker?e._e():s("div",{class:e.style_class,style:e.styleGenerator,attrs:{id:e.id}},[s("div",{domProps:{innerHTML:e._s(e.content)}}),s("a",{directives:[{name:"show",rawName:"v-show",value:e.is_media&&!e.media_loading,expression:"is_media && !media_loading"}],attrs:{href:e.media_link,target:"_blank"}},[s("img",{staticClass:"media",attrs:{src:e.media_thumb,alt:"Thumbnail"},on:{click:e.openImage}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.is_article,expression:"is_article"}],staticClass:"article-title"},[e._v(" "+e._s(e.media_title)+" ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.is_article,expression:"is_article"}],staticClass:"article-snippet"},[e._v(" "+e._s(e.media_content)+" ")])]),0==e.video_src.length||e.media_loading?e._e():s("video",{attrs:{controls:"",src:e.video_src}}),0==e.audio_src.length||e.media_loading?e._e():s("audio",{attrs:{controls:"",src:e.audio_src}})])]),s("transition",{attrs:{name:"fade"}},[e.displayOptions&&!e.is_article?s("button",{staticClass:"message_options menu_icon refresh mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect",class:e.options_class,attrs:{id:"delete-button",tag:"button"},on:{click:e.deleteMessage}},[s("i",{staticClass:"material-icons"},[e._v("delete")])]):e._e()]),e.dateLabel?s("div",{staticClass:"date-wrapper"},[s("div",{staticClass:"mdl-color-text--grey-500",class:e.dateType},[e._v(" "+e._s(e.dateLabel)+" ")])]):e._e(),s("transition",{attrs:{name:"slide-out"}},[e.sending?s("div",{staticClass:"sent-wrapper"},[s("div",{staticClass:"sending mdl-color-text--grey-500"},[e._v(" Sending... ")])]):e._e()])],1)},ye=[],Ee=s("1901"),Ae=s.n(Ee),ke={name:"Message",props:["messageData","threadColor","textColor"],data:function(){return{id:this.messageData.device_id,mime:this.messageData.mime_type,content:this.messageData.data,type:this.messageData.message_type,timestamp:this.messageData.timestamp,message_from:this.messageData.message_from,color:"rgba(255,255,255,1)",style_class:[],is_media:!1,is_article:!1,media_loading:!0,media_link:"",media_thumb:"",media_title:"",media_content:"",video_src:"",audio_src:"",options_class:[],displayOptions:!1}},computed:{sending:function(){return 2==this.type&&(new Date).getTime()-this.timestamp<6e4},stringTime:function(){return fa.fullTimestamp(new Date(this.timestamp))},styleGenerator:function(){if(0!=this.type&&6!=this.type)return"";var e="";return(this.is_article||this.is_media)&&(e="padding-bottom:10px;"),"background: "+this.color+";border-color: "+this.color+" transparent;"+e+"color:"+this.textColor+";"},dateType:function(){return 0==this.type||6==this.type?"date-received":"date-sent"},dateLabel:function(){var e=this.messageData.fromLabel,t=this.messageData.dateLabel;return null!=e&&e.length>0&&null!=t?e+" - "+t:null!=e&&e.length>0?e:t}},mounted:function(){var e=this;if(!this.messageData.marker){var t=this.$store.state.media_loader;switch(this.style_class.push("message"),this.mime.split("/")[0]){case"text":this.mime.indexOf("card")>-1&&(this.content="<i>Contact Card</i>");break;case"image":this.content='<div style="width:436px;text-align:center;">\n                    <i style="line-height:254px">Loading image...</i>\n                </div>',this.is_media=!0,t.getMedia(this.id,this.mime).then((function(t){return e.loadImage(t)}));break;case"video":this.content='<div style="width:436px;text-align:center;">\n                    <i style="line-height:254px">Loading video...</i>\n                </div>',this.is_video=!0,t.getMedia(this.id,this.mime).then((function(t){return e.loadVideo(t)}));break;case"audio":this.content='<div style="width:436px;text-align:center;">\n                    <i style="line-height:254px">Loading audio...</i>\n                </div>',this.is_video=!0,t.getMedia(this.id,this.mime).then((function(t){return e.loadAudio(t)}));break;case"media":var s;this.is_media=!0,this.is_article=!0,this.style_class.push("media-preview");try{s=JSON.parse(this.content)}catch(r){this.mime="media/error"}if("media/map"==this.mime){var i="https://maps.googleapis.com/maps/api/staticmap?size=600x400&markers=color:red%7C"+s.latitude+","+s.longitude+"&key=AIzaSyAHq1IIIdGz01rEbEtUtDwEFJWwvAI_lww",n="https://maps.google.com/maps/@"+s.latitude+","+s.longitude+",16z";this.media_thumb=i,this.media_link=n,this.media_title="",this.media_content="",this.media_loading=!1}else if("media/youtube-v2"==this.mime)this.media_thumb=s.thumbnail,this.media_link=s.url,this.media_title=s.title,this.media_content="",this.media_loading=!1;else if("media/web"==this.mime)this.media_thumb=s.image_url,this.media_link=s.web_url,this.media_title=s.title,this.media_content=s.description,this.media_loading=!1;else if("media/error"==this.mime){this.content='<div style="width:436px;text-align:center;">\n                        <i style="line-height:254px">Media not avalible</i>\n                    </div>',this.is_media=!1;break}this.content="",this.media_thumb=this.media_thumb.replace(/https?/,"https");break;default:this.content="<i>Not yet supported</i>";break}var a="link-sent";if(!this.is_article)switch(this.type){case 0:case 6:a="#000"==this.textColor?"link-received-dark":"link-received",this.color=this.threadColor,this.style_class.push("received");break;case 3:this.style_class.push("error");break;case 5:this.style_class.push("info mdl-color-text--grey-700");break;default:this.style_class.push("sent"),this.options_class.push("sent_options")}this.sending&&this.$store.state.msgbus.$on("updateMessageType-"+this.id,this.updateType),this.content=Ae()(this.content,{className:a})}},beforeDestroy:function(){this.$store.state.msgbus.$off("updateMessageType-"+this.id,this.updateType)},methods:{refreshSettings:function(){sa.account.settings.get(),Mn.snackbar("Settings Refreshed")},showOptions:function(){this.displayOptions=!0},hideOptions:function(){this.displayOptions=!1},deleteMessage:function(){var e={okText:this.$t("thread.delete.delete"),cancelText:this.$t("thread.delete.cancel"),animation:"fade"},t=this.id,s=sa;this.$dialog.confirm(this.$t("thread.delete.message"),e).then((function(){s.messages.delete(t)})).catch((function(){}))},loadImage:function(e){this.content="";var t="data:"+this.mime+";base64,";this.media_thumb=t+e,this.media_link=t+e,this.media_loading=!1},loadVideo:function(e){this.content="";var t="data:"+this.mime+";base64,";this.video_src=t+e,this.media_loading=!1},loadAudio:function(e){this.content="";var t="data:"+this.mime+";base64,";this.audio_src=t+e,this.media_loading=!1},updateType:function(e){this.type=e.message_type},openImage:function(e){if(this.mime.indexOf("image")>-1){var t=this.$store.state.media_loader;Mn.displayImage(t,this.id,this.mime),e.stopPropagation(),e.preventDefault()}}}},we=ke,Se=(s("a568"),Object(B["a"])(we,Ce,ye,!1,null,"3dce3acf",null)),De=Se.exports,xe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"send-bar"},[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-progress mdl-js-progress mdl-progress__indeterminate",style:{display:e.loading?"":"none"}}),e.$store.state.loaded_media?s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"preview"},[s("div",{staticClass:"overlay"},[s("button",{staticClass:"media-clear mdl-button mdl-js-button mdl-button--colored mdl-button--fab mdl-js-ripple-effect",style:{background:e.send_color},on:{click:e.removeMedia}},[s("i",{staticClass:"material-icons"},[e._v("clear")])])]),s("img",{attrs:{src:e.media_blob}})]):e._e(),s("div",{staticClass:"send-bar-inner",attrs:{id:"sendbar"}},[s("input",{staticClass:"mdl-button mdl-js-button mdl-button--icon attach-button",attrs:{id:"attach",readonly:"",tabindex:"-1"},on:{click:function(t){return t.preventDefault(),e.attachMedia(t)}}}),s("input",{staticClass:"mdl-button mdl-js-button mdl-button--icon emoji-button",attrs:{id:"emoji",readonly:"",tabindex:"-1"},on:{click:e.toggleEmoji}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.show_emoji,expression:"show_emoji"}],attrs:{id:"emoji-wrapper"},on:{click:function(t){return t.target!==t.currentTarget?null:e.toggleEmoji(t)}}},[s("picker",{style:e.emojiStyle,attrs:{title:"Pick your emoji",set:e.set,"sheet-size":e.sheetSize,"per-line":e.perLine,skins:e.skin,data:e.emojiIndex},on:{select:e.insertEmoji}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.autocomplete_emoji,expression:"autocomplete_emoji"}],style:e.emojiAutocompleteStyle,attrs:{id:"emoji-autocomplete"}},[s("transition-group",{attrs:{name:"flip-list",tag:"div"}},e._l(e.emojiAutocompleteSuggestions,(function(t,i){return s("emoji-autocomplete-suggestion",{key:t.code,attrs:{emoji:t,"on-selected":e.selectAutocompleteEmoji,"is-active":i===e.emojiSelectedIndex}})})),1)],1),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"entry mdl-textfield mdl-js-textfield",class:e.is_dirty},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"mdl-textfield__input disabled",attrs:{id:"message-entry",type:"text"},domProps:{value:e.message},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.onArrowUp(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.onArrowDown(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.onTab(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:(t.preventDefault(),t.stopPropagation(),e.destroyAutoComplete(t))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.shiftKey?void t.stopPropagation():null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),t.stopPropagation(),e.dispatchSend(t))}],input:function(t){t.target.composing||(e.message=t.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"message-entry"}},[e._v(e._s(e.$t("sendbar.type")))])]),s("button",{staticClass:"send mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--colored mdl-js-ripple-effect",style:{background:e.send_color},attrs:{id:"send-button"},on:{click:e.dispatchSend}},[s("i",{staticClass:"material-icons md-18 material-icons-white"},[e._v("send")])])])])},Le=[],Be=(s("386d"),s("9865"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{class:e.classes,on:{click:e.onClick}},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v(" "+e._s(e.emojiImage)+" "+e._s(e.emojiCode)+" ")])])])}),Te=[],Fe={name:"EmojiAutocompleteSuggestion",props:["emoji","onSelected","isActive"],data:function(){return{emojiImage:this.emoji.emoji,emojiCode:":".concat(this.emoji.code)}},computed:{classes:function(){var e="click-item mdl-js-button mdl-js-ripple-effect";return this.isActive&&(e+=" is-active"),e}},methods:{onClick:function(){this.onSelected(this.emojiImage)}}},Ie=Fe,$e=(s("d7b9"),Object(B["a"])(Ie,Be,Te,!1,null,"4beabde0",null)),Me=$e.exports,Oe=s("bd86"),Ne=function(){function e(t){var s=this;if(Object(c["a"])(this,e),Object(Oe["a"])(this,"updateMirrorContent",(function(e){s.mirror.innerHTML=String(s.textarea.value).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />")+(s.settings.extra_line?"<br />":"");var t=s.getHeight(s.mirror);s.getHeight(s.textarea);s.textarea.style.height=t+10+"px"})),this.content=null,this.textarea=null,this.mirror=null,this.row=0,this.settings={extra_line:!1,content_el:void 0},this.content=document.getElementsByClassName("page-content")[0],"undefined"==typeof t.target)throw{name:"TargetUndefined",level:"Severe",message:"Target textarea required.",toString:function(){return this.name+": "+this.message}};this.textarea=t.target,"undefined"==typeof t.extra_line&&"undefined"==typeof t.extraLine||(this.settings.extra_line=t.extra_line||t.extraLine),"undefined"!=typeof t.content_el&&(this.settings.content_el=t.content_el),this.createMirror(),this.setSize(),this.textarea.onkeyup=this.updateMirrorContent,this.textarea.onfocus=this.updateMirrorContent,this.textarea.onchange=this.updateMirrorContent,this.updateMirrorContent()}return Object(l["a"])(e,[{key:"createMirror",value:function(){this.mirror=document.createElement("div"),this.mirror.className="autogrow-textarea-mirror",this.textarea.parentNode&&this.textarea.parentNode.insertBefore(this.mirror,this.textarea.nextSibling)}},{key:"setSize",value:function(){this.mirror.style.display="none",this.mirror.style.wordWrap="break-word",this.mirror.style.whiteSpace="pre-wrap",this.mirror.style.padding=this.textarea.style.paddingTop+" "+this.textarea.style.paddingRight+" "+this.textarea.style.paddingBottom+" "+this.textarea.style.paddingLeft,this.mirror.style.borderStyle=this.textarea.style.borderTopStyle+" "+this.textarea.style.borderRightStyle+" "+this.textarea.style.borderBottomStyle+" "+this.textarea.style.borderLeftStyle,this.mirror.style.borderWidth=this.textarea.style.borderTopWidth+" "+this.textarea.style.borderRightWidth+" "+this.textarea.style.borderBottomWidth+" "+this.textarea.style.borderLeftWidth,this.mirror.style.width=this.textarea.style.width,this.mirror.style.fontFamily=this.textarea.style.fontFamily,this.mirror.style.fontSize=this.textarea.style.fontSize,this.mirror.style.lineHeight=this.textarea.style.lineHeight,this.mirror.style.letterSpacing=this.textarea.style.letterSpacing,this.textarea.style.overflow="hidden",this.textarea.style.minHeight=this.rows+"em"}},{key:"getHeight",value:function(e){var t=window.getComputedStyle(e),s=t.display,i=t.position,n=t.visibility,a=t.maxHeight.replace("px","").replace("%",""),r=0;return"none"!==s&&"0"!==a?e.clientHeight:(e.style.position="absolute",e.style.visibility="hidden",e.style.display="block",r=e.clientHeight,e.style.display=s,e.style.position=i,e.style.visibility=n,r)}}]),e}(),Re=s("de38"),je=(s("01ce"),s("41fb")),Pe={name:"Sendbar",components:{Picker:je["Picker"],EmojiAutocompleteSuggestion:Me},props:["threadId","onSend","loading"],data:function(){return{message:"",emojiStyle:{position:"absolute",left:0,bottom:"70px",width:"18em"},emojiAutocompleteStyle:{position:"absolute",left:"72px",bottom:"67px",width:"18em","z-index":10},perLine:6,set:"twitter",emojiIndex:new je["EmojiIndex"](Re),sheetSize:32,skin:3,show_emoji:!1,$wrapper:null,$sendbar:null,emojiAutocompleteSuggestions:[],emojiSelectedIndex:0}},computed:{send_color:function(){return this.$store.state.theme_use_global?this.$store.state.theme_global_accent:this.$store.state.colors_accent},is_dirty:function(){return this.message.length>0?"is-dirty":""},media_blob:function(){return window.URL.createObjectURL(this.$store.state.loaded_media)},autocomplete_emoji:function(){return this.emojiAutocompleteSuggestions.length>0}},watch:{message:function(){var e=this.message.substr(0,this.$sendbar.selectionStart),t=e.lastIndexOf(":"),s=e.length-1;if(-1!=t&&t>e.lastIndexOf(" ")&&t!=s){var i=e.substring(t+1,s+1),n=/[\w\d]+/;if(i.length,!n.test(i))return;this.emojiAutocompleteSuggestions=this.emojiIndex.search(i).map((function(e){return{emoji:e.native,code:e.short_name}})).slice(0,10)}else this.emojiAutocompleteSuggestions=[];this.$store.state.msgbus.$emit("message-text-updated",this.message)}},mounted:function(){new Ne({target:document.getElementById("message-entry"),extra_line:!0,content_el:document.getElementById("message-list")}),window.addEventListener("resize",this.updateEmojiMargin),this.$wrapper=document.querySelector("#wrapper"),this.$sendbar=document.querySelector("#message-entry"),this.$store.state.msgbus.$on("hotkey-emoji",this.toggleEmoji),this.$store.state.msgbus.$on("apply-draft",this.applyDraft),this.$store.state.msgbus.$on("clear-sendbar",this.clearSendbar),document.documentElement.addEventListener("paste",(function(e){var t,s;return s=!1,t=e.clipboardData,Array.prototype.forEach.call(t.types,(function(e,i){var n,a;if(!s)return e.match(/image.*/)||t.items[i].type.match(/image.*/)?(n=t.items[i].getAsFile(),a=new FileReader,a.onload=function(){return sa.messages.media.compress(n)},a.readAsDataURL(n),s=!0):void 0}))}))},destroy:function(){document.documentElement.removeEventListener("paste"),this.$store.state.msgbus.$off("hotkey-emoji",this.toggle),this.$store.state.msgbus.$off("apply-draft",this.applyDraft),this.$store.state.msgbus.$off("clear-sendbar",this.clearSendbar)},methods:{dispatchSend:function(e){var t=this.threadId;if(e instanceof KeyboardEvent&&this.autocomplete_emoji){var s=this.emojiAutocompleteSuggestions[this.emojiSelectedIndex].emoji;this.selectAutocompleteEmoji(s)}else{if(e instanceof KeyboardEvent&&((e.shiftKey||e.ctrlKey)&&this.$store.state.enter_to_send||!e.shiftKey&&!e.ctrlKey&&!this.$store.state.enter_to_send)){var n=e.target.selectionStart,a=e.target.selectionEnd;return this.message=this.message.substr(0,n)+"\n"+this.message.substr(a,this.message.length),void i["default"].nextTick((function(){return e.target.setSelectionRange(n+1,n+1)}))}if(this.message.length<=0&&!this.$store.state.loaded_media)return!1;this.onSend(this.message,t),this.message=""}},removeMedia:function(){this.$store.state.loaded_media&&this.$store.commit("loaded_media",null)},attachMedia:function(){this.destroyAutoComplete();var e=document.createElement("input");e.setAttribute("type","file"),e.addEventListener("change",(function(e){var t;t=e.dataTransfer?e.dataTransfer.files[0]:e.target.files[0],sa.messages.media.compress(t)}));var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)},toggleEmoji:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.destroyAutoComplete(),this.updateEmojiMargin(!0),this.show_emoji="boolean"!=typeof e?!this.show_emoji:e},updateEmojiMargin:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.show_emoji||e){var t=950,s=document.documentElement.clientWidth,i=0;s>t&&(i=(s-t)/2);var n=this.$store.state.full_theme?270:0;this.emojiStyle.left=n+i+"px"}},insertEmoji:function(e){var t=this;this.destroyAutoComplete();var s=this.$sendbar.selectionStart,n=this.$sendbar.selectionEnd;this.message=this.message.substr(0,s)+e.native+this.message.substr(n,this.message.length),i["default"].nextTick((function(){return t.$sendbar.setSelectionRange(s+e.native.length,s+e.native.length)}))},selectAutocompleteEmoji:function(e){var t=this;this.destroyAutoComplete();var s=this.message.substr(0,this.$sendbar.selectionStart),n=s.lastIndexOf(":"),a=s.length;this.message=this.message.substr(0,n)+e+this.message.substr(a,this.message.length),i["default"].nextTick((function(){return t.$sendbar.setSelectionRange(n+e.length,n+e.length)}))},onArrowDown:function(){this.autocomplete_emoji&&(event.preventDefault(),event.stopPropagation(),this.emojiSelectedIndex>0&&(this.emojiSelectedIndex=this.emojiSelectedIndex-1))},onArrowUp:function(e){this.autocomplete_emoji&&(e.preventDefault(),e.stopPropagation(),this.emojiSelectedIndex<this.emojiAutocompleteSuggestions.length&&(this.emojiSelectedIndex=this.emojiSelectedIndex+1))},onTab:function(e){if(this.autocomplete_emoji){e.preventDefault(),e.stopPropagation();var t=this.emojiAutocompleteSuggestions[this.emojiSelectedIndex].emoji;this.selectAutocompleteEmoji(t)}},destroyAutoComplete:function(){this.emojiAutocompleteSuggestions=[],this.emojiSelectedIndex=0},applyDraft:function(e){this.message=e},clearSendbar:function(){this.message="",this.removeMedia()}}},He=Pe,Ue=(s("5390"),Object(B["a"])(He,xe,Le,!1,null,"6403aa66",null)),qe=Ue.exports,ze={name:"Thread",components:{Spinner:F,Message:De,Sendbar:qe},props:["threadId","isRead"],data:function(){return{conversation_id:this.threadId,read:this.isRead,messages:[],previous_title:"",listeners:[],colors_from:{},margin_bottom:"63",html:null,body:null,list:null,snackbar:null,sendbar:null,offset:0,messageText:"",has_draft:!1}},computed:{conversation_data:function(){return this.$store.getters.getConversationData(this.conversation_id)},color:function(){return!this.$store.state.theme_use_global&&this.conversation_data?this.conversation_data.colors.default:this.$store.state.theme_global_default},isArchived:function(){return this.$route.path.indexOf("archived")>-1}},watch:{$route:function(){this.cleanupDrafts(),this.messageText="",this.has_draft=!1,this.$store.state.msgbus.$emit("clear-sendbar"),this.conversation_id=this.threadId,this.read=this.isRead,this.loadThread(),this.loadDrafts()}},mounted:function(){var e=this;"undefined"==typeof this.isRead&&(this.read=!1),this.$store.state.msgbus.$on("newMessage",this.addNewMessage),this.$store.state.msgbus.$on("deletedMessage",this.deletedMessage),this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.$store.state.msgbus.$on("message-text-updated",this.messageTextUpdated),this.$store.state.msgbus.$on("archive-btn",this.archive),this.$store.state.msgbus.$on("unarchive-btn",this.archive),this.$store.state.msgbus.$on("delete-btn",this.delete),this.$store.state.msgbus.$on("blacklist-btn",this.blacklist),this.$store.state.msgbus.$on("conversation-information-btn",this.conversationInformation),this.$store.state.msgbus.$on("conversation-settings-btn",this.conversationSettings),this.$store.state.msgbus.$on("hotkey-page-previous",this.pageToPrevious),this.$store.state.msgbus.$on("hotkey-page-next",this.pageToNext),this.$store.state.msgbus.$on("hotkey-archive-and-advance",this.archiveAdvance),this.html=document.querySelector("html"),this.body=document.querySelector("body"),this.list=document.querySelector("#content"),this.snackbar=document.querySelector(".mdl-snackbar"),this.sendbar=document.querySelector("#sendbar");var t=Mn.addEventListeners(["focus"],(function(t){return e.markAsRead(),e.$el.querySelector("#message-entry").focus(),t.preventDefault(),t.stopPropagation(),!1}));this.listeners.extend(t),t=Mn.addEventListeners(["keydown","click"],be()(this.markAsRead,250)),this.listeners.extend(t),t=Mn.addEventListeners(["scroll"],this.cleanupSnackbar),this.listeners.extend(t),t=Mn.addEventListeners(["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"],(function(e){e.preventDefault(),e.stopPropagation()})),this.listeners.extend(t),t=Mn.addEventListeners(["dragover","dragenter"],(function(){var e=document.querySelector(".file-drag"),t=e.className;t.indexOf("dragging")<0&&(e.className=t+" dragging")})),this.listeners.extend(t),t=Mn.addEventListeners(["dragleave","dragend","drop"],(function(){var e=document.querySelector(".file-drag"),t=e.className.replace(" dragging","");e.className=t})),this.listeners.extend(t),t=Mn.addEventListeners(["drop"],(function(e){var t;t=e.dataTransfer?e.dataTransfer.files[0]:e.target.files[0],sa.messages.media.compress(t)})),this.listeners.extend(t),this.$watch("$refs.sendbar.message",(function(){return setTimeout((function(){e.margin_bottom=e.$refs.sendbar&&e.$refs.sendbar.$el.clientHeight}),500)}),{deep:!0,immediate:!0}),this.loadThread(),this.loadDrafts()},beforeDestroy:function(){this.cleanupDrafts(),this.$store.state.msgbus.$off("newMessage",this.addNewMessage),this.$store.state.msgbus.$off("deletedMessage",this.deletedMessage),this.$store.state.msgbus.$off("refresh-btn",this.refresh),this.$store.state.msgbus.$off("message-text-updated",this.messageTextUpdated),this.$store.state.msgbus.$off("archive-btn",this.archive),this.$store.state.msgbus.$off("unarchive-btn",this.archive),this.$store.state.msgbus.$off("delete-btn",this.delete),this.$store.state.msgbus.$off("blacklist-btn",this.blacklist),this.$store.state.msgbus.$off("conversation-information-btn",this.conversationInformation),this.$store.state.msgbus.$off("conversation-settings-btn",this.conversationSettings),this.$store.state.msgbus.$off("hotkey-page-previous",this.pageToPrevious),this.$store.state.msgbus.$off("hotkey-page-next",this.pageToNext),this.$store.state.msgbus.$off("hotkey-archive-and-advance",this.archiveAdvance),this.$store.commit("title",this.previous_title),this.$store.state.msgbus.$emit("hideImage"),Mn.removeEventListeners(this.listeners),this.$store.state.loaded_media&&this.$store.commit("loaded_media",null)},methods:{sendMessage:function(e,t){if(t||(t=this.conversation_id),this.$store.state.loaded_media&&sa.messages.media.send(this.$store.state.loaded_media,(function(e,s){sa.messages.send("firebase -1",e.type,t,s)})),e.length<=0)return!1;sa.messages.send(e,"text/plain",t),!this.isArchived&&this.$store.state.archive_after_send&&(sa.conversations.archive(t,!0),this.pageToNext()),this.has_draft&&this.deleteDrafts()},loadThread:function(){var e=this;this.conversation_data||(ha.invalidateAllConversations(),ha.invalidateMessages(this.conversation_id+""),this.$router.push("/")),this.offset=0,this.messages=[],this.fetchMessages(),this.colors_from={},this.$store.state.hotkey_navigation?this.$store.commit("hotkey_navigation",!1):i["default"].nextTick((function(){e.$el.querySelector("#message-entry").focus()})),this.$store.state.loaded_media&&this.$store.commit("loaded_media",null);var t=this.conversation_data&&this.conversation_data.phone_number.split(", ");t&&1==t.length?this.colors_from[this.conversation_data.name]=this.conversation_data.colors.default:t&&t.map((function(t){var s=Mn.createIdMatcher(t),i=e.$store.getters.getContact(s);if(!i||!i.colors.default)return e.colors_from[t]=e.color;e.colors_from[i.name]=i.colors.default}))},loadDrafts:function(){var e=this;sa.drafts.getConversationDrafts(this.conversation_id).then((function(t){if(t.length>0){var s=!0,i=!1,n=void 0;try{for(var a,r=t[Symbol.iterator]();!(s=(a=r.next()).done);s=!0){var o=a.value;if("text/plain"==o.mime_type){e.$store.state.msgbus.$emit("apply-draft",o.data),e.has_draft=!0;break}}}catch(c){i=!0,n=c}finally{try{s||null==r.return||r.return()}finally{if(i)throw n}}}}))},cleanupDrafts:function(){this.messageText.trim()&&!this.$store.state.archive_after_send?this.saveDraft(this.messageText):this.has_draft&&this.deleteDrafts()},fetchMessages:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;sa.messages.get(this.conversation_id,t).then((function(s){for(var n,a=[],r=s.length-1;r>=0;r--)n=0==r?new Date:new Date(s[r-1].timestamp),s[r].dateLabel=e.compareTimestamps(new Date(s[r].timestamp),n),s[r].fromLabel=s[r].message_from,s[r].message_from&&r>0&&s[r-1].message_from==s[r].message_from&&(s[r].fromLabel=""),a.push(s[r]);t>0&&a.push({device_id:sa.generateId(),marker:!0}),e.messages=t>0?a.concat(e.messages):a,i["default"].nextTick((function(){e.offset<=0&&Mn.scrollToBottom(),e.offset>0&&e.$el.querySelector("#offset-marker")&&Object(d["a"])("#offset-marker",{duration:0,offset:-190,callback:function(){e.messages.splice(t,1)}}),e.offset+=70,e.$store.commit("loading",!1),e.markAsRead(),e.previous_title=e.$store.state.title,e.conversation_data&&(e.$store.commit("title",e.conversation_data.name),e.$store.commit("colors",e.conversation_data.colors))}))}))},addNewMessage:function(e){var t=this;if(e.conversation_id==this.conversation_id){var s=this.messages.containsObjKey("device_id",e.device_id);if(!s){var n=this.messages[this.messages.length-1],a=new Date(n.timestamp);if(n.dateLabel=this.compareTimestamps(new Date(e.timestamp),a),e.fromLabel=e.message_from,e.message_from&&this.messages.length>0&&n.message_from==e.message_from&&(n.fromLabel=""),this.messages.push(e),0!=e.type&&6!=e.type||(this.read=!1),!(this.html.scrollHeight-this.html.offsetHeight-200>Math.max(this.html.scrollTop,this.body.scrollTop))||this.list.scrollHeight<this.html.offsetHeight)i["default"].nextTick((function(){Mn.scrollToBottom(250)}));else if(!this.snackbar.MaterialSnackbar.active){var r,o={message:this.$t("thread.newmessage"),actionHandler:function(){t.snackbar.MaterialSnackbar.cleanup_(),clearTimeout(r),i["default"].nextTick((function(){Mn.scrollToBottom(250)}))},actionText:this.$t("thread.show"),timeout:216e3};Mn.snackbar(o),r=setTimeout((function(){i["default"].nextTick((function(){Mn.scrollToBottom(250)}))}),216e3)}}}},deletedMessage:function(e){for(var t=0;t<this.messages.length;t++)this.messages[t].device_id==e&&this.messages.splice(t,1)},markAsRead:function(){this.read||(sa.conversations.read(this.conversation_id),this.read=!0)},refresh:function(){ha.invalidateAllConversations(),ha.invalidateMessages(this.conversation_id+""),this.offset=0,this.messages=[],this.fetchMessages(),this.markAsRead()},archive:function(){var e=this;sa.conversations.archive(this.conversation_id,!this.isArchived),Mn.snackbar({message:"Conversation has been "+(this.isArchived?"moved to inbox":"archived")+".",actionText:"Undo",actionHandler:function(t){sa.conversations.archive(e.conversation_id,!e.isArchived),e.push_archive_url(),t.target.innerHTML='<i class="material-icons">done</i>',setTimeout((function(){return t.target.parentElement.MaterialSnackbar.cleanup_()}),2e3)},timeout:6e3}),this.snackbar.MaterialSnackbar.active=!1,this.push_archive_url()},push_archive_url:function(){var e=(this.$route.path.replace("archived","")+(this.isArchived?"/":"/archived")).replace("//","/");this.$router.push(e)},delete:function(){var e={okText:this.$t("thread.delete.delete"),cancelText:this.$t("thread.delete.cancel"),animation:"fade"},t=this.conversation_id,s=sa;this.$router.push("/"),this.$dialog.confirm(this.$t("thread.delete.thread"),e).then((function(){s.conversations.delete(t)})).catch((function(){}))},blacklist:function(){this.conversation_data.phone_number.indexOf(",")<0?(sa.blacklist.create.phone(this.conversation_data.phone_number),sa.conversations.archive(this.conversation_id,!0),Mn.snackbar({message:this.$t("thread.blacklisted"),timeout:6e3}),this.$router.push("/")):Mn.snackbar({message:this.$t("thread.groupblacklisted"),timeout:6e3}),this.snackbar.MaterialSnackbar.active=!1},conversationInformation:function(){var e=this,t=this.conversation_data.phone_number.indexOf(",")<0?"Phone number: ":"Phone numbers: ";Mn.snackbar({message:t+this.conversation_data.phone_number,actionText:"Copy",actionHandler:function(t){var s=document.createElement("input");document.body.appendChild(s),s.setAttribute("value",e.conversation_data.phone_number),s.select(),document.execCommand("copy"),document.body.removeChild(s),t.target.parentElement.MaterialSnackbar.cleanup_()},timeout:1e4})},conversationSettings:function(){this.$router.push({name:"conversation-settings",params:{conversationTitle:this.conversation_data.name,conversationId:this.conversation_id}})},archiveAdvance:function(){var e=this.conversation_id;sa.conversations.archive(e,!0),this.pageToNext()},pageToNext:function(){for(var e=ha.getConversations(),t=-1,s=0;s<e.length;s++)if(e[s].device_id==this.conversation_id){t=s;break}-1!=t&&t<e.length-1&&this.$router.push("/thread/"+e[t+1].device_id)},pageToPrevious:function(){for(var e=ha.getConversations(),t=-1,s=0;s<e.length;s++)if(e[s].device_id==this.conversation_id){t=s;break}t>0&&this.$router.push("/thread/"+e[t-1].device_id)},text_color:function(e){try{var t=this.getColor(e);return Mn.getTextColorBasedOnBackground(t)}catch(s){return"#FFF"}},getColor:function(e){if(e.message_from){var t=this.colors_from[e.message_from];return t||this.color}return this.color},cleanupSnackbar:function(){if(!this.snackbar.MaterialSnackbar.active)return!1;this.html.scrollHeight-this.html.offsetHeight-200<Math.max(this.html.scrollTop,this.body.scrollTop)&&this.snackbar.MaterialSnackbar.cleanup_()},compareTimestamps:function(e,t){var s=15;return this.$store.state.theme_message_timestamp||t.getTime()>e.getTime()+6e4*s?fa.formatTimestamp(e.getTime(),Date.now()):null},handleShowMore:function(){this.fetchMessages(this.offset)},messageTextUpdated:function(e){this.messageText=e},saveDraft:function(e){this.has_draft?sa.drafts.replace(this.conversation_id,e):sa.drafts.create(this.conversation_id,e)},deleteDrafts:function(){sa.drafts.delete(this.conversation_id)}}},Ge=ze,Ke=(s("8dca"),Object(B["a"])(Ge,_e,ve,!1,null,"382c1c30",null)),Ve=Ke.exports,We=Ve,Je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-content"},[s("ContactEntryBar",{attrs:{"on-contact-list-changed":e.onContactListChanged}}),s("Sendbar",{attrs:{"on-send":e.sendMessage,loading:e.sending}})],1)},Ye=[],Xe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("multi-list-select",{attrs:{id:"multiselect",list:e.contacts,"option-value":"phone","option-text":"nameNormalized","selected-items":e.selectedContacts,"custom-text":e.optionText,placeholder:e.$t("compose.type")},on:{searchchange:e.searchChanged,select:e.onSelect}})},Qe=[],Ze=s("b410"),et={name:"ContactEntryBar",components:{MultiListSelect:Ze["MultiListSelect"]},props:["onContactListChanged"],data:function(){return{contacts:[],selectedContacts:[],currentlyTyped:void 0}},mounted:function(){var e=this;this.queryContacts(),this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.$el.querySelector("#multiselect").click(),this.$el.querySelector("#multiselect").addEventListener("blur",(function(){e.searchChanged(e.currentlyTyped,!0)}))},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{onSelect:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currentlyTyped=void 0,this.selectedContacts=e,this.onContactListChanged(e),s||i["default"].nextTick((function(){t.$el.querySelector("#multiselect").click()}))},optionText:function(e){if(!e.id)return e.phone;var t=e.name+" "+e.phone;if(e.type)switch(e.type){case-1:break;case 0:t=t+" ("+va.t("contact.group")+")";break;case 1:t=t+" ("+va.t("contact.home")+")";break;case 2:t=t+" ("+va.t("contact.mobile")+")";break;case 3:t=t+" ("+va.t("contact.work")+")";break;default:t=t+" ("+va.t("contact.other")+")";break}return t},refresh:function(){this.queryContacts(!0)},queryContacts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(Mn.snackbar(va.t("compose.downloading")),ha.invalidateContacts()),sa.contacts.get().then((function(t){return e.processContacts(t)}))},processContacts:function(e){var t=[],s=[],i=!0,n=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var c=r.value,l=Mn.createIdMatcher(c.phone_number);t.indexOf(l)>=0?s[s.length]=c.id:(t[t.length]=l,c.name!==c.phone_number&&this.contacts.push({id:c.id,name:c.name,nameNormalized:this.stripUnicode(c.name),phone:c.phone_number,type:c.contact_type}))}}catch(y){n=!0,a=y}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}if(s.length>0){for(var d="",h=0;h<s.length&&h<100;h++)d+=s[h],h!=s.length-1&&(d+=",");sa.contacts.delete(d)}var u=ha.getConversations("index_public_unarchived");if(u){var m=!0,p=!1,f=void 0;try{for(var _,v=u[Symbol.iterator]();!(m=(_=v.next()).done);m=!0){var g=_.value;if(g.phone_numbers&&!(g.phone_numbers.indexOf(",")>-1)){var b=Mn.createIdMatcher(g.phone_numbers);if(!(t.indexOf(b)>=0)){var C=sa.generateId();this.contacts.push({id:C,name:g.title,nameNormalized:this.stripUnicode(g.title),phone:g.phone_numbers,type:void 0})}}}}catch(y){p=!0,f=y}finally{try{m||null==v.return||v.return()}finally{if(p)throw f}}}},stripUnicode:function(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")},searchChanged:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&(this.currentlyTyped=e,e.indexOf(";")>0||e.indexOf(",")>0||s&&this.currentlyTyped.length>0)){var n=e.split(/;|,/g);n.forEach((function(e){e.length>0&&(e=e.replace(/ /g,""),t.selectedContacts.push({phone:e}))})),i["default"].nextTick((function(){t.currentlyTyped=void 0,t.$el.querySelector("#multiselect").blur(),t.onSelect(t.selectedContacts,s)}))}}}},tt=et,st=(s("a6a8"),Object(B["a"])(tt,Xe,Qe,!1,null,null,null)),it=st.exports,nt={name:"Compose",components:{ContactEntryBar:it,Sendbar:qe},data:function(){return{title:"Compose",sending:!1,selectedContacts:[]}},mounted:function(){this.$store.commit("colors_default",this.$store.state.theme_global_default),this.$store.commit("colors_dark",this.$store.state.theme_global_dark),this.$store.commit("colors_accent",this.$store.state.theme_global_accent),this.$store.commit("loading",!1),this.$store.commit("title",this.title)},methods:{onContactListChanged:function(e){this.selectedContacts=e},sendMessage:function(e){var t=this,s="";if(this.selectedContacts.length<=0)return Mn.snackbar(va.t("compose.norecipient"));this.selectedContacts.map((function(e){s+=e.phone+","})),s=s.slice(0,s.length-1),this.sending=!0,this.$store.state.loaded_media&&sa.messages.media.send(this.$store.state.loaded_media,(function(e,t){sa.conversations.createWithImage(s,t,e.type)})),e.length>0&&sa.conversations.create(s,e),setTimeout((function(){t.$router.push("/").catch((function(){}))}),1500)}}},at=nt,rt=(s("34f2"),Object(B["a"])(at,Je,Ye,!1,null,"9e9b83be",null)),ot=rt.exports,ct=ot,lt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-content",attrs:{id:"conversation-list"}},[0==e.conversations.length&&e.loading?s("spinner",{staticClass:"spinner"}):e._e(),e.showSearch?s("div",{attrs:{id:"quick_find"}},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],staticClass:"quick_find fixed_pos",attrs:{id:"search-bar",type:"text text_box",placeholder:"Search conversations...",autocomplete:"off",autocorrect:"off",spellcheck:"false"},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}})])]):e._e(),0!=e.conversations.length||e.loading?e._e():s("p",{staticClass:"empty-message"},[e._v(" "+e._s(e.$t("conversations.noconv"))+" ")]),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},e._l(e.conversations,(function(t){return s(t.title?"ConversationItem":"DayLabel",{key:t.hash?t.hash:t.label,tag:"component",attrs:{"conversation-data":t,"show-pinned":t.pinned&&!e.showConversationCategories,archive:e.isArchive,small:e.small,"is-selected":-1!=e.selectedConversations.indexOf(t),"is-selecting":e.selectedConversations.length>0}})})),1),e.small?e._e():s("button",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"compose mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored",style:e.composeStyle,attrs:{tag:"button"},on:{click:function(t){return e.$router.push("/compose")}}},[s("i",{staticClass:"material-icons md-light"},[e._v("add")])])],1)},dt=[],ht=s("75fc"),ut=(s("759f"),s("f386"),s("d442")),mt=s.n(ut),pt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"conversation-card mdl-card mdl-js-button conversation-card-small shadow",class:{small:e.small,selected:e.isSelected},attrs:{id:e.conversation_id,"data-timestamp":e.timestamp},on:{click:e.routeToThread}},[i("svg",{staticClass:"contact-img contact-img-small",attrs:{height:e.iconSize,width:e.iconSize},on:{click:function(t){return t.stopPropagation(),e.selectConversation(t)}}},[i("circle",{attrs:{cx:e.circleSize,cy:e.circleSize,r:e.circleSize,transform:"translate(1,1)","shape-rendering":"auto",fill:e.color}}),i("text",{staticStyle:{"text-anchor":"middle",fill:"#fff","font-weight":"300"},style:{fontSize:e.textLocation.size+"px"},attrs:{x:e.textLocation.x,y:e.textLocation.y}},[e._v(e._s(e.titleFirstLetter)+" ")])]),i("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"ripple-container mdl-js-ripple-effect mdl-js-button"}),i("div",{staticClass:"conversation-text conversation-text-small",class:{unread:!e.read}},[i("div",{staticClass:"conversation-title-container"},[e.showPinned?i("img",{staticClass:"conversation-pinned",attrs:{src:s("b7fb"),width:"18",height:"18"}}):e._e(),i("span",{staticClass:"conversation-title mdl-card__supporting-text conversation-title-small"},[e.read?e._e():i("i"),e._v(e._s(e.title))]),e.small?e._e():i("span",{staticClass:"conversation-date"},[e._v(e._s(e.date))])]),i("span",{staticClass:"conversation-snippet mdl-card__supporting-text conversation-snippet-small",domProps:{innerHTML:e._s(e.snippet)}})])])},ft=[],_t={name:"ConversationItem",props:["conversationData","archive","small","showPinned","isSelected","isSelecting"],data:function(){return{conversation_id:this.conversationData.device_id,title:this.conversationData.titleNoEmoji,snippet:this.conversationData.snippet,read:this.conversationData.read,timestamp:this.conversationData.timestamp,mute:this.conversationData.mute,private_notifications:this.conversationData.private_notifications}},computed:{color:function(){return this.isSelected?"#2E3133":this.$store.state.theme_use_global?this.$store.state.theme_global_default:this.conversationData.color},iconSize:function(){return this.small?24:48},circleSize:function(){return this.small?12:24},textLocation:function(){return this.small?{x:12,y:17.5,size:16}:{x:25,y:35,size:30}},titleFirstLetter:function(){if(this.isSelected)return"";if(this.small)return"";try{var e=this.title.split("")[0].toUpperCase();return e.match(/[A-Z]/i)?e:""}catch(t){return""}},date:function(){return this.$store.state.theme_conversation_categories?"":fa.formatConversationTimestamp(this.conversationData.timestamp,Date.now())}},methods:{routeToThread:function(){if(this.isSelecting)this.selectConversation();else{this.close_drawer();var e=Mn.generateContact(this.conversation_id,this.title,this.mute,this.private_notifications,this.color,Mn.expandColor(this.conversationData.color_accent),Mn.expandColor(this.conversationData.color_light),Mn.expandColor(this.conversationData.color_dark));this.$store.commit("contacts",e),this.$router.push({name:this.archive?"thread-archived":"thread",params:{threadId:this.conversation_id,isRead:this.read}}).catch((function(){}))}},selectConversation:function(){this.small?this.routeToThread():this.$store.state.msgbus.$emit("selectConversation",this.conversationData)},close_drawer:function(){this.$store.state.full_theme||this.$store.commit("sidebar_open",!1)}}},vt=_t,gt=(s("f4dc"),Object(B["a"])(vt,pt,ft,!1,null,"63a8f01e",null)),bt=gt.exports,Ct=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"label mdl-color-text--grey-600"},[e._v(" "+e._s(e.conversationData.label)+" ")])},yt=[],Et={name:"DayLabel",props:["conversationData"]},At=Et,kt=(s("55b5"),Object(B["a"])(At,Ct,yt,!1,null,"91a65216",null)),wt=kt.exports,St=(s("0cd8"),{methods:{updateUnreadCount:function(){var e=E.state.session_conversations.index_public_unarchived,t=e.reduce((function(e,t){return e+(t.read?0:1)}),0);E.commit("unread_count",t)}}}),Dt=s("b5ef"),xt=s.n(Dt),Lt={name:"Conversations",components:{ConversationItem:bt,DayLabel:wt,Spinner:F},mixins:[St],props:["small","index","folderId","folderName"],data:function(){return{title:"",loading:!0,conversations:[],unFilteredAllConversations:[],margin:0,searchClicked:!1,searchQuery:"",selectedConversations:[]}},computed:{isArchive:function(){return"index_archived"==this.index},composeStyle:function(){return"background: "+this.$store.state.colors_accent+";"},showSearch:function(){return this.searchClicked&&!this.small},showConversationCategories:function(){return this.$store.state.theme_conversation_categories}},watch:{$route:function(e,t){e.name!=t.name&&e.name.indexOf("conversations-list")>=0&&(this.conversations=[],this.unFilteredAllConversations=[],this.fetchConversations()),this.clearSelected()},"$store.state.theme_conversation_categories":function(){this.processConversations(this.unFilteredAllConversations,!0)},searchQuery:function(e){e=e.toLowerCase();var t=[];for(var s in this.unFilteredAllConversations){var i=this.unFilteredAllConversations[s];"function"!=typeof i&&((i.title.toLowerCase().indexOf(e)>-1||i.snippet.toLowerCase().indexOf(e)>-1||i.phone_numbers.indexOf(e)>-1)&&t.push(i))}this.processConversations(t,!1)}},mounted:function(){if(this.$store.state.msgbus.$on("newMessage",this.updateConversation),this.$store.state.msgbus.$on("conversationRead",this.updateRead),this.$store.state.msgbus.$on("conversationSnippetUpdated",this.updateSnippet),this.$store.state.msgbus.$on("removedConversation",this.fetchConversations),this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.$store.state.msgbus.$on("search-btn",this.toggleSearch),this.$store.state.msgbus.$on("searchUpdated",this.searchUpdated),this.$store.state.msgbus.$on("newMargin",this.updateMargin),this.$store.state.msgbus.$on("selectConversation",this.conversationSelected),this.fetchConversations(),!this.small){var e={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",e),this.$store.state.msgbus.$on("archive-selected-btn",this.archiveSelected),this.$store.state.msgbus.$on("unarchive-selected-btn",this.unarchiveSelected),this.$store.state.msgbus.$on("delete-selected-btn",this.deleteSelected),this.$store.state.msgbus.$on("select-all-btn",this.selectAll)}},beforeDestroy:function(){this.$store.state.msgbus.$off("newMessage",this.updateConversation),this.$store.state.msgbus.$off("conversationRead",this.updateRead),this.$store.state.msgbus.$off("conversationSnippetUpdated",this.updateSnippet),this.$store.state.msgbus.$off("removedConversation",this.fetchConversations),this.$store.state.msgbus.$off("refresh-btn",this.refresh),this.$store.state.msgbus.$off("search-btn",this.toggleSearch),this.$store.state.msgbus.$off("newMargin",this.updateMargin),this.$store.state.msgbus.$off("selectConversation",this.conversationSelected),this.small||(this.$store.state.msgbus.$off("archive-selected-btn",this.archiveSelected),this.$store.state.msgbus.$off("unarchive-selected-btn",this.unarchiveSelected),this.$store.state.msgbus.$off("delete-selected-btn",this.deleteSelected),this.$store.state.msgbus.$off("select-all-btn",this.selectAll))},methods:{fetchConversations:function(){var e=this;if("index_private"==this.index){var t=this.$store.state.last_passcode_entry;if(null==t||t<Date.now()-15e3)return void this.$router.push("/passcode")}sa.conversations.getList(this.index,this.folderId).then((function(t){return e.processConversations(t)}))},processConversations:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(this.unFilteredAllConversations=e);var s=[],i=[],n=[];for(var a in e){var r=e[a];if("function"!=typeof r){var o=this.calculateTitle(r);-1==n.indexOf(o)&&(n.push(o),this.showConversationCategories&&s.push({label:o,hash:mt()(o)})),s.push(r),i.push(Mn.generateContact(r.device_id,r.title,r.phone_numbers,r.mute,r.private_notifications,r.color,Mn.expandColor(r.color_accent),Mn.expandColor(r.color_light),Mn.expandColor(r.color_dark)))}}this.loading=!1,this.$store.commit("conversations",i),this.conversations=s,this.index&&"index_public_unarchived"!=this.index||this.updateUnreadCount(),this.small||(this.$store.commit("loading",!1),this.$store.commit("title","folder"==this.index?this.folderName:this.title))},updateConversation:function(e){this.searchClicked&&(this.processConversations(this.unFilteredAllConversations),this.searchClicked=!1);var t=this.getConversation(e.conversation_id),s=t.conv,i=t.conv_index;if(!s||!i)return ha.invalidateAllConversations(),this.fetchConversations(),!1;s.read==e.read||e.read||this.index&&"index_public_unarchived"!=this.index||this.updateUnreadCount();var n=xt.a.toImage(Mn.generateSnippet(e));if(s.snippet=n,s.read=e.read,s.hash=mt()(s),s.timestamp!==e.timestamp){var a=0;this.showConversationCategories?"Pinned"!=this.conversations[0].label||s.pinned||this.conversations.some((function(e,t){if("undefined"!=typeof e.label&&"Pinned"!=e.label)return a=t,!0})):this.conversations[0].pinned&&!s.pinned&&this.conversations.some((function(e,t){if(!e.pinned)return a=t,!0}));var r=this.showConversationCategories?1:0;if(i!=a+r)if(s=this.conversations.splice(i,1)[0],"Today"!=this.conversations[a].label&&"Pinned"!=this.conversations[a].label&&this.showConversationCategories){var o="Today",c={label:o,hash:mt()(o)};this.conversations.splice(a,0,c,s)}else this.conversations.splice(a+r,0,s);this.conversations=this.conversations}},updateRead:function(e){var t=this.getConversation(e),s=t.conv,i=t.conv_index;if(!s||!i)return!1;s.read||this.updateUnreadCount(),s.read=!0,s.hash=mt()(s)},updateSnippet:function(e,t){var s=this.getConversation(e),i=s.conv,n=s.conv_index;if(!i||!n)return!1;i.snippet=xt.a.toImage(t),i.hash=mt()(i)},getConversation:function(e){var t=null,s=null;for(t in this.conversations)if(s=this.conversations[t],e==s.device_id)return{conv:s,conv_index:t};return{conv:null,conv_index:-1}},refresh:function(){this.loading=!0,ha.invalidateAllConversations(),this.fetchConversations()},updateMargin:function(e){this.margin=e},searchUpdated:function(e){this.searchQuery=e},toggleSearch:function(){var e=this;this.searchClicked=!this.searchClicked,this.searchClicked?i["default"].nextTick((function(){var t=e.$el.querySelector("#search-bar");t&&t.focus()})):this.searchQuery=""},calculateTitle:function(e){return e.pinned?va.t("conversations.pinned"):fa.isToday(e.timestamp)?va.t("conversations.today"):fa.isYesterday(e.timestamp)?va.t("conversations.yesterday"):fa.isLastWeek(e.timestamp)?va.t("conversations.thisweek"):fa.isLastMonth(e.timestamp)?va.t("conversations.thismonth"):va.t("conversations.older")},conversationSelected:function(e){var t=this.selectedConversations.indexOf(e);-1==t?this.selectedConversations.push(e):this.selectedConversations.splice(t,1),this.$store.state.msgbus.$emit("currentlySelectedConversations",this.selectedConversations)},archiveSelected:function(){var e=!0,t=!1,s=void 0;try{for(var i,n=this.selectedConversations[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var a=i.value;sa.conversations.archive(a.device_id,!0)}}catch(r){t=!0,s=r}finally{try{e||null==n.return||n.return()}finally{if(t)throw s}}this.clearSelected()},unarchiveSelected:function(){var e=!0,t=!1,s=void 0;try{for(var i,n=this.selectedConversations[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var a=i.value;sa.conversations.archive(a.device_id,!1)}}catch(r){t=!0,s=r}finally{try{e||null==n.return||n.return()}finally{if(t)throw s}}this.$router.push("/"),this.clearSelected()},deleteSelected:function(){var e={okText:this.$t("dialog.continue"),cancelText:this.$t("dialog.cancel"),animation:"fade"},t=sa,s=this.selectedConversations;this.$dialog.confirm(this.$t("conversations.deleteconfirm"),e).then((function(){var e=!0,i=!1,n=void 0;try{for(var a,r=s[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var o=a.value;t.conversations.delete(o.device_id)}}catch(c){i=!0,n=c}finally{try{e||null==r.return||r.return()}finally{if(i)throw n}}})).catch((function(){})),this.clearSelected()},selectAll:function(){this.selectedConversations=Object(ht["a"])(this.conversations),this.$store.state.msgbus.$emit("currentlySelectedConversations",this.selectedConversations)},clearSelected:function(){this.selectedConversations=[],this.$store.state.msgbus.$emit("currentlySelectedConversations",this.selectedConversations)}}},Bt=Lt,Tt=(s("94ce"),Object(B["a"])(Bt,lt,dt,!1,null,"c7732de0",null)),Ft=Tt.exports,It=Ft,$t=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-content",attrs:{id:"folders-list"}},[0==e.folders.length&&e.loading?s("spinner",{staticClass:"spinner"}):e._e(),0!=e.folders.length||e.loading?e._e():s("p",{staticClass:"empty-message"},[e._v(" No Folders ")]),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},e._l(e.folders,(function(e){return s("FolderItem",{key:e.hash,tag:"component",attrs:{"folder-data":e}})})),1)],1)},Mt=[],Ot=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"item",attrs:{id:e.id},on:{click:e.routeToList}},[e._v(" "+e._s(e.name)+" ")])])},Nt=[],Rt={name:"FolderItem",props:["folderData"],data:function(){return{id:this.folderData.device_id,name:this.folderData.name}},methods:{routeToList:function(){this.$router.push({name:"conversations-list-folder",params:{index:"folder",small:!1,folderId:this.id,folderName:this.name}}).catch((function(){}))}}},jt=Rt,Pt=(s("bd58"),Object(B["a"])(jt,Ot,Nt,!1,null,"368ef6f8",null)),Ht=Pt.exports,Ut={name:"Folders",components:{FolderItem:Ht,Spinner:F},data:function(){return{title:"",loading:!0,folders:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchFolders();var e={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",e)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchFolders:function(){var e=this;sa.folders.get().then((function(t){return e.processFolders(t)}))},processFolders:function(e){for(var t=[],s=0;s<e.length;s++){var i=e[s];i.hash=mt()(i),t.push(i)}this.folders=t,this.loading=!1,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.loading=!0,this.fetchFolders()}}},qt=Ut,zt=(s("3bbc"),Object(B["a"])(qt,$t,Mt,!1,null,"3ddba304",null)),Gt=zt.exports,Kt=Gt,Vt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-content",attrs:{id:"blacklists-list"}},[0==e.blacklists.length&&e.loading?s("spinner",{staticClass:"spinner"}):e._e(),0!=e.blacklists.length||e.loading?e._e():s("p",{staticClass:"empty-message"},[e._v(" "+e._s(e.$t("blacklist.none"))+" ")]),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},e._l(e.blacklists,(function(e){return s("BlacklistItem",{key:e.hash,tag:"component",attrs:{"blacklist-data":e}})})),1),s("button",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"create-blacklist mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored",style:{background:e.$store.state.colors_accent},attrs:{tag:"button"},on:{click:e.createBlacklist}},[s("i",{staticClass:"material-icons md-light"},[e._v("add")])])],1)},Wt=[],Jt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"item",attrs:{id:e.id},on:{click:function(t){return e.menu.toggle()}}},[e._v(" "+e._s(e.phone_number||e.phrase)+" ")]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"blacklist-menu","data-mdl-for":e.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:e.deleteBlacklist}},[e._v(" "+e._s(e.$t("blacklist.delete"))+" ")])])])},Yt=[],Xt=(s("d92a"),s("d25f"),s("7618")),Qt={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};Qt=function(){var e=[],t=[],s="mdlComponentConfigInternal_";function i(t,s){for(var i=0;i<e.length;i++)if(e[i].className===t)return"undefined"!==typeof s&&(e[i]=s),e[i];return!1}function n(e){var t=e.getAttribute("data-upgraded");return null===t?[""]:t.split(",")}function a(e,t){var s=n(e);return-1!==s.indexOf(t)}function r(e,t,s){if("CustomEvent"in window&&"function"===typeof window.CustomEvent)return new CustomEvent(e,{bubbles:t,cancelable:s});var i=document.createEvent("Events");return i.initEvent(e,t,s),i}function o(t,s){if("undefined"===typeof t&&"undefined"===typeof s)for(var n=0;n<e.length;n++)o(e[n].className,e[n].cssClass);else{var a=t;if("undefined"===typeof s){var r=i(a);r&&(s=r.cssClass)}for(var l=document.querySelectorAll("."+s),d=0;d<l.length;d++)c(l[d],a)}}function c(o,c){if(!("object"===Object(Xt["a"])(o)&&o instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var l=r("mdl-componentupgrading",!0,!0);if(o.dispatchEvent(l),!l.defaultPrevented){var d=n(o),h=[];if(c)a(o,c)||h.push(i(c));else{var u=o.classList;e.forEach((function(e){u.contains(e.cssClass)&&-1===h.indexOf(e)&&!a(o,e.className)&&h.push(e)}))}for(var m,p=0,f=h.length;p<f;p++){if(m=h[p],!m)throw new Error("Unable to find a registered component for the given class.");d.push(m.className),o.setAttribute("data-upgraded",d.join(","));var _=new m.classConstructor(o);_[s]=m,t.push(_);for(var v=0,g=m.callbacks.length;v<g;v++)m.callbacks[v](o);m.widget&&(o[m.className]=_);var b=r("mdl-componentupgraded",!0,!1);o.dispatchEvent(b)}}}function l(e){Array.isArray(e)||(e=e instanceof Element?[e]:Array.prototype.slice.call(e));for(var t,s=0,i=e.length;s<i;s++)t=e[s],t instanceof HTMLElement&&(c(t),t.children.length>0&&l(t.children))}function d(t){var n="undefined"===typeof t.widget&&"undefined"===typeof t["widget"],a=!0;n||(a=t.widget||t["widget"]);var r={classConstructor:t.constructor||t["constructor"],className:t.classAsString||t["classAsString"],cssClass:t.cssClass||t["cssClass"],widget:a,callbacks:[]};if(e.forEach((function(e){if(e.cssClass===r.cssClass)throw new Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===r.className)throw new Error("The provided className has already been registered")})),t.constructor.prototype.hasOwnProperty(s))throw new Error("MDL component classes must not have "+s+" defined as a property.");var o=i(t.classAsString,r);o||e.push(r)}function h(e,t){var s=i(e);s&&s.callbacks.push(t)}function u(){for(var t=0;t<e.length;t++)o(e[t].className)}function m(e){if(e){var i=t.indexOf(e);t.splice(i,1);var n=e.element_.getAttribute("data-upgraded").split(","),a=n.indexOf(e[s].classAsString);n.splice(a,1),e.element_.setAttribute("data-upgraded",n.join(","));var o=r("mdl-componentdowngraded",!0,!1);e.element_.dispatchEvent(o)}}function p(e){var s=function(e){t.filter((function(t){return t.element_===e})).forEach(m)};if(e instanceof Array||e instanceof NodeList)for(var i=0;i<e.length;i++)s(e[i]);else{if(!(e instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");s(e)}}return{upgradeDom:o,upgradeElement:c,upgradeElements:l,upgradeAllRegistered:u,registerUpgradedCallback:h,register:d,downgradeElements:p}}(),Qt.ComponentConfigPublic,Qt.ComponentConfig,Qt.Component,Qt["upgradeDom"]=Qt.upgradeDom,Qt["upgradeElement"]=Qt.upgradeElement,Qt["upgradeElements"]=Qt.upgradeElements,Qt["upgradeAllRegistered"]=Qt.upgradeAllRegistered,Qt["registerUpgradedCallback"]=Qt.registerUpgradedCallback,Qt["register"]=Qt.register,Qt["downgradeElements"]=Qt.downgradeElements,window.componentHandler=Qt,window["componentHandler"]=Qt,window.addEventListener("load",(function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),Qt.upgradeAllRegistered()):(Qt.upgradeElement=function(){},Qt.register=function(){})})),Date.now||(Date.now=function(){return(new Date).getTime()},Date["now"]=Date.now);for(var Zt=["webkit","moz"],es=0;es<Zt.length&&!window.requestAnimationFrame;++es){var ts=Zt[es];window.requestAnimationFrame=window[ts+"RequestAnimationFrame"],window.cancelAnimationFrame=window[ts+"CancelAnimationFrame"]||window[ts+"CancelRequestAnimationFrame"],window["requestAnimationFrame"]=window.requestAnimationFrame,window["cancelAnimationFrame"]=window.cancelAnimationFrame}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var ss=0;window.requestAnimationFrame=function(e){var t=Date.now(),s=Math.max(ss+16,t);return setTimeout((function(){e(ss=s)}),s-t)},window.cancelAnimationFrame=clearTimeout,window["requestAnimationFrame"]=window.requestAnimationFrame,window["cancelAnimationFrame"]=window.cancelAnimationFrame}
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var is=function(e){this.element_=e,this.init()};window["MaterialButton"]=is,is.prototype.Constant_={},is.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},is.prototype.blurHandler_=function(e){e&&this.element_.blur()},is.prototype.disable=function(){this.element_.disabled=!0},is.prototype["disable"]=is.prototype.disable,is.prototype.enable=function(){this.element_.disabled=!1},is.prototype["enable"]=is.prototype.enable,is.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},Qt.register({constructor:is,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ns=function(e){this.element_=e,this.init()};window["MaterialCheckbox"]=ns,ns.prototype.Constant_={TINY_TIMEOUT:.001},ns.prototype.CssClasses_={INPUT:"mdl-checkbox__input",BOX_OUTLINE:"mdl-checkbox__box-outline",FOCUS_HELPER:"mdl-checkbox__focus-helper",TICK_OUTLINE:"mdl-checkbox__tick-outline",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-checkbox__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded"},ns.prototype.onChange_=function(e){this.updateClasses_()},ns.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},ns.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},ns.prototype.onMouseUp_=function(e){this.blur_()},ns.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},ns.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},ns.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},ns.prototype["checkToggleState"]=ns.prototype.checkToggleState,ns.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},ns.prototype["checkDisabled"]=ns.prototype.checkDisabled,ns.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},ns.prototype["disable"]=ns.prototype.disable,ns.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},ns.prototype["enable"]=ns.prototype.enable,ns.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},ns.prototype["check"]=ns.prototype.check,ns.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},ns.prototype["uncheck"]=ns.prototype.uncheck,ns.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var e=document.createElement("span");e.classList.add(this.CssClasses_.BOX_OUTLINE);var t=document.createElement("span");t.classList.add(this.CssClasses_.FOCUS_HELPER);var s=document.createElement("span");if(s.classList.add(this.CssClasses_.TICK_OUTLINE),e.appendChild(s),this.element_.appendChild(t),this.element_.appendChild(e),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(i),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementMouseUp),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},Qt.register({constructor:ns,classAsString:"MaterialCheckbox",cssClass:"mdl-js-checkbox",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var as=function(e){this.element_=e,this.init()};window["MaterialIconToggle"]=as,as.prototype.Constant_={TINY_TIMEOUT:.001},as.prototype.CssClasses_={INPUT:"mdl-icon-toggle__input",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-icon-toggle__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},as.prototype.onChange_=function(e){this.updateClasses_()},as.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},as.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},as.prototype.onMouseUp_=function(e){this.blur_()},as.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},as.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},as.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},as.prototype["checkToggleState"]=as.prototype.checkToggleState,as.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},as.prototype["checkDisabled"]=as.prototype.checkDisabled,as.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},as.prototype["disable"]=as.prototype.disable,as.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},as.prototype["enable"]=as.prototype.enable,as.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},as.prototype["check"]=as.prototype.check,as.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},as.prototype["uncheck"]=as.prototype.uncheck,as.prototype.init=function(){if(this.element_){if(this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.element_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.JS_RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(e),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementOnMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementOnMouseUp),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},Qt.register({constructor:as,classAsString:"MaterialIconToggle",cssClass:"mdl-js-icon-toggle",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var rs=function(e){this.element_=e,this.init()};window["MaterialMenu"]=rs,rs.prototype.Constant_={TRANSITION_DURATION_SECONDS:.3,TRANSITION_DURATION_FRACTION:.8,CLOSE_TIMEOUT:150},rs.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32,UP_ARROW:38,DOWN_ARROW:40},rs.prototype.CssClasses_={CONTAINER:"mdl-menu__container",OUTLINE:"mdl-menu__outline",ITEM:"mdl-menu__item",ITEM_RIPPLE_CONTAINER:"mdl-menu__item-ripple-container",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_UPGRADED:"is-upgraded",IS_VISIBLE:"is-visible",IS_ANIMATING:"is-animating",BOTTOM_LEFT:"mdl-menu--bottom-left",BOTTOM_RIGHT:"mdl-menu--bottom-right",TOP_LEFT:"mdl-menu--top-left",TOP_RIGHT:"mdl-menu--top-right",UNALIGNED:"mdl-menu--unaligned"},rs.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.classList.add(this.CssClasses_.CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_),this.container_=e;var t=document.createElement("div");t.classList.add(this.CssClasses_.OUTLINE),this.outline_=t,e.insertBefore(t,this.element_);var s=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for"),i=null;s&&(i=document.getElementById(s),i&&(this.forElement_=i,i.addEventListener("click",this.handleForClick_.bind(this)),i.addEventListener("keydown",this.handleForKeyboardEvent_.bind(this))));var n=this.element_.querySelectorAll("."+this.CssClasses_.ITEM);this.boundItemKeydown_=this.handleItemKeyboardEvent_.bind(this),this.boundItemClick_=this.handleItemClick_.bind(this);for(var a=0;a<n.length;a++)n[a].addEventListener("click",this.boundItemClick_),n[a].tabIndex="-1",n[a].addEventListener("keydown",this.boundItemKeydown_);if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT))for(this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),a=0;a<n.length;a++){var r=n[a],o=document.createElement("span");o.classList.add(this.CssClasses_.ITEM_RIPPLE_CONTAINER);var c=document.createElement("span");c.classList.add(this.CssClasses_.RIPPLE),o.appendChild(c),r.appendChild(o),r.classList.add(this.CssClasses_.RIPPLE_EFFECT)}this.element_.classList.contains(this.CssClasses_.BOTTOM_LEFT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_LEFT),this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_RIGHT),this.element_.classList.contains(this.CssClasses_.TOP_LEFT)&&this.outline_.classList.add(this.CssClasses_.TOP_LEFT),this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)&&this.outline_.classList.add(this.CssClasses_.TOP_RIGHT),this.element_.classList.contains(this.CssClasses_.UNALIGNED)&&this.outline_.classList.add(this.CssClasses_.UNALIGNED),e.classList.add(this.CssClasses_.IS_UPGRADED)}},rs.prototype.handleForClick_=function(e){if(this.element_&&this.forElement_){var t=this.forElement_.getBoundingClientRect(),s=this.forElement_.parentElement.getBoundingClientRect();this.element_.classList.contains(this.CssClasses_.UNALIGNED)||(this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?(this.container_.style.right=s.right-t.right+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"):this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.bottom=s.bottom-t.top+"px"):this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(this.container_.style.right=s.right-t.right+"px",this.container_.style.bottom=s.bottom-t.top+"px"):(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"))}this.toggle(e)},rs.prototype.handleForKeyboardEvent_=function(e){if(this.element_&&this.container_&&this.forElement_){var t=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");t&&t.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)&&(e.keyCode===this.Keycodes_.UP_ARROW?(e.preventDefault(),t[t.length-1].focus()):e.keyCode===this.Keycodes_.DOWN_ARROW&&(e.preventDefault(),t[0].focus()))}},rs.prototype.handleItemKeyboardEvent_=function(e){if(this.element_&&this.container_){var t=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");if(t&&t.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)){var s=Array.prototype.slice.call(t).indexOf(e.target);if(e.keyCode===this.Keycodes_.UP_ARROW)e.preventDefault(),s>0?t[s-1].focus():t[t.length-1].focus();else if(e.keyCode===this.Keycodes_.DOWN_ARROW)e.preventDefault(),t.length>s+1?t[s+1].focus():t[0].focus();else if(e.keyCode===this.Keycodes_.SPACE||e.keyCode===this.Keycodes_.ENTER){e.preventDefault();var i=new MouseEvent("mousedown");e.target.dispatchEvent(i),i=new MouseEvent("mouseup"),e.target.dispatchEvent(i),e.target.click()}else e.keyCode===this.Keycodes_.ESCAPE&&(e.preventDefault(),this.hide())}}},rs.prototype.handleItemClick_=function(e){e.target.hasAttribute("disabled")?e.stopPropagation():(this.closing_=!0,window.setTimeout(function(e){this.hide(),this.closing_=!1}.bind(this),this.Constant_.CLOSE_TIMEOUT))},rs.prototype.applyClip_=function(e,t){this.element_.classList.contains(this.CssClasses_.UNALIGNED)?this.element_.style.clip="":this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?this.element_.style.clip="rect(0 "+t+"px 0 "+t+"px)":this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?this.element_.style.clip="rect("+e+"px 0 "+e+"px 0)":this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?this.element_.style.clip="rect("+e+"px "+t+"px "+e+"px "+t+"px)":this.element_.style.clip=""},rs.prototype.removeAnimationEndListener_=function(e){e.target.classList.remove(rs.prototype.CssClasses_.IS_ANIMATING)},rs.prototype.addAnimationEndListener_=function(){this.element_.addEventListener("transitionend",this.removeAnimationEndListener_),this.element_.addEventListener("webkitTransitionEnd",this.removeAnimationEndListener_)},rs.prototype.show=function(e){if(this.element_&&this.container_&&this.outline_){var t=this.element_.getBoundingClientRect().height,s=this.element_.getBoundingClientRect().width;this.container_.style.width=s+"px",this.container_.style.height=t+"px",this.outline_.style.width=s+"px",this.outline_.style.height=t+"px";for(var i=this.Constant_.TRANSITION_DURATION_SECONDS*this.Constant_.TRANSITION_DURATION_FRACTION,n=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),a=0;a<n.length;a++){var r=null;r=this.element_.classList.contains(this.CssClasses_.TOP_LEFT)||this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(t-n[a].offsetTop-n[a].offsetHeight)/t*i+"s":n[a].offsetTop/t*i+"s",n[a].style.transitionDelay=r}this.applyClip_(t,s),window.requestAnimationFrame(function(){this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.element_.style.clip="rect(0 "+s+"px "+t+"px 0)",this.container_.classList.add(this.CssClasses_.IS_VISIBLE)}.bind(this)),this.addAnimationEndListener_();var o=function(t){t===e||this.closing_||t.target.parentNode===this.element_||(document.removeEventListener("click",o),this.hide())}.bind(this);document.addEventListener("click",o)}},rs.prototype["show"]=rs.prototype.show,rs.prototype.hide=function(){if(this.element_&&this.container_&&this.outline_){for(var e=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),t=0;t<e.length;t++)e[t].style.removeProperty("transition-delay");var s=this.element_.getBoundingClientRect(),i=s.height,n=s.width;this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.applyClip_(i,n),this.container_.classList.remove(this.CssClasses_.IS_VISIBLE),this.addAnimationEndListener_()}},rs.prototype["hide"]=rs.prototype.hide,rs.prototype.toggle=function(e){this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)?this.hide():this.show(e)},rs.prototype["toggle"]=rs.prototype.toggle,Qt.register({constructor:rs,classAsString:"MaterialMenu",cssClass:"mdl-js-menu",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var os=function(e){this.element_=e,this.init()};window["MaterialProgress"]=os,os.prototype.Constant_={},os.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},os.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},os.prototype["setProgress"]=os.prototype.setProgress,os.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},os.prototype["setBuffer"]=os.prototype.setBuffer,os.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,e=document.createElement("div"),e.className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,e=document.createElement("div"),e.className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},Qt.register({constructor:os,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cs=function(e){this.element_=e,this.init()};window["MaterialRadio"]=cs,cs.prototype.Constant_={TINY_TIMEOUT:.001},cs.prototype.CssClasses_={IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded",JS_RADIO:"mdl-js-radio",RADIO_BTN:"mdl-radio__button",RADIO_OUTER_CIRCLE:"mdl-radio__outer-circle",RADIO_INNER_CIRCLE:"mdl-radio__inner-circle",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-radio__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple"},cs.prototype.onChange_=function(e){for(var t=document.getElementsByClassName(this.CssClasses_.JS_RADIO),s=0;s<t.length;s++){var i=t[s].querySelector("."+this.CssClasses_.RADIO_BTN);i.getAttribute("name")===this.btnElement_.getAttribute("name")&&"undefined"!==typeof t[s]["MaterialRadio"]&&t[s]["MaterialRadio"].updateClasses_()}},cs.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},cs.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},cs.prototype.onMouseup_=function(e){this.blur_()},cs.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},cs.prototype.blur_=function(){window.setTimeout(function(){this.btnElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},cs.prototype.checkDisabled=function(){this.btnElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},cs.prototype["checkDisabled"]=cs.prototype.checkDisabled,cs.prototype.checkToggleState=function(){this.btnElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},cs.prototype["checkToggleState"]=cs.prototype.checkToggleState,cs.prototype.disable=function(){this.btnElement_.disabled=!0,this.updateClasses_()},cs.prototype["disable"]=cs.prototype.disable,cs.prototype.enable=function(){this.btnElement_.disabled=!1,this.updateClasses_()},cs.prototype["enable"]=cs.prototype.enable,cs.prototype.check=function(){this.btnElement_.checked=!0,this.onChange_(null)},cs.prototype["check"]=cs.prototype.check,cs.prototype.uncheck=function(){this.btnElement_.checked=!1,this.onChange_(null)},cs.prototype["uncheck"]=cs.prototype.uncheck,cs.prototype.init=function(){if(this.element_){this.btnElement_=this.element_.querySelector("."+this.CssClasses_.RADIO_BTN),this.boundChangeHandler_=this.onChange_.bind(this),this.boundFocusHandler_=this.onChange_.bind(this),this.boundBlurHandler_=this.onBlur_.bind(this),this.boundMouseUpHandler_=this.onMouseup_.bind(this);var e=document.createElement("span");e.classList.add(this.CssClasses_.RADIO_OUTER_CIRCLE);var t,s=document.createElement("span");if(s.classList.add(this.CssClasses_.RADIO_INNER_CIRCLE),this.element_.appendChild(e),this.element_.appendChild(s),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),t=document.createElement("span"),t.classList.add(this.CssClasses_.RIPPLE_CONTAINER),t.classList.add(this.CssClasses_.RIPPLE_EFFECT),t.classList.add(this.CssClasses_.RIPPLE_CENTER),t.addEventListener("mouseup",this.boundMouseUpHandler_);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),t.appendChild(i),this.element_.appendChild(t)}this.btnElement_.addEventListener("change",this.boundChangeHandler_),this.btnElement_.addEventListener("focus",this.boundFocusHandler_),this.btnElement_.addEventListener("blur",this.boundBlurHandler_),this.element_.addEventListener("mouseup",this.boundMouseUpHandler_),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},Qt.register({constructor:cs,classAsString:"MaterialRadio",cssClass:"mdl-js-radio",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ls=function(e){this.element_=e,this.isIE_=window.navigator.msPointerEnabled,this.init()};window["MaterialSlider"]=ls,ls.prototype.Constant_={},ls.prototype.CssClasses_={IE_CONTAINER:"mdl-slider__ie-container",SLIDER_CONTAINER:"mdl-slider__container",BACKGROUND_FLEX:"mdl-slider__background-flex",BACKGROUND_LOWER:"mdl-slider__background-lower",BACKGROUND_UPPER:"mdl-slider__background-upper",IS_LOWEST_VALUE:"is-lowest-value",IS_UPGRADED:"is-upgraded"},ls.prototype.onInput_=function(e){this.updateValueStyles_()},ls.prototype.onChange_=function(e){this.updateValueStyles_()},ls.prototype.onMouseUp_=function(e){e.target.blur()},ls.prototype.onContainerMouseDown_=function(e){if(e.target===this.element_.parentElement){e.preventDefault();var t=new MouseEvent("mousedown",{target:e.target,buttons:e.buttons,clientX:e.clientX,clientY:this.element_.getBoundingClientRect().y});this.element_.dispatchEvent(t)}},ls.prototype.updateValueStyles_=function(){var e=(this.element_.value-this.element_.min)/(this.element_.max-this.element_.min);0===e?this.element_.classList.add(this.CssClasses_.IS_LOWEST_VALUE):this.element_.classList.remove(this.CssClasses_.IS_LOWEST_VALUE),this.isIE_||(this.backgroundLower_.style.flex=e,this.backgroundLower_.style.webkitFlex=e,this.backgroundUpper_.style.flex=1-e,this.backgroundUpper_.style.webkitFlex=1-e)},ls.prototype.disable=function(){this.element_.disabled=!0},ls.prototype["disable"]=ls.prototype.disable,ls.prototype.enable=function(){this.element_.disabled=!1},ls.prototype["enable"]=ls.prototype.enable,ls.prototype.change=function(e){"undefined"!==typeof e&&(this.element_.value=e),this.updateValueStyles_()},ls.prototype["change"]=ls.prototype.change,ls.prototype.init=function(){if(this.element_){if(this.isIE_){var e=document.createElement("div");e.classList.add(this.CssClasses_.IE_CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_)}else{var t=document.createElement("div");t.classList.add(this.CssClasses_.SLIDER_CONTAINER),this.element_.parentElement.insertBefore(t,this.element_),this.element_.parentElement.removeChild(this.element_),t.appendChild(this.element_);var s=document.createElement("div");s.classList.add(this.CssClasses_.BACKGROUND_FLEX),t.appendChild(s),this.backgroundLower_=document.createElement("div"),this.backgroundLower_.classList.add(this.CssClasses_.BACKGROUND_LOWER),s.appendChild(this.backgroundLower_),this.backgroundUpper_=document.createElement("div"),this.backgroundUpper_.classList.add(this.CssClasses_.BACKGROUND_UPPER),s.appendChild(this.backgroundUpper_)}this.boundInputHandler=this.onInput_.bind(this),this.boundChangeHandler=this.onChange_.bind(this),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.boundContainerMouseDownHandler=this.onContainerMouseDown_.bind(this),this.element_.addEventListener("input",this.boundInputHandler),this.element_.addEventListener("change",this.boundChangeHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.element_.parentElement.addEventListener("mousedown",this.boundContainerMouseDownHandler),this.updateValueStyles_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},Qt.register({constructor:ls,classAsString:"MaterialSlider",cssClass:"mdl-js-slider",widget:!0});var ds=function(e){if(this.element_=e,this.textElement_=this.element_.querySelector("."+this.cssClasses_.MESSAGE),this.actionElement_=this.element_.querySelector("."+this.cssClasses_.ACTION),!this.textElement_)throw new Error("There must be a message element for a snackbar.");if(!this.actionElement_)throw new Error("There must be an action element for a snackbar.");this.active=!1,this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.queuedNotifications_=[],this.setActionHidden_(!0)};window["MaterialSnackbar"]=ds,ds.prototype.Constant_={ANIMATION_LENGTH:250},ds.prototype.cssClasses_={SNACKBAR:"mdl-snackbar",MESSAGE:"mdl-snackbar__text",ACTION:"mdl-snackbar__action",ACTIVE:"mdl-snackbar--active"},ds.prototype.displaySnackbar_=function(){this.element_.setAttribute("aria-hidden","true"),this.actionHandler_&&(this.actionElement_.textContent=this.actionText_,this.actionElement_.addEventListener("click",this.actionHandler_),this.setActionHidden_(!1)),this.textElement_.textContent=this.message_,this.element_.classList.add(this.cssClasses_.ACTIVE),this.element_.setAttribute("aria-hidden","false"),setTimeout(this.cleanup_.bind(this),this.timeout_)},ds.prototype.showSnackbar=function(e){if(void 0===e)throw new Error("Please provide a data object with at least a message to display.");if(void 0===e["message"])throw new Error("Please provide a message to be displayed.");if(e["actionHandler"]&&!e["actionText"])throw new Error("Please provide action text with the handler.");this.active?this.queuedNotifications_.push(e):(this.active=!0,this.message_=e["message"],e["timeout"]?this.timeout_=e["timeout"]:this.timeout_=2750,e["actionHandler"]&&(this.actionHandler_=e["actionHandler"]),e["actionText"]&&(this.actionText_=e["actionText"]),this.displaySnackbar_())},ds.prototype["showSnackbar"]=ds.prototype.showSnackbar,ds.prototype.checkQueue_=function(){this.queuedNotifications_.length>0&&this.showSnackbar(this.queuedNotifications_.shift())},ds.prototype.cleanup_=function(){this.element_.classList.remove(this.cssClasses_.ACTIVE),setTimeout(function(){this.element_.setAttribute("aria-hidden","true"),this.textElement_.textContent="",Boolean(this.actionElement_.getAttribute("aria-hidden"))||(this.setActionHidden_(!0),this.actionElement_.textContent="",this.actionElement_.removeEventListener("click",this.actionHandler_)),this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.active=!1,this.checkQueue_()}.bind(this),this.Constant_.ANIMATION_LENGTH)},ds.prototype.setActionHidden_=function(e){e?this.actionElement_.setAttribute("aria-hidden","true"):this.actionElement_.removeAttribute("aria-hidden")},Qt.register({constructor:ds,classAsString:"MaterialSnackbar",cssClass:"mdl-js-snackbar",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var hs=function(e){this.element_=e,this.init()};window["MaterialSpinner"]=hs,hs.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},hs.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},hs.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),s.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var a=[s,i,n],r=0;r<a.length;r++){var o=document.createElement("div");o.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),a[r].appendChild(o)}t.appendChild(s),t.appendChild(i),t.appendChild(n),this.element_.appendChild(t)},hs.prototype["createLayer"]=hs.prototype.createLayer,hs.prototype.stop=function(){this.element_.classList.remove("is-active")},hs.prototype["stop"]=hs.prototype.stop,hs.prototype.start=function(){this.element_.classList.add("is-active")},hs.prototype["start"]=hs.prototype.start,hs.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},Qt.register({constructor:hs,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var us=function(e){this.element_=e,this.init()};window["MaterialSwitch"]=us,us.prototype.Constant_={TINY_TIMEOUT:.001},us.prototype.CssClasses_={INPUT:"mdl-switch__input",TRACK:"mdl-switch__track",THUMB:"mdl-switch__thumb",FOCUS_HELPER:"mdl-switch__focus-helper",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-switch__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},us.prototype.onChange_=function(e){this.updateClasses_()},us.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},us.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},us.prototype.onMouseUp_=function(e){this.blur_()},us.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},us.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},us.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},us.prototype["checkDisabled"]=us.prototype.checkDisabled,us.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},us.prototype["checkToggleState"]=us.prototype.checkToggleState,us.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},us.prototype["disable"]=us.prototype.disable,us.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},us.prototype["enable"]=us.prototype.enable,us.prototype.on=function(){this.inputElement_.checked=!0,this.updateClasses_()},us.prototype["on"]=us.prototype.on,us.prototype.off=function(){this.inputElement_.checked=!1,this.updateClasses_()},us.prototype["off"]=us.prototype.off,us.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var e=document.createElement("div");e.classList.add(this.CssClasses_.TRACK);var t=document.createElement("div");t.classList.add(this.CssClasses_.THUMB);var s=document.createElement("span");if(s.classList.add(this.CssClasses_.FOCUS_HELPER),t.appendChild(s),this.element_.appendChild(e),this.element_.appendChild(t),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.rippleContainerElement_.addEventListener("mouseup",this.boundMouseUpHandler);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(i),this.element_.appendChild(this.rippleContainerElement_)}this.boundChangeHandler=this.onChange_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.inputElement_.addEventListener("change",this.boundChangeHandler),this.inputElement_.addEventListener("focus",this.boundFocusHandler),this.inputElement_.addEventListener("blur",this.boundBlurHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},Qt.register({constructor:us,classAsString:"MaterialSwitch",cssClass:"mdl-js-switch",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ms=function(e){this.element_=e,this.init()};function ps(e,t){if(e){if(t.element_.classList.contains(t.CssClasses_.MDL_JS_RIPPLE_EFFECT)){var s=document.createElement("span");s.classList.add(t.CssClasses_.MDL_RIPPLE_CONTAINER),s.classList.add(t.CssClasses_.MDL_JS_RIPPLE_EFFECT);var i=document.createElement("span");i.classList.add(t.CssClasses_.MDL_RIPPLE),s.appendChild(i),e.appendChild(s)}e.addEventListener("click",(function(s){if("#"===e.getAttribute("href").charAt(0)){s.preventDefault();var i=e.href.split("#")[1],n=t.element_.querySelector("#"+i);t.resetTabState_(),t.resetPanelState_(),e.classList.add(t.CssClasses_.ACTIVE_CLASS),n.classList.add(t.CssClasses_.ACTIVE_CLASS)}}))}}window["MaterialTabs"]=ms,ms.prototype.Constant_={},ms.prototype.CssClasses_={TAB_CLASS:"mdl-tabs__tab",PANEL_CLASS:"mdl-tabs__panel",ACTIVE_CLASS:"is-active",UPGRADED_CLASS:"is-upgraded",MDL_JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",MDL_RIPPLE_CONTAINER:"mdl-tabs__ripple-container",MDL_RIPPLE:"mdl-ripple",MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events"},ms.prototype.initTabs_=function(){this.element_.classList.contains(this.CssClasses_.MDL_JS_RIPPLE_EFFECT)&&this.element_.classList.add(this.CssClasses_.MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS),this.tabs_=this.element_.querySelectorAll("."+this.CssClasses_.TAB_CLASS),this.panels_=this.element_.querySelectorAll("."+this.CssClasses_.PANEL_CLASS);for(var e=0;e<this.tabs_.length;e++)new ps(this.tabs_[e],this);this.element_.classList.add(this.CssClasses_.UPGRADED_CLASS)},ms.prototype.resetTabState_=function(){for(var e=0;e<this.tabs_.length;e++)this.tabs_[e].classList.remove(this.CssClasses_.ACTIVE_CLASS)},ms.prototype.resetPanelState_=function(){for(var e=0;e<this.panels_.length;e++)this.panels_[e].classList.remove(this.CssClasses_.ACTIVE_CLASS)},ms.prototype.init=function(){this.element_&&this.initTabs_()},Qt.register({constructor:ms,classAsString:"MaterialTabs",cssClass:"mdl-js-tabs"});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fs=function(e){this.element_=e,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window["MaterialTextfield"]=fs,fs.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},fs.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},fs.prototype.onKeyDown_=function(e){var t=e.target.value.split("\n").length;13===e.keyCode&&t>=this.maxRows&&e.preventDefault()},fs.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},fs.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},fs.prototype.onReset_=function(e){this.updateClasses_()},fs.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},fs.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},fs.prototype["checkDisabled"]=fs.prototype.checkDisabled,fs.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},fs.prototype["checkFocus"]=fs.prototype.checkFocus,fs.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},fs.prototype["checkValidity"]=fs.prototype.checkValidity,fs.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},fs.prototype["checkDirty"]=fs.prototype.checkDirty,fs.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},fs.prototype["disable"]=fs.prototype.disable,fs.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},fs.prototype["enable"]=fs.prototype.enable,fs.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},fs.prototype["change"]=fs.prototype.change,fs.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},Qt.register({constructor:fs,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _s=function(e){this.element_=e,this.init()};window["MaterialTooltip"]=_s,_s.prototype.Constant_={},_s.prototype.CssClasses_={IS_ACTIVE:"is-active",BOTTOM:"mdl-tooltip--bottom",LEFT:"mdl-tooltip--left",RIGHT:"mdl-tooltip--right",TOP:"mdl-tooltip--top"},_s.prototype.handleMouseEnter_=function(e){var t=e.target.getBoundingClientRect(),s=t.left+t.width/2,i=t.top+t.height/2,n=this.element_.offsetWidth/2*-1,a=this.element_.offsetHeight/2*-1;this.element_.classList.contains(this.CssClasses_.LEFT)||this.element_.classList.contains(this.CssClasses_.RIGHT)?(s=t.width/2,i+a<0?(this.element_.style.top="0",this.element_.style.marginTop="0"):(this.element_.style.top=i+"px",this.element_.style.marginTop=a+"px")):s+n<0?(this.element_.style.left="0",this.element_.style.marginLeft="0"):(this.element_.style.left=s+"px",this.element_.style.marginLeft=n+"px"),this.element_.classList.contains(this.CssClasses_.TOP)?this.element_.style.top=t.top-this.element_.offsetHeight-10+"px":this.element_.classList.contains(this.CssClasses_.RIGHT)?this.element_.style.left=t.left+t.width+10+"px":this.element_.classList.contains(this.CssClasses_.LEFT)?this.element_.style.left=t.left-this.element_.offsetWidth-10+"px":this.element_.style.top=t.top+t.height+10+"px",this.element_.classList.add(this.CssClasses_.IS_ACTIVE)},_s.prototype.hideTooltip_=function(){this.element_.classList.remove(this.CssClasses_.IS_ACTIVE)},_s.prototype.init=function(){if(this.element_){var e=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for");e&&(this.forElement_=document.getElementById(e)),this.forElement_&&(this.forElement_.hasAttribute("tabindex")||this.forElement_.setAttribute("tabindex","0"),this.boundMouseEnterHandler=this.handleMouseEnter_.bind(this),this.boundMouseLeaveAndScrollHandler=this.hideTooltip_.bind(this),this.forElement_.addEventListener("mouseenter",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("touchend",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("mouseleave",this.boundMouseLeaveAndScrollHandler,!1),window.addEventListener("scroll",this.boundMouseLeaveAndScrollHandler,!0),window.addEventListener("touchstart",this.boundMouseLeaveAndScrollHandler))}},Qt.register({constructor:_s,classAsString:"MaterialTooltip",cssClass:"mdl-tooltip"});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vs=function(e){this.element_=e,this.init()};function gs(e,t,s,i){function n(){var n=e.href.split("#")[1],a=i.content_.querySelector("#"+n);i.resetTabState_(t),i.resetPanelState_(s),e.classList.add(i.CssClasses_.IS_ACTIVE),a.classList.add(i.CssClasses_.IS_ACTIVE)}if(i.tabBar_.classList.contains(i.CssClasses_.JS_RIPPLE_EFFECT)){var a=document.createElement("span");a.classList.add(i.CssClasses_.RIPPLE_CONTAINER),a.classList.add(i.CssClasses_.JS_RIPPLE_EFFECT);var r=document.createElement("span");r.classList.add(i.CssClasses_.RIPPLE),a.appendChild(r),e.appendChild(a)}i.tabBar_.classList.contains(i.CssClasses_.TAB_MANUAL_SWITCH)||e.addEventListener("click",(function(t){"#"===e.getAttribute("href").charAt(0)&&(t.preventDefault(),n())})),e.show=n}window["MaterialLayout"]=vs,vs.prototype.Constant_={MAX_WIDTH:"(max-width: 1024px)",TAB_SCROLL_PIXELS:100,RESIZE_TIMEOUT:100,MENU_ICON:"&#xE5D2;",CHEVRON_LEFT:"chevron_left",CHEVRON_RIGHT:"chevron_right"},vs.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32},vs.prototype.Mode_={STANDARD:0,SEAMED:1,WATERFALL:2,SCROLL:3},vs.prototype.CssClasses_={CONTAINER:"mdl-layout__container",HEADER:"mdl-layout__header",DRAWER:"mdl-layout__drawer",CONTENT:"mdl-layout__content",DRAWER_BTN:"mdl-layout__drawer-button",ICON:"material-icons",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-layout__tab-ripple-container",RIPPLE:"mdl-ripple",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",HEADER_SEAMED:"mdl-layout__header--seamed",HEADER_WATERFALL:"mdl-layout__header--waterfall",HEADER_SCROLL:"mdl-layout__header--scroll",FIXED_HEADER:"mdl-layout--fixed-header",OBFUSCATOR:"mdl-layout__obfuscator",TAB_BAR:"mdl-layout__tab-bar",TAB_CONTAINER:"mdl-layout__tab-bar-container",TAB:"mdl-layout__tab",TAB_BAR_BUTTON:"mdl-layout__tab-bar-button",TAB_BAR_LEFT_BUTTON:"mdl-layout__tab-bar-left-button",TAB_BAR_RIGHT_BUTTON:"mdl-layout__tab-bar-right-button",TAB_MANUAL_SWITCH:"mdl-layout__tab-manual-switch",PANEL:"mdl-layout__tab-panel",HAS_DRAWER:"has-drawer",HAS_TABS:"has-tabs",HAS_SCROLLING_HEADER:"has-scrolling-header",CASTING_SHADOW:"is-casting-shadow",IS_COMPACT:"is-compact",IS_SMALL_SCREEN:"is-small-screen",IS_DRAWER_OPEN:"is-visible",IS_ACTIVE:"is-active",IS_UPGRADED:"is-upgraded",IS_ANIMATING:"is-animating",ON_LARGE_SCREEN:"mdl-layout--large-screen-only",ON_SMALL_SCREEN:"mdl-layout--small-screen-only"},vs.prototype.contentScrollHandler_=function(){if(!this.header_.classList.contains(this.CssClasses_.IS_ANIMATING)){var e=!this.element_.classList.contains(this.CssClasses_.IS_SMALL_SCREEN)||this.element_.classList.contains(this.CssClasses_.FIXED_HEADER);this.content_.scrollTop>0&&!this.header_.classList.contains(this.CssClasses_.IS_COMPACT)?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.header_.classList.add(this.CssClasses_.IS_COMPACT),e&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING)):this.content_.scrollTop<=0&&this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.header_.classList.remove(this.CssClasses_.IS_COMPACT),e&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING))}},vs.prototype.keyboardEventHandler_=function(e){e.keyCode===this.Keycodes_.ESCAPE&&this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)&&this.toggleDrawer()},vs.prototype.screenSizeHandler_=function(){this.screenSizeMediaQuery_.matches?this.element_.classList.add(this.CssClasses_.IS_SMALL_SCREEN):(this.element_.classList.remove(this.CssClasses_.IS_SMALL_SCREEN),this.drawer_&&(this.drawer_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN)))},vs.prototype.drawerToggleHandler_=function(e){if(e&&"keydown"===e.type){if(e.keyCode!==this.Keycodes_.SPACE&&e.keyCode!==this.Keycodes_.ENTER)return;e.preventDefault()}this.toggleDrawer()},vs.prototype.headerTransitionEndHandler_=function(){this.header_.classList.remove(this.CssClasses_.IS_ANIMATING)},vs.prototype.headerClickHandler_=function(){this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.IS_COMPACT),this.header_.classList.add(this.CssClasses_.IS_ANIMATING))},vs.prototype.resetTabState_=function(e){for(var t=0;t<e.length;t++)e[t].classList.remove(this.CssClasses_.IS_ACTIVE)},vs.prototype.resetPanelState_=function(e){for(var t=0;t<e.length;t++)e[t].classList.remove(this.CssClasses_.IS_ACTIVE)},vs.prototype.toggleDrawer=function(){var e=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);this.drawer_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)?(this.drawer_.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true")):(this.drawer_.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false"))},vs.prototype["toggleDrawer"]=vs.prototype.toggleDrawer,vs.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.classList.add(this.CssClasses_.CONTAINER);var t=this.element_.querySelector(":focus");this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_),t&&t.focus();for(var s=this.element_.childNodes,i=s.length,n=0;n<i;n++){var a=s[n];a.classList&&a.classList.contains(this.CssClasses_.HEADER)&&(this.header_=a),a.classList&&a.classList.contains(this.CssClasses_.DRAWER)&&(this.drawer_=a),a.classList&&a.classList.contains(this.CssClasses_.CONTENT)&&(this.content_=a)}window.addEventListener("pageshow",function(e){e.persisted&&(this.element_.style.overflowY="hidden",requestAnimationFrame(function(){this.element_.style.overflowY=""}.bind(this)))}.bind(this),!1),this.header_&&(this.tabBar_=this.header_.querySelector("."+this.CssClasses_.TAB_BAR));var r=this.Mode_.STANDARD;if(this.header_&&(this.header_.classList.contains(this.CssClasses_.HEADER_SEAMED)?r=this.Mode_.SEAMED:this.header_.classList.contains(this.CssClasses_.HEADER_WATERFALL)?(r=this.Mode_.WATERFALL,this.header_.addEventListener("transitionend",this.headerTransitionEndHandler_.bind(this)),this.header_.addEventListener("click",this.headerClickHandler_.bind(this))):this.header_.classList.contains(this.CssClasses_.HEADER_SCROLL)&&(r=this.Mode_.SCROLL,e.classList.add(this.CssClasses_.HAS_SCROLLING_HEADER)),r===this.Mode_.STANDARD?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.add(this.CssClasses_.CASTING_SHADOW)):r===this.Mode_.SEAMED||r===this.Mode_.SCROLL?(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.remove(this.CssClasses_.CASTING_SHADOW)):r===this.Mode_.WATERFALL&&(this.content_.addEventListener("scroll",this.contentScrollHandler_.bind(this)),this.contentScrollHandler_())),this.drawer_){var o=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);if(!o){o=document.createElement("div"),o.setAttribute("aria-expanded","false"),o.setAttribute("role","button"),o.setAttribute("tabindex","0"),o.classList.add(this.CssClasses_.DRAWER_BTN);var c=document.createElement("i");c.classList.add(this.CssClasses_.ICON),c.innerHTML=this.Constant_.MENU_ICON,o.appendChild(c)}this.drawer_.classList.contains(this.CssClasses_.ON_LARGE_SCREEN)?o.classList.add(this.CssClasses_.ON_LARGE_SCREEN):this.drawer_.classList.contains(this.CssClasses_.ON_SMALL_SCREEN)&&o.classList.add(this.CssClasses_.ON_SMALL_SCREEN),o.addEventListener("click",this.drawerToggleHandler_.bind(this)),o.addEventListener("keydown",this.drawerToggleHandler_.bind(this)),this.element_.classList.add(this.CssClasses_.HAS_DRAWER),this.element_.classList.contains(this.CssClasses_.FIXED_HEADER)?this.header_.insertBefore(o,this.header_.firstChild):this.element_.insertBefore(o,this.content_);var l=document.createElement("div");l.classList.add(this.CssClasses_.OBFUSCATOR),this.element_.appendChild(l),l.addEventListener("click",this.drawerToggleHandler_.bind(this)),this.obfuscator_=l,this.drawer_.addEventListener("keydown",this.keyboardEventHandler_.bind(this)),this.drawer_.setAttribute("aria-hidden","true")}if(this.screenSizeMediaQuery_=window.matchMedia(this.Constant_.MAX_WIDTH),this.screenSizeMediaQuery_.addListener(this.screenSizeHandler_.bind(this)),this.screenSizeHandler_(),this.header_&&this.tabBar_){this.element_.classList.add(this.CssClasses_.HAS_TABS);var d=document.createElement("div");d.classList.add(this.CssClasses_.TAB_CONTAINER),this.header_.insertBefore(d,this.tabBar_),this.header_.removeChild(this.tabBar_);var h=document.createElement("div");h.classList.add(this.CssClasses_.TAB_BAR_BUTTON),h.classList.add(this.CssClasses_.TAB_BAR_LEFT_BUTTON);var u=document.createElement("i");u.classList.add(this.CssClasses_.ICON),u.textContent=this.Constant_.CHEVRON_LEFT,h.appendChild(u),h.addEventListener("click",function(){this.tabBar_.scrollLeft-=this.Constant_.TAB_SCROLL_PIXELS}.bind(this));var m=document.createElement("div");m.classList.add(this.CssClasses_.TAB_BAR_BUTTON),m.classList.add(this.CssClasses_.TAB_BAR_RIGHT_BUTTON);var p=document.createElement("i");p.classList.add(this.CssClasses_.ICON),p.textContent=this.Constant_.CHEVRON_RIGHT,m.appendChild(p),m.addEventListener("click",function(){this.tabBar_.scrollLeft+=this.Constant_.TAB_SCROLL_PIXELS}.bind(this)),d.appendChild(h),d.appendChild(this.tabBar_),d.appendChild(m);var f=function(){this.tabBar_.scrollLeft>0?h.classList.add(this.CssClasses_.IS_ACTIVE):h.classList.remove(this.CssClasses_.IS_ACTIVE),this.tabBar_.scrollLeft<this.tabBar_.scrollWidth-this.tabBar_.offsetWidth?m.classList.add(this.CssClasses_.IS_ACTIVE):m.classList.remove(this.CssClasses_.IS_ACTIVE)}.bind(this);this.tabBar_.addEventListener("scroll",f),f();var _=function(){this.resizeTimeoutId_&&clearTimeout(this.resizeTimeoutId_),this.resizeTimeoutId_=setTimeout(function(){f(),this.resizeTimeoutId_=null}.bind(this),this.Constant_.RESIZE_TIMEOUT)}.bind(this);window.addEventListener("resize",_),this.tabBar_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)&&this.tabBar_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS);for(var v=this.tabBar_.querySelectorAll("."+this.CssClasses_.TAB),g=this.content_.querySelectorAll("."+this.CssClasses_.PANEL),b=0;b<v.length;b++)new gs(v[b],v,g,this)}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},window["MaterialLayoutTab"]=gs,Qt.register({constructor:vs,classAsString:"MaterialLayout",cssClass:"mdl-js-layout"});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bs=function(e){this.element_=e,this.init()};window["MaterialDataTable"]=bs,bs.prototype.Constant_={},bs.prototype.CssClasses_={DATA_TABLE:"mdl-data-table",SELECTABLE:"mdl-data-table--selectable",SELECT_ELEMENT:"mdl-data-table__select",IS_SELECTED:"is-selected",IS_UPGRADED:"is-upgraded"},bs.prototype.selectRow_=function(e,t,s){return t?function(){e.checked?t.classList.add(this.CssClasses_.IS_SELECTED):t.classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):s?function(){var t,i;if(e.checked)for(t=0;t<s.length;t++)i=s[t].querySelector("td").querySelector(".mdl-checkbox"),i["MaterialCheckbox"].check(),s[t].classList.add(this.CssClasses_.IS_SELECTED);else for(t=0;t<s.length;t++)i=s[t].querySelector("td").querySelector(".mdl-checkbox"),i["MaterialCheckbox"].uncheck(),s[t].classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):void 0},bs.prototype.createCheckbox_=function(e,t){var s=document.createElement("label"),i=["mdl-checkbox","mdl-js-checkbox","mdl-js-ripple-effect",this.CssClasses_.SELECT_ELEMENT];s.className=i.join(" ");var n=document.createElement("input");return n.type="checkbox",n.classList.add("mdl-checkbox__input"),e?(n.checked=e.classList.contains(this.CssClasses_.IS_SELECTED),n.addEventListener("change",this.selectRow_(n,e))):t&&n.addEventListener("change",this.selectRow_(n,null,t)),s.appendChild(n),Qt.upgradeElement(s,"MaterialCheckbox"),s},bs.prototype.init=function(){if(this.element_){var e=this.element_.querySelector("th"),t=Array.prototype.slice.call(this.element_.querySelectorAll("tbody tr")),s=Array.prototype.slice.call(this.element_.querySelectorAll("tfoot tr")),i=t.concat(s);if(this.element_.classList.contains(this.CssClasses_.SELECTABLE)){var n=document.createElement("th"),a=this.createCheckbox_(null,i);n.appendChild(a),e.parentElement.insertBefore(n,e);for(var r=0;r<i.length;r++){var o=i[r].querySelector("td");if(o){var c=document.createElement("td");if("TBODY"===i[r].parentNode.nodeName.toUpperCase()){var l=this.createCheckbox_(i[r]);c.appendChild(l)}i[r].insertBefore(c,o)}}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}}},Qt.register({constructor:bs,classAsString:"MaterialDataTable",cssClass:"mdl-js-data-table"});
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Cs=function(e){this.element_=e,this.init()};window["MaterialRipple"]=Cs,Cs.prototype.Constant_={INITIAL_SCALE:"scale(0.0001, 0.0001)",INITIAL_SIZE:"1px",INITIAL_OPACITY:"0.4",FINAL_OPACITY:"0",FINAL_SCALE:""},Cs.prototype.CssClasses_={RIPPLE_CENTER:"mdl-ripple--center",RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_ANIMATING:"is-animating",IS_VISIBLE:"is-visible"},Cs.prototype.downHandler_=function(e){if(!this.rippleElement_.style.width&&!this.rippleElement_.style.height){var t=this.element_.getBoundingClientRect();this.boundHeight=t.height,this.boundWidth=t.width,this.rippleSize_=2*Math.sqrt(t.width*t.width+t.height*t.height)+2,this.rippleElement_.style.width=this.rippleSize_+"px",this.rippleElement_.style.height=this.rippleSize_+"px"}if(this.rippleElement_.classList.add(this.CssClasses_.IS_VISIBLE),"mousedown"===e.type&&this.ignoringMouseDown_)this.ignoringMouseDown_=!1;else{"touchstart"===e.type&&(this.ignoringMouseDown_=!0);var s=this.getFrameCount();if(s>0)return;this.setFrameCount(1);var i,n,a=e.currentTarget.getBoundingClientRect();if(0===e.clientX&&0===e.clientY)i=Math.round(a.width/2),n=Math.round(a.height/2);else{var r=void 0!==e.clientX?e.clientX:e.touches[0].clientX,o=void 0!==e.clientY?e.clientY:e.touches[0].clientY;i=Math.round(r-a.left),n=Math.round(o-a.top)}this.setRippleXY(i,n),this.setRippleStyles(!0),window.requestAnimationFrame(this.animFrameHandler.bind(this))}},Cs.prototype.upHandler_=function(e){e&&2!==e.detail&&window.setTimeout(function(){this.rippleElement_.classList.remove(this.CssClasses_.IS_VISIBLE)}.bind(this),0)},Cs.prototype.init=function(){if(this.element_){var e=this.element_.classList.contains(this.CssClasses_.RIPPLE_CENTER);this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT_IGNORE_EVENTS)||(this.rippleElement_=this.element_.querySelector("."+this.CssClasses_.RIPPLE),this.frameCount_=0,this.rippleSize_=0,this.x_=0,this.y_=0,this.ignoringMouseDown_=!1,this.boundDownHandler=this.downHandler_.bind(this),this.element_.addEventListener("mousedown",this.boundDownHandler),this.element_.addEventListener("touchstart",this.boundDownHandler),this.boundUpHandler=this.upHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundUpHandler),this.element_.addEventListener("mouseleave",this.boundUpHandler),this.element_.addEventListener("touchend",this.boundUpHandler),this.element_.addEventListener("blur",this.boundUpHandler),this.getFrameCount=function(){return this.frameCount_},this.setFrameCount=function(e){this.frameCount_=e},this.getRippleElement=function(){return this.rippleElement_},this.setRippleXY=function(e,t){this.x_=e,this.y_=t},this.setRippleStyles=function(t){if(null!==this.rippleElement_){var s,i,n="translate("+this.x_+"px, "+this.y_+"px)";t?(i=this.Constant_.INITIAL_SCALE,this.Constant_.INITIAL_SIZE):(i=this.Constant_.FINAL_SCALE,this.rippleSize_+"px",e&&(n="translate("+this.boundWidth/2+"px, "+this.boundHeight/2+"px)")),s="translate(-50%, -50%) "+n+i,this.rippleElement_.style.webkitTransform=s,this.rippleElement_.style.msTransform=s,this.rippleElement_.style.transform=s,t?this.rippleElement_.classList.remove(this.CssClasses_.IS_ANIMATING):this.rippleElement_.classList.add(this.CssClasses_.IS_ANIMATING)}},this.animFrameHandler=function(){this.frameCount_-- >0?window.requestAnimationFrame(this.animFrameHandler.bind(this)):this.setRippleStyles(!1)})}},Qt.register({constructor:Cs,classAsString:"MaterialRipple",cssClass:"mdl-js-ripple-effect",widget:!1});var ys={name:"BlacklistItem",props:["blacklistData"],data:function(){return{id:this.blacklistData.device_id,phone_number:this.blacklistData.phone_number,phrase:this.blacklistData.phrase,menu:null}},mounted:function(){var e=this.$el.querySelector("#blacklist-menu");Qt.upgradeElement(e),this.menu=e.MaterialMenu},methods:{deleteBlacklist:function(){Mn.snackbar("Deleted blacklist: "+(this.phone_number||this.phrase)),sa.blacklist.delete(this.id),E.state.msgbus.$emit("refresh-btn")}}},Es=ys,As=(s("f677"),Object(B["a"])(Es,Jt,Yt,!1,null,"58e1b565",null)),ks=As.exports,ws={name:"Blacklists",components:{BlacklistItem:ks,Spinner:F},data:function(){return{title:"",loading:!0,blacklists:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchBlacklists();var e={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",e)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchBlacklists:function(){var e=this;sa.blacklist.get().then((function(t){return e.processBlacklists(t)}))},processBlacklists:function(e){for(var t=[],s=0;s<e.length;s++){var i=e[s];i.hash=mt()(i),t.push(i)}this.blacklists=t,this.loading=!1,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.loading=!0,this.fetchBlacklists()},createBlacklist:function(){this.$router.push({name:"create-blacklist"})}}},Ss=ws,Ds=(s("ee8f"),Object(B["a"])(Ss,Vt,Wt,!1,null,"3ea6b33a",null)),xs=Ds.exports,Ls=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-card mdl-shadow--6dp",attrs:{id:"create-blacklist-phone-pane"}},[s("div",{staticClass:"mdl-card__title"},[s("h2",{staticClass:"mdl-card__title-text"},[e._v(" "+e._s(e.$t("blacklist.create_phone"))+" ")])]),s("div",{staticClass:"mdl-card__supporting-text"},[s("form",[s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"mdl-textfield__input",attrs:{id:"phone",autofocus:""},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"phone"}},[e._v(e._s(e.$t("blacklist.phone")))])])])]),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"create-phone"},on:{click:e.createPhone}},[e._v(" "+e._s(e.$t("dialog.create"))+" ")]),s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"cancel"},on:{click:e.cancel}},[e._v(" "+e._s(e.$t("dialog.cancel"))+" ")])]),s("transition",{attrs:{name:"loading-fade"}},[e.loading?s("div",{staticClass:"loading-center"},[s("spinner")],1):e._e()])],1),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-card mdl-shadow--6dp",attrs:{id:"create-blacklist-phrase-pane"}},[s("div",{staticClass:"mdl-card__title"},[s("h2",{staticClass:"mdl-card__title-text"},[e._v(" "+e._s(e.$t("blacklist.create_phrase"))+" ")])]),s("div",{staticClass:"mdl-card__supporting-text"},[s("form",[s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.phrase,expression:"phrase"}],staticClass:"mdl-textfield__input",attrs:{id:"phrase",autofocus:""},domProps:{value:e.phrase},on:{input:function(t){t.target.composing||(e.phrase=t.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"phrase"}},[e._v(e._s(e.$t("blacklist.phrase")))])])])]),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"create-phrase"},on:{click:e.createPhrase}},[e._v(" "+e._s(e.$t("dialog.create"))+" ")]),s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"cancel"},on:{click:e.cancel}},[e._v(" "+e._s(e.$t("dialog.cancel"))+" ")])]),s("transition",{attrs:{name:"loading-fade"}},[e.loading?s("div",{staticClass:"loading-center"},[s("spinner")],1):e._e()])],1)])},Bs=[],Ts={name:"CreateBlacklist",components:{Spinner:F},data:function(){return{title:"",phone:"",phrase:"",loading:!1}},mounted:function(){this.$store.commit("loading",!1),this.$store.commit("title",this.title)},methods:{createPhone:function(){var e=this;""!=this.phone&&(this.loading=!0,sa.blacklist.create.phone(this.phone).then((function(t){return e.handleCreated(t.data)})))},createPhrase:function(){var e=this;""!=this.phrase&&(this.loading=!0,sa.blacklist.create.phrase(this.phrase).then((function(t){return e.handleCreated(t.data)})))},handleCreated:function(){this.loading=!1,this.$router.push({name:"blacklists"})},cancel:function(){this.$router.push({name:"blacklists"})}}},Fs=Ts,Is=(s("2fe0"),Object(B["a"])(Fs,Ls,Bs,!1,null,"b236bcbc",null)),$s=Is.exports,Ms=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-content",attrs:{id:"scheduled-message-list"}},[0==e.scheduled_messages.length&&e.loading?s("spinner",{staticClass:"spinner"}):e._e(),0!=e.scheduled_messages.length||e.loading?e._e():s("p",{staticClass:"empty-message"},[e._v(" No Scheduled Messages ")]),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},e._l(e.scheduled_messages,(function(e){return s("ScheduledMessageItem",{key:e.hash,tag:"component",attrs:{"message-data":e}})})),1),s("button",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"create-scheduled-message mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored",style:{background:e.$store.state.colors_accent},attrs:{tag:"button"},on:{click:e.createScheduledMessage}},[s("i",{staticClass:"material-icons md-light"},[e._v("add")])])],1)},Os=[],Ns=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-wrapper",attrs:{title:e.stringTime}},[s("div",{staticClass:"message scheduled shadow",attrs:{id:e.id}},[s("div",[e._v(e._s(e.displayText))])]),s("div",{staticClass:"date-wrapper"},[s("div",{staticClass:"date mdl-color-text--grey-500"},[e._v(" "+e._s(e.timestampText)+" ")])]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--right",attrs:{id:"message-menu","data-mdl-for":e.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:e.editMessage}},[e._v(" Edit Message ")]),s("li",{staticClass:"mdl-menu__item",on:{click:e.deleteMessage}},[e._v(" Delete Message ")])])])},Rs=[],js=(s("14b9"),{name:"ScheduledMessageItem",props:["messageData"],data:function(){return{id:this.messageData.device_id,to:this.messageData.to,data:this.messageData.data,title:this.messageData.title,timestamp:this.messageData.timestamp,mime_type:this.messageData.mime_type,repeat:this.messageData.repeat||0,menu:null}},computed:{displayText:function(){return"text/plain"!=this.mime_type?this.$t("scheduled.media"):this.data},timestampText:function(){var e=new Date(this.timestamp).toLocaleString(),t=this.title;if(0==this.repeat)return"".concat(t," - ").concat(e);var s="";switch(this.repeat){case 1:s=this.$t("scheduled.repeat.daily");break;case 2:s=this.$t("scheduled.repeat.weekly");break;case 3:s=this.$t("scheduled.repeat.monthly");break;case 4:s=this.$t("scheduled.repeat.yearly");break}return"".concat(t," - ").concat(e," (").concat(s,")")}},mounted:function(){var e=this.$el.querySelector("#message-menu");Qt.upgradeElement(e),this.menu=e.MaterialMenu},methods:{deleteMessage:function(){Mn.snackbar("Deleted Message to "+this.title),sa.scheduledMessages.delete(this.id),E.state.msgbus.$emit("refresh-btn")},editMessage:function(){this.$router.push({name:"edit-scheduled-message",params:{messageId:this.id,originalTo:this.to,originalTitle:this.title,originalData:this.data,originalTimestamp:this.timestamp,originalRepeat:this.repeat}})}}}),Ps=js,Hs=(s("f7d4"),Object(B["a"])(Ps,Ns,Rs,!1,null,"2fdaa8f7",null)),Us=Hs.exports,qs={name:"ScheduledMessages",components:{ScheduledMessageItem:Us,Spinner:F},data:function(){return{title:"",loading:!0,scheduled_messages:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchScheduledMessages();var e={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",e)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchScheduledMessages:function(){var e=this;sa.scheduledMessages.get().then((function(t){return e.processScheduledMessages(t)}))},processScheduledMessages:function(e){for(var t=[],s=0;s<e.length;s++){var i=e[s];i.hash=mt()(i),t.push(i)}this.scheduled_messages=t,this.loading=!1,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.loading=!0,this.fetchScheduledMessages()},createScheduledMessage:function(){this.$router.push({name:"create-scheduled-message"})}}},zs=qs,Gs=(s("7e29"),Object(B["a"])(zs,Ms,Os,!1,null,"65df36a8",null)),Ks=Gs.exports,Vs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-card mdl-shadow--6dp",attrs:{id:"create-scheduled-pane"}},[e._m(0),s("div",{staticClass:"mdl-card__supporting-text"},[s("ContactEntryBar",{attrs:{"on-contact-list-changed":e.onContactListChanged}}),s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"mdl-textfield__input",attrs:{id:"message"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"message"}},[e._v("Message text...")])]),e._v(" Time: "),s("flat-pickr",{staticClass:"time-picker",attrs:{config:e.config,placeholder:"Select a date"},model:{value:e.timestamp,callback:function(t){e.timestamp=t},expression:"timestamp"}}),s("select",{directives:[{name:"model",rawName:"v-model",value:e.repeat,expression:"repeat"}],staticClass:"repeat",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.repeat=t.target.multiple?s:s[0]}}},e._l(e.repeatOptions,(function(t){return s("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(t.text)+" ")])})),0)],1),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"create"},on:{click:e.create}},[e._v(" Create ")]),s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"cancel"},on:{click:e.cancel}},[e._v(" Cancel ")])]),s("transition",{attrs:{name:"loading-fade"}},[e.loading?s("div",{staticClass:"loading-center"},[s("spinner")],1):e._e()])],1)},Ws=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mdl-card__title"},[s("h2",{staticClass:"mdl-card__title-text"},[e._v(" Create Scheduled Message ")])])}],Js=(s("0952"),s("c38f")),Ys=s.n(Js),Xs={name:"CreateScheduledMessage",components:{Spinner:F,FlatPickr:Ys.a,ContactEntryBar:it},data:function(){return{to:"",title:"",message:"",loading:!1,timestamp:Date.now(),config:{enableTime:!0,defaultDate:Math.floor(Date.now())},repeat:"0",repeatOptions:[{text:this.$t("scheduled.repeat.never"),value:"0"},{text:this.$t("scheduled.repeat.daily"),value:"1"},{text:this.$t("scheduled.repeat.weekly"),value:"2"},{text:this.$t("scheduled.repeat.monthly"),value:"3"},{text:this.$t("scheduled.repeat.yearly"),value:"4"}]}},mounted:function(){this.$store.commit("loading",!1),this.$store.commit("title","")},methods:{onContactListChanged:function(e){var t=this;this.to="",this.title="",e.forEach((function(s,i){i==e.length-1?(t.to+=s.phone,s.name?t.title+=s.name:t.title+=s.phone):(t.to+=s.phone+", ",s.name?t.title+=s.name+", ":t.title+=s.phone+", ")}))},create:function(){var e=this;""!=this.to?""!=this.message?(this.loading=!0,sa.scheduledMessages.create(this.to,this.message,Math.floor(new Date(this.timestamp)),this.title,this.repeat).then((function(t){return e.handleCreated(t.data)}))):Mn.snackbar("Please input a message!"):Mn.snackbar("Please input a contact!")},handleCreated:function(){this.loading=!1,this.$router.push({name:"scheduled-messages"})},cancel:function(){this.$router.push({name:"scheduled-messages"})}}},Qs=Xs,Zs=(s("59c8"),Object(B["a"])(Qs,Vs,Ws,!1,null,"6ad328ba",null)),ei=Zs.exports,ti=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-card mdl-shadow--6dp",attrs:{id:"edit-scheduled-pane"}},[e._m(0),s("div",{staticClass:"mdl-card__supporting-text"},[s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"mdl-textfield__input",attrs:{id:"message",autofocus:""},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),s("label",{staticClass:"mdl-textfield__label",attrs:{for:"message"}},[e._v("Message text...")])]),e._v(" Time: "),s("flat-pickr",{staticClass:"time-picker",attrs:{config:e.config,placeholder:"Select a date"},model:{value:e.timestamp,callback:function(t){e.timestamp=t},expression:"timestamp"}}),s("select",{directives:[{name:"model",rawName:"v-model",value:e.repeat,expression:"repeat"}],staticClass:"repeat",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.repeat=t.target.multiple?s:s[0]}}},e._l(e.repeatOptions,(function(t){return s("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(t.text)+" ")])})),0)],1),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"create"},on:{click:e.save}},[e._v(" Save ")]),s("button",{staticClass:"mdl-button mdl-js-button mdl-js-ripple-effect",attrs:{id:"cancel"},on:{click:e.cancel}},[e._v(" Cancel ")])]),s("transition",{attrs:{name:"loading-fade"}},[e.loading?s("div",{staticClass:"loading-center"},[s("spinner")],1):e._e()])],1)},si=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mdl-card__title"},[s("h2",{staticClass:"mdl-card__title-text"},[e._v(" Edit Scheduled Message ")])])}],ii={name:"EditScheduledMessage",components:{Spinner:F,FlatPickr:Ys.a},props:["messageId","originalData","originalTimestamp","originalTo","originalTitle","originalRepeat"],data:function(){return{loading:!1,timestamp:this.originalTimestamp,message:this.originalData,to:this.originalTo,title:this.originalTitle,config:{enableTime:!0,defaultDate:Math.floor(Date.now())},repeat:this.originalRepeat,repeatOptions:[{text:this.$t("scheduled.repeat.never"),value:"0"},{text:this.$t("scheduled.repeat.daily"),value:"1"},{text:this.$t("scheduled.repeat.weekly"),value:"2"},{text:this.$t("scheduled.repeat.monthly"),value:"3"},{text:this.$t("scheduled.repeat.yearly"),value:"4"}]}},mounted:function(){this.$store.commit("loading",!1),this.$store.commit("title","")},methods:{save:function(){var e=this;""!=this.to&&""!=this.message&&(this.loading=!0,sa.scheduledMessages.delete(this.messageId),sa.scheduledMessages.create(this.to,this.message,Math.floor(new Date(this.timestamp)),this.title,this.repeat).then((function(t){return e.handleSave(t.data)})))},handleSave:function(){this.loading=!1,this.$router.push({name:"scheduled-messages"})},cancel:function(){this.$router.push({name:"scheduled-messages"})}}},ni=ii,ai=(s("e20c"),Object(B["a"])(ni,ti,si,!1,null,"f96e5412",null)),ri=ai.exports,oi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"account"}},[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"page-content",attrs:{id:"account-list"}},[e.showSubscriptionUpgrade?s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" "+e._s(e.$t("account.upgrade_subscription"))+" ")]):e._e(),s("h4",[e._v("Account Statistics")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(t){return e.routeTo("statistics")}}},[e._v(" View Account Statistics ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"item"},[e._v(" "+e._s(e.account_counts.message_count)+" Messages ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"item"},[e._v(" "+e._s(e.account_counts.conversation_count)+" Conversations ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"item"},[e._v(" "+e._s(e.account_counts.scheduled_count)+" Scheduled Messages ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"item"},[e._v(" "+e._s(e.account_counts.blacklist_count)+" Blacklisted Numbers ")]),s("h4",[e._v("Account Management")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(t){return e.routeTo("password")}}},[e._v(" Update Email or Password ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(t){return e.routeTo("devices")}}},[e._v(" "+e._s(e.account_counts.device_count)+" Devices ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(t){return e.routeTo("drafts")}}},[e._v(" "+e._s(e.account_counts.draft_count)+" Drafts ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(t){return e.routeTo("contacts")}}},[e._v(" "+e._s(e.account_counts.contact_count)+" Contacts ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(t){return e.routeTo("templates")}}},[e._v(" "+e._s(e.account_counts.template_count)+" Templates ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(t){return e.routeTo("auto-replies")}}},[e._v(" "+e._s(e.account_counts.auto_reply_count)+" Auto Replies ")]),s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",on:{click:function(t){return e.routeTo("account-folders")}}},[e._v(" "+e._s(e.account_counts.folder_count)+" Folders ")])])])},ci=[],li={name:"Account",components:{},data:function(){return{title:"My Account",loading:!0,account_counts:{message_count:"",conversation_count:"",scheduled_count:"",blacklist_count:"",device_count:"",draft_count:"",contact_count:"",template_count:"",auto_reply_count:"",folder_count:""}}},computed:{showSubscriptionUpgrade:function(){return 3!=this.$store.state.subscription_type}},mounted:function(){this.fetchAccount(),this.$store.commit("title",this.title),this.$store.state.msgbus.$on("refresh-btn",this.fetchAccount)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.fetchAccount)},methods:{fetchAccount:function(){var e=this;sa.account.get().then((function(t){return e.processAccount(t)}))},processAccount:function(e){this.account_counts=e.data,this.$store.commit("loading",!1)},routeTo:function(e){"password"==e?window.open("https://messenger.klinkerapps.com/forgot_password.html","_blank"):"statistics"==e?window.open("https://messenger.klinkerapps.com/account_statistics.html","_blank"):this.$router.push({name:e})}}},di=li,hi=(s("9796"),Object(B["a"])(di,oi,ci,!1,null,"2748aacd",null)),ui=hi.exports,mi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-content",attrs:{id:"draft-list"}},[0==e.drafts.length?s("spinner",{staticClass:"spinner"}):e._e(),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},e._l(e.drafts,(function(e){return s("DraftItem",{key:e.hash,tag:"component",attrs:{"draft-data":e}})})),1)],1)},pi=[],fi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",on:{click:function(t){return e.menu.toggle()}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v(" "+e._s(e.data)+" ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" Type: "+e._s(e.mime_type)+" ")])]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"draft-menu","data-mdl-for":e.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:e.deleteDraft}},[e._v(" Delete ")])])])},_i=[],vi={name:"DraftItem",props:["draftData"],data:function(){return{id:this.draftData.device_id,conversation_id:this.draftData.device_conversation_id,data:this.draftData.data,mime_type:this.draftData.mime_type,menu:null}},mounted:function(){var e=this.$el.querySelector("#draft-menu");Qt.upgradeElement(e),this.menu=e.MaterialMenu},methods:{deleteDraft:function(){Mn.snackbar("Deleted draft: "+this.data),sa.drafts.delete(this.conversation_id),E.state.msgbus.$emit("refresh-btn")}}},gi=vi,bi=(s("a121"),Object(B["a"])(gi,fi,_i,!1,null,"38d4c907",null)),Ci=bi.exports,yi={name:"Drafts",components:{DraftItem:Ci,Spinner:F},data:function(){return{title:"Drafts",drafts:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchDrafts();var e={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",e)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchDrafts:function(){var e=this;sa.drafts.get().then((function(t){return e.processDrafts(t)}))},processDrafts:function(e){for(var t=[],s=0;s<e.length;s++){var i=e[s];i.hash=mt()(i),t.push(i)}this.drafts=t,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.fetchDrafts()}}},Ei=yi,Ai=(s("6d24"),Object(B["a"])(Ei,mi,pi,!1,null,"36d33e6f",null)),ki=Ai.exports,wi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-content",attrs:{id:"device-list"}},[0==e.devices.length?s("spinner",{staticClass:"spinner"}):e._e(),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},e._l(e.devices,(function(e){return s("DeviceItem",{key:e.hash,tag:"component",attrs:{"device-data":e}})})),1)],1)},Si=[],Di=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",on:{click:function(t){return e.menu.toggle()}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v(" "+e._s(e.name)+" ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" ID: "+e._s(e.id)+" ")])]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"device-menu","data-mdl-for":e.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:e.deleteDevice}},[e._v(" Delete ")])])])},xi=[],Li={name:"DeviceItem",props:["deviceData"],data:function(){return{id:this.deviceData.id,name:this.deviceData.name,menu:null}},mounted:function(){var e=this.$el.querySelector("#device-menu");Qt.upgradeElement(e),this.menu=e.MaterialMenu},methods:{deleteDevice:function(){Mn.snackbar("Deleted device: "+this.name),sa.devices.delete(this.id),E.state.msgbus.$emit("refresh-btn")}}},Bi=Li,Ti=(s("63b7"),Object(B["a"])(Bi,Di,xi,!1,null,"223ba272",null)),Fi=Ti.exports,Ii={name:"Devices",components:{DeviceItem:Fi,Spinner:F},data:function(){return{title:"Devices",devices:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchDevices();var e={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",e)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchDevices:function(){var e=this;sa.devices.get().then((function(t){return e.processDevices(t)}))},processDevices:function(e){for(var t=[],s=0;s<e.length;s++){var i=e[s];i.hash=mt()(i),t.push(i)}this.devices=t,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.fetchDevices()}}},$i=Ii,Mi=(s("7aad"),Object(B["a"])($i,wi,Si,!1,null,"29c3ae15",null)),Oi=Mi.exports,Ni=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-content",attrs:{id:"contact-list"}},[0==e.contacts.length?s("spinner",{staticClass:"spinner"}):e._e(),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},e._l(e.contacts,(function(e){return s("ContactItem",{key:e.hash,tag:"component",attrs:{"contact-data":e}})})),1)],1)},Ri=[],ji=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",on:{click:function(t){return e.menu.toggle()}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v(" "+e._s(e.name)+" ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" Phone Number: "+e._s(e.phone_number)+" ")])]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"contact-menu","data-mdl-for":e.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:e.deleteContact}},[e._v(" Delete ")])])])},Pi=[],Hi={name:"ContactItem",props:["contactData"],data:function(){return{id:this.contactData.id,name:this.contactData.name,phone_number:this.contactData.phone_number,menu:null}},mounted:function(){var e=this.$el.querySelector("#contact-menu");Qt.upgradeElement(e),this.menu=e.MaterialMenu},methods:{deleteContact:function(){Mn.snackbar("Deleted contact: "+this.name),sa.contacts.delete(this.id),E.state.msgbus.$emit("refresh-btn")}}},Ui=Hi,qi=(s("f890"),Object(B["a"])(Ui,ji,Pi,!1,null,"31b40d7f",null)),zi=qi.exports,Gi={name:"Contacts",components:{ContactItem:zi,Spinner:F},data:function(){return{title:"Contacts",contacts:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchContacts();var e={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",e)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchContacts:function(){var e=this;sa.contacts.get().then((function(t){return e.processContacts(t)}))},processContacts:function(e){for(var t=[],s=0;s<e.length;s++){var i=e[s];i.hash=mt()(i),t.push(i)}this.contacts=t,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.fetchContacts()}}},Ki=Gi,Vi=(s("9e3d"),Object(B["a"])(Ki,Ni,Ri,!1,null,"e8fc9c94",null)),Wi=Vi.exports,Ji=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-content",attrs:{id:"template-list"}},[0==e.templates.length?s("spinner",{staticClass:"spinner"}):e._e(),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},e._l(e.templates,(function(e){return s("TemplateItem",{key:e.hash,tag:"component",attrs:{"template-data":e}})})),1)],1)},Yi=[],Xi=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",attrs:{id:e.id},on:{click:function(t){return e.menu.toggle()}}},[e._v(" "+e._s(e.text)+" ")]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"template-menu","data-mdl-for":e.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:e.deleteTemplate}},[e._v(" Delete ")])])])},Qi=[],Zi={name:"TemplateItem",props:["templateData"],data:function(){return{id:this.templateData.device_id,text:this.templateData.text,menu:null}},mounted:function(){var e=this.$el.querySelector("#template-menu");Qt.upgradeElement(e),this.menu=e.MaterialMenu},methods:{deleteTemplate:function(){Mn.snackbar("Deleted template: "+this.text),sa.templates.delete(this.id),E.state.msgbus.$emit("refresh-btn")}}},en=Zi,tn=(s("0b0d"),Object(B["a"])(en,Xi,Qi,!1,null,"7e98eef5",null)),sn=tn.exports,nn={name:"Templates",components:{TemplateItem:sn,Spinner:F},data:function(){return{title:"Templates",templates:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchTemplates();var e={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",e)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchTemplates:function(){var e=this;sa.templates.get().then((function(t){return e.processTemplates(t)}))},processTemplates:function(e){for(var t=[],s=0;s<e.length;s++){var i=e[s];i.hash=mt()(i),t.push(i)}this.templates=t,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.fetchTemplates()}}},an=nn,rn=(s("6e96"),Object(B["a"])(an,Ji,Yi,!1,null,"f94eaa44",null)),on=rn.exports,cn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-content",attrs:{id:"auto-reply-list"}},[0==e.replies.length?s("spinner",{staticClass:"spinner"}):e._e(),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},e._l(e.replies,(function(e){return s("AutoReplyItem",{key:e.hash,tag:"component",attrs:{"reply-data":e}})})),1)],1)},ln=[],dn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"click-item mdl-js-button mdl-js-ripple-effect",on:{click:function(t){return e.menu.toggle()}}},[s("div",{staticClass:"mdl-color-text--grey-900"},[e._v(" "+e._s(e.response)+" ")]),s("div",{staticClass:"mdl-color-text--grey-600"},[e._v(" Type: "+e._s(e.reply_type)+" ")])]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"reply-menu","data-mdl-for":e.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:e.deleteReply}},[e._v(" Delete ")])])])},hn=[],un={name:"AutoReplyItem",props:["replyData"],data:function(){return{id:this.replyData.device_id,response:this.replyData.response,reply_type:this.replyData.reply_type,menu:null}},mounted:function(){var e=this.$el.querySelector("#reply-menu");Qt.upgradeElement(e),this.menu=e.MaterialMenu},methods:{deleteReply:function(){Mn.snackbar("Deleted auto reply: "+this.response),sa.autoReplies.delete(this.id),E.state.msgbus.$emit("refresh-btn")}}},mn=un,pn=(s("0489"),Object(B["a"])(mn,dn,hn,!1,null,"a5bb438e",null)),fn=pn.exports,_n={name:"AutoReplies",components:{AutoReplyItem:fn,Spinner:F},data:function(){return{title:"Auto Replies",replies:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchAutoReplies();var e={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",e)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchAutoReplies:function(){var e=this;sa.autoReplies.get().then((function(t){return e.processAutoReplies(t)}))},processAutoReplies:function(e){for(var t=[],s=0;s<e.length;s++){var i=e[s];i.hash=mt()(i),t.push(i)}this.replies=t,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.fetchAutoReplies()}}},vn=_n,gn=(s("ab2a"),Object(B["a"])(vn,cn,ln,!1,null,"a9e45844",null)),bn=gn.exports,Cn=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-content",attrs:{id:"folder-list"}},[0==e.folders.length?s("spinner",{staticClass:"spinner"}):e._e(),s("transition-group",{attrs:{name:"flip-list",tag:"div"}},e._l(e.folders,(function(e){return s("FolderItem",{key:e.hash,tag:"component",attrs:{"folder-data":e}})})),1)],1)},yn=[],En=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"click-item",attrs:{id:e.id},on:{click:function(t){return e.menu.toggle()}}},[e._v(" "+e._s(e.name)+" ")]),s("ul",{staticClass:"mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--unaligned",attrs:{id:"folder-menu","data-mdl-for":e.id}},[s("li",{staticClass:"mdl-menu__item",on:{click:e.deleteFolder}},[e._v(" Delete ")])])])},An=[],kn={name:"FolderItem",props:["folderData"],data:function(){return{id:this.folderData.device_id,name:this.folderData.name,menu:null}},mounted:function(){var e=this.$el.querySelector("#folder-menu");Qt.upgradeElement(e),this.menu=e.MaterialMenu},methods:{deleteFolder:function(){Mn.snackbar("Deleted folder: "+this.name),sa.folders.delete(this.id),E.state.msgbus.$emit("refresh-btn")}}},wn=kn,Sn=(s("bc79"),Object(B["a"])(wn,En,An,!1,null,"473dbb3e",null)),Dn=Sn.exports,xn={name:"Folders",components:{FolderItem:Dn,Spinner:F},data:function(){return{title:"Folders",folders:[]}},mounted:function(){this.$store.state.msgbus.$on("refresh-btn",this.refresh),this.fetchFolders();var e={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};this.$store.commit("colors",e)},beforeDestroy:function(){this.$store.state.msgbus.$off("refresh-btn",this.refresh)},methods:{fetchFolders:function(){var e=this;sa.folders.get().then((function(t){return e.processFolders(t)}))},processFolders:function(e){for(var t=[],s=0;s<e.length;s++){var i=e[s];i.hash=mt()(i),t.push(i)}this.folders=t,this.$store.commit("loading",!1),this.$store.commit("title",this.title)},refresh:function(){this.fetchFolders()}}},Ln=xn,Bn=(s("dbd8"),Object(B["a"])(Ln,Cn,yn,!1,null,"33795290",null)),Tn=Bn.exports;i["default"].use(A["a"]);var Fn=new A["a"]({mode:"history",routes:[{path:"/",name:"conversations-list",component:It,props:{index:"index_public_unarchived",small:!1}},{path:"/archived",name:"conversations-list-archived",component:It,props:{index:"index_archived",small:!1}},{path:"/unread",name:"conversations-list-unread",component:It,props:{index:"index_public_unread",small:!1}},{path:"/private",name:"conversations-list-private",component:It,props:{index:"index_private",small:!1}},{path:"/folder/:folderId",name:"conversations-list-folder",component:It,props:!0},{path:"/thread/:threadId",name:"thread",component:We,props:!0},{path:"/thread/:threadId/archived",name:"thread-archived",component:We,props:!0},{path:"/compose",name:"Compose",component:ct},{path:"/login",name:"login",component:R},{path:"/settings",name:"settings",component:G},{path:"/experiments",name:"experiments",component:X},{path:"/thread/:conversationId/settings",name:"conversation-settings",component:ie,props:!0},{path:"/folders",name:"folders",component:Kt},{path:"/blacklists",name:"blacklists",component:xs},{path:"/blacklists/new",name:"create-blacklist",component:$s},{path:"/passcode",name:"passcode",component:le},{path:"/scheduled",name:"scheduled-messages",component:Ks},{path:"/scheduled/new",name:"create-scheduled-message",component:ei},{path:"/scheduled/edit/:messageId",name:"edit-scheduled-message",component:ri,props:!0},{path:"/help_feedback",name:"help-feedback",component:fe},{path:"/account",name:"account",component:ui},{path:"/account/devices",name:"devices",component:Oi},{path:"/account/drafts",name:"drafts",component:ki},{path:"/account/contacts",name:"contacts",component:Wi},{path:"/account/templates",name:"templates",component:on},{path:"/account/autoreply",name:"auto-replies",component:bn},{path:"/account/folders",name:"account-folders",component:Tn}]});Fn.beforeEach((function(e,t,s){return e.name?"login"==e.name?s():""==E.state.account_id?s({name:"login"}):void s():s("/").catch((function(){}))}));var In=sessionStorage.redirect;delete sessionStorage.redirect,In&&In!=location.href&&Fn.replace(In.split(location.host)[1]);var $n=Fn,Mn=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"expandColor",value:function(e){e>>>=0;var t=255&e,s=(65280&e)>>>8,i=(16711680&e)>>>16,n=((4278190080&e)>>>24)/255;return"rgba("+[i,s,t,n].join(",")+")"}},{key:"entityEncode",value:function(e){while(-1!==e.indexOf("<"))e=e.replace("<","&lt;");while(-1!==e.indexOf(">"))e=e.replace(">","&gt;");return e=e.replace(/\n/g,"<br />"),e}},{key:"generateSnippet",value:function(e){if("undefined"!=typeof e.snippet)return e.snippet;var t=e.snippet||e.dataNoEmoji||e.data,s=e.message_type||e.type,i=e.mime_type||"text/plain";return t="text/plain"==i?t:"<i>Picture Message</i>",0!=s&&6!=s&&3!=s&&5!=s&&(t="You: "+t),t}},{key:"generateContact",value:function(e,t,s,i,n,a,r,o,c){return{id:e,name:t,phone_number:s,mute:i,private_notifications:n,colors:{default:a,accent:r,ligher:o,darker:c}}}},{key:"createIdMatcher",value:function(e){var t=e.replace(/\+/g,"").replace(/ /g,"").replace(/-/g,"").replace(/\./g,"").replace(/\(/g,"").replace(/\)/g,"").replace(/,/g,"");return t.length>8?t.substring(t.length-8,t.length):t}},{key:"scrollToBottom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e.isScrolledToBottom())return!1;var s=document.getElementsByTagName("html")[0].clientHeight,i=document.getElementsByTagName("body")[0].clientHeight,n=Math.max(s,i);Object(d["a"])(n,{duration:t,easing:function(e,t,s,i){return(e/=i/2)<1?s/2*e*e*e+t:s/2*((e-=2)*e*e+2)+t}})}},{key:"isScrolledToBottom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null==e&&(e=document.querySelector("html")),e.scrollTop===e.scrollHeight-e.offsetHeight}},{key:"snackbar",value:function(e){var t={};t="string"==typeof e?{message:e}:e;var s=document.querySelector(".mdl-js-snackbar");return"undefined"!=typeof s.attributes["hidden"]&&s.attributes.removeNamedItem("hidden"),s.MaterialSnackbar.showSnackbar(t),s}},{key:"displayImage",value:function(e,t,s){E.state.msgbus.$emit("showImage",{messageId:t,type:s})}},{key:"materialColorChange",value:function(e,t){var s=document.createElement("span"),i=document.createElement("span");s.appendChild(i),s.className="animator",e.insertBefore(s,e.firstChild),i.style.background=t,e.className+=" transition",setTimeout((function(){e.style.background=t,e.style.backgroundColor=t,e.className=e.className.replace(" transition",""),e.removeChild(s)}),1250)}},{key:"addEventListeners",value:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;return e.map((function(e){return s.addEventListener(e,t),{event:e,listener:t,object:s}}))}},{key:"removeEventListeners",value:function(e){return e.map((function(e){e.object.removeEventListener(e.event,e.listener)}))}},{key:"requestNotifications",value:function(){E.state.notifications&&da.needsPermission()&&da.requestPermission().then((function(){})).catch((function(){var t=function(){return $n.push("settings").catch((function(){}))};E.commit("notifications",!1),e.snackbar({message:"Noticiations have been disabled",actionHandler:t,actionText:"Settings"})}))}},{key:"firebaseConfig",value:function(){var e={apiKey:"AIzaSyB0pMWyfvde4mbKO20t23EEGECEb5itD7I",authDomain:"messenger-42616.firebaseapp.com",databaseURL:"https://messenger-42616.firebaseio.com",storageBucket:"messenger-42616.appspot.com"};u.a.initializeApp(e)}},{key:"getTextColorBasedOnBackground",value:function(e){var t=e.replace("rgba(","").replace(")","");t=t.replace("rgb(","").replace(")","");var s=t.split(","),i=this.getSRGB(s[0]),n=this.getSRGB(s[1]),a=this.getSRGB(s[2]),r=.2126*i+.7152*n+.0722*a;return r<.35?"#fff":"#000"}},{key:"getSRGB",value:function(e){return e/=255,e=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),e}},{key:"isDevMode",value:function(){return!1}}]),e}();Array.prototype.extend=function(e){this.push.apply(this,e)},Array.prototype.contains=function(e){return this.indexOf(e)>-1},Array.prototype.containsObjKey=function(e,t){for(var s=0;s<this.length;s++)if(this[s][e]===t)return this[s];return!1};var On=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"setupAes",value:function(){var e=E.state.account_id+":"+E.state.hash+"\n",t=I["a"].misc.pbkdf2(e,E.state.salt,1e4,256,$);E.commit("key",t),E.commit("aes",new I["a"].cipher.aes(t)),I["a"].beware["CBC mode is dangerous because it doesn't protect message integrity."]()}},{key:"decryptConversation",value:function(t){t.timestamp=t.timestamp/1e3>>0,t.timestamp=1e3*t.timestamp;try{t.titleNoEmoji=e.decrypt(t.title),t.title=t.titleNoEmoji,t.snippetNoEmoji=e.decrypt(t.snippet).replace(/\n/g," "),t.snippetNoEmoji=t.snippetNoEmoji.replace("<i>","").replace("</i>",""),t.snippet=xt.a.toImage(Mn.entityEncode(t.snippetNoEmoji))}catch(s){return null}try{t.phone_numbers=e.decrypt(t.phone_numbers)}catch(s){t.phone_numbers=""}return t.color=Mn.expandColor(t.color),t.hash=mt()(t),t}},{key:"decryptMessage",value:function(t){t.timestamp=t.timestamp/1e3>>0,t.timestamp=1e3*t.timestamp;try{t.mime_type=e.decrypt(t.mime_type),t.dataNoEmoji=e.decrypt(t.data),t.mime_type.indexOf("media")>-1?t.data=Mn.entityEncode(t.dataNoEmoji):t.data=xt.a.toImage(Mn.entityEncode(t.dataNoEmoji)),t.message_from=e.decrypt(t.message_from)}catch(s){return null}return"undefined"==typeof t.device_id&&(t.device_id=t.id),"undefined"==typeof t.message_type&&(t.message_type=t.type),t}},{key:"decryptContact",value:function(t){try{t.name=e.decrypt(t.name),t.phone_number=e.decrypt(t.phone_number),t.id_matcher=e.decrypt(t.id_matcher),t.color=Mn.expandColor(t.color),t.color_accent=Mn.expandColor(t.color_accent)}catch(s){return null}return t}},{key:"decryptBlacklist",value:function(t){try{t.phone_number&&(t.phone_number=e.decrypt(t.phone_number)),t.phrase&&(t.phrase=e.decrypt(t.phrase))}catch(s){return null}return t}},{key:"decryptFolder",value:function(t){try{t.name=e.decrypt(t.name)}catch(s){return null}return t}},{key:"decryptScheduledMessage",value:function(t){try{t.title=e.decrypt(t.title),t.to=e.decrypt(t.to),t.data=e.decrypt(t.data),t.mime_type=e.decrypt(t.mime_type)}catch(s){return null}return t}},{key:"decryptDraft",value:function(t){try{t.mime_type=e.decrypt(t.mime_type),t.data=e.decrypt(t.data)}catch(s){return null}return t}},{key:"decryptTemplate",value:function(t){try{t.text=e.decrypt(t.text)}catch(s){return null}return t}},{key:"decryptAutoReply",value:function(t){try{t.response=e.decrypt(t.response)}catch(s){return null}return t}},{key:"decrypt",value:function(e){if(null==e)return"";var t=e.split("-:-");return I["a"].codec.utf8String.fromBits(I["a"].mode.cbc.decrypt(E.state.aes,I["a"].codec.base64.toBits(t[1]),I["a"].codec.base64.toBits(t[0]),null))}},{key:"decryptToBase64",value:function(e){if(null==e)return"";var t=e.split("-:-");return I["a"].codec.base64.fromBits(I["a"].mode.cbc.decrypt(E.state.aes,I["a"].codec.base64.toBits(t[1]),I["a"].codec.base64.toBits(t[0]),null))}},{key:"encrypt",value:function(t){var s=I["a"].codec.hex.toBits(e.random128Hex()),i=I["a"].mode.cbc.encrypt(E.state.aes,I["a"].codec.utf8String.toBits(t),s,null);return I["a"].codec.base64.fromBits(s)+"-:-"+I["a"].codec.base64.fromBits(i)}},{key:"encryptData",value:function(t){var s=I["a"].codec.hex.toBits(e.random128Hex()),i=e.toBitArrayCodec(t),n=I["a"].mode.cbc.encrypt(E.state.aes,i,s,null);return I["a"].codec.base64.fromBits(s)+"-:-"+I["a"].codec.base64.fromBits(n)}},{key:"toBitArrayCodec",value:function(e){var t,s=[],i=0;for(t=0;t<e.length;t++)i=i<<8|e[t],3===(3&t)&&(s.push(i),i=0);return 3&t&&s.push(I["a"].bitArray.partial(8*(3&t),i)),s}},{key:"random128Hex",value:function(){function e(){return(65536|65536*Math.random()).toString(16).substr(1)}return e()+e()+e()+e()+e()+e()+e()+e()}}]),e}(),Nn=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"getBaseUrl",value:function(){return"api.messenger.klinkerapps.com/"}},{key:"getApiVersion",value:function(){return"api/v1/"}},{key:"getAccountParam",value:function(){return"?account_id="+E.state.account_id}},{key:"getAccountPayload",value:function(){return{account_id:E.state.account_id}}},{key:"get",value:function(t){var s="https://";return"websocket"==t&&(s="wss://"),s+e.getBaseUrl()+e.getApiVersion()+e.urls[t]}}]),e}();Object(Oe["a"])(Nn,"urls",{login:"accounts/login/",update_setting:"accounts/update_setting",messages:"messages/",remove_message:"messages/remove/",add_message:"messages/add/",new_thread:"messages/forward_to_phone",folders:"folders/",remove_folder:"folders/remove/",conversations:"conversations/",conversation:"conversations/",update_conversation:"conversations/update/",read:"conversations/read/",archive:"conversations/archive/",unarchive:"conversations/unarchive/",delete:"conversations/remove/",dismiss:"accounts/dismissed_notification/",settings:"accounts/settings/",websocket:"stream",media:"media/",contacts:"contacts/simple/",remove_contact:"contacts/remove_ids/",blacklists:"blacklists",remove_blacklist:"blacklists/remove/",create_blacklist:"blacklists/add/",scheduled:"scheduled_messages",remove_scheduled:"scheduled_messages/remove/",create_scheduled:"scheduled_messages/add/",account_stats:"accounts/count",drafts:"drafts",drafts_conversation:"drafts/",create_drafts:"drafts/add/",remove_drafts:"drafts/remove/",replace_drafts:"drafts/replace/",devices:"devices",remove_device:"devices/remove/",templates:"templates",remove_template:"templates/remove/",auto_replies:"auto_replies",remove_auto_reply:"auto_replies/remove/"});var Rn=s("bc3a"),jn=s.n(Rn),Pn=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"login",value:function(e,t){var s=new Promise((function(s,i){var n=Nn.get("login"),a={username:e,password:t};jn.a.post(n,a,{"Content-Type":"application/json"}).then((function(e){return s(e)})).catch((function(e){return i(e)}))}));return s}},{key:"get",value:function(){var e=Nn.get("account_stats")+Nn.getAccountParam(),t=new Promise((function(t,s){jn.a.get(e).then((function(e){return t(e)})).catch((function(e){return s(e)}))}));return t}}]),e}();Object(Oe["a"])(Pn,"settings",{get:function(){var e=Nn.get("settings")+Nn.getAccountParam(),t=new Promise((function(t,s){jn.a.get(e).then((function(e){e=e.data;var s={default:Mn.expandColor(e.color),dark:Mn.expandColor(e.color_dark),accent:Mn.expandColor(e.color_accent)};"rgba(255,255,255,1)"==s.default&&"rgba(255,255,255,1)"==s.dark&&"rgba(255,255,255,1)"==s.accent&&(s.default=E.theme_global_default,s.dark=E.theme_global_dark,s.accent=E.theme_global_default_accent),E.commit("theme_base",e.base_theme),E.commit("theme_use_global",e.use_global_theme),E.commit("theme_apply_appbar_color",e.apply_primary_color_to_toolbar),E.commit("theme_conversation_categories",e.conversation_categories),E.commit("theme_message_timestamp",e.message_timestamp),E.commit("subscription_type",e.subscription_type+""),E.commit("theme_global",s),E.commit("colors",s),t(e)})).catch((function(e){return sa.rejectHandler(e,s)}))}));return t},update:function(e,t,s){var i=Nn.get("update_setting")+"?pref="+e+"&type="+t+"&value="+s;new Promise((function(e,t){jn.a.post(i,Nn.getAccountPayload(),{"Content-Type":"application/json"}).then((function(){return e(!0)})).catch((function(e){return sa.rejectHandler(e,t)}))}))}});var Hn=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"get",value:function(){var e=Nn.get("auto_replies")+Nn.getAccountParam(),t=new Promise((function(t,s){jn.a.get(e).then((function(e){e=e.data;for(var s=0;s<e.length;s++){var i=On.decryptAutoReply(e[s]);null!=i&&(e[s]=i)}t(e)})).catch((function(e){return sa.rejectHandler(e,s)}))}));return t}},{key:"delete",value:function(e){var t=Nn.get("remove_auto_reply")+e+Nn.getAccountParam();jn.a.post(t)}}]),e}(),Un=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"get",value:function(){var e=Nn.get("blacklists")+Nn.getAccountParam(),t=new Promise((function(t,s){jn.a.get(e).then((function(e){e=e.data;for(var s=0;s<e.length;s++){var i=On.decryptBlacklist(e[s]);null!=i&&(e[s]=i)}t(e)})).catch((function(e){return sa.rejectHandler(e,s)}))}));return t}},{key:"delete",value:function(e){var t=Nn.get("remove_blacklist")+e+Nn.getAccountParam();jn.a.post(t)}}]),e}();Object(Oe["a"])(Un,"create",{phone:function(e){var t={account_id:E.state.account_id,device_id:sa.generateId(),phone_number:On.encrypt(e)},s=Nn.get("create_blacklist"),i=new Promise((function(e){jn.a.post(s,t,{"Content-Type":"application/json"}).then((function(t){e(t)}))}));return i},phrase:function(e){var t={account_id:E.state.account_id,device_id:sa.generateId(),phrase:On.encrypt(e)},s=Nn.get("create_blacklist"),i=new Promise((function(e){jn.a.post(s,t,{"Content-Type":"application/json"}).then((function(t){e(t)}))}));return i}});s("55dd");var qn=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"get",value:function(){var e=Nn.get("contacts")+Nn.getAccountParam(),t=new Promise((function(t,s){var i=[];function n(t,r){jn.a.get(e+"&limit="+t+"&offset="+i.length).then((function(e){e=e.data;for(var s=0;s<e.length;s++){var o=On.decryptContact(e[s]);null!=o&&i.push(o)}e.length==t?n(t,r):a(i)})).catch((function(e){return sa.rejectHandler(e,s)}))}function a(e){e.sort((function(e,t){var s=e.name.toUpperCase(),i=t.name.toUpperCase();return s<i?-1:s>i?1:0})),ha.putContacts(e),t(e)}ha.hasContacts()?t(ha.getContacts()):n(300,3e3)}));return t}},{key:"delete",value:function(e){var t=Nn.get("remove_contact")+e+Nn.getAccountParam();jn.a.post(t).catch((function(e){return sa.rejectHandler(e)}))}}]),e}(),zn=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"getList",value:function(e,t){"undefined"==typeof e&&(e="index_public_unarchived"),"folder"==e&&(e=e+"/"+t);var s=Nn.get("conversations")+e+Nn.getAccountParam();"index_public_unarchived"==e&&(s+="&limit=75");var i=new Promise((function(t,i){ha.hasConversations(e)?t(ha.getConversations(e)):jn.a.get(s).then((function(s){if(s=s.data,null!=s){for(var i=0;i<s.length;i++){var n=On.decryptConversation(s[i]);null!=n&&(s[i]=n)}ha.putConversations(s,e)}t(s)})).catch((function(e){return sa.rejectHandler(e,i)}))}));return i}},{key:"getById",value:function(e){var t=Nn.get("conversation")+e+Nn.getAccountParam(),s=new Promise((function(e,s){jn.a.get(t).then((function(t){t=On.decryptConversation(t.data),null!=t&&e(t)})).catch((function(e){return sa.rejectHandler(e,s)}))}));return s}},{key:"update",value:function(e,t){var s=Nn.get("update_conversation")+e;jn.a.post(s,t,{"Content-Type":"application/json"}).catch((function(e){return console.log(e)}))}},{key:"read",value:function(e){var t=Nn.get("read")+e+Nn.getAccountParam();jn.a.post(t).catch((function(e){return sa.rejectHandler(e)})),t=Nn.get("dismiss")+Nn.getAccountParam()+"&id="+e,jn.a.post(t)}},{key:"archive",value:function(e,t){var s;s=t?Nn.get("archive"):Nn.get("unarchive"),s+=e+Nn.getAccountParam(),jn.a.post(s)}},{key:"delete",value:function(e){var t=Nn.get("delete")+e+Nn.getAccountParam();jn.a.post(t)}},{key:"createWithImage",value:function(e,t,s){var i=Nn.get("new_thread"),n={account_id:E.state.account_id,to:e,message:"firebase -1",mime_type:s,message_id:t,sent_device:pa.getPlatformIdentifier()},a=new Promise((function(e,t){jn.a.post(i,n,{"Content-Type":"application/json"}).then((function(t){return e(t)})).catch((function(e){return sa.rejectHandler(e,t)}))}));return a}},{key:"create",value:function(e,t){var s=Nn.get("new_thread"),i={account_id:E.state.account_id,to:e,message:t,sent_device:pa.getPlatformIdentifier()},n=new Promise((function(e,t){jn.a.post(s,i,{"Content-Type":"application/json"}).then((function(t){return e(t)})).catch((function(e){return sa.rejectHandler(e,t)}))}));return n}}]),e}(),Gn=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"get",value:function(){var e=Nn.get("devices")+Nn.getAccountParam(),t=new Promise((function(t,s){jn.a.get(e).then((function(e){t(e.data)})).catch((function(e){return sa.rejectHandler(e,s)}))}));return t}},{key:"delete",value:function(e){var t=Nn.get("remove_device")+e+Nn.getAccountParam();jn.a.post(t)}}]),e}(),Kn=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"get",value:function(){var e=Nn.get("drafts")+Nn.getAccountParam(),t=new Promise((function(t,s){jn.a.get(e).then((function(e){e=e.data;for(var s=0;s<e.length;s++){var i=On.decryptDraft(e[s]);null!=i&&(e[s]=i)}t(e)})).catch((function(e){return sa.rejectHandler(e,s)}))}));return t}},{key:"getConversationDrafts",value:function(e){var t=Nn.get("drafts_conversation")+e+Nn.getAccountParam(),s=new Promise((function(e,s){jn.a.get(t).then((function(t){t=t.data;for(var s=0;s<t.length;s++){var i=On.decryptDraft(t[s]);null!=i&&(t[s]=i)}e(t)})).catch((function(e){return sa.rejectHandler(e,s)}))}));return s}},{key:"delete",value:function(e){var t=Nn.get("remove_drafts")+e+Nn.getAccountParam();jn.a.post(t)}},{key:"replace",value:function(e,t){var s=Nn.get("replace_drafts")+e+Nn.getAccountParam(),i={drafts:[{device_id:sa.generateId(),device_conversation_id:e,mime_type:On.encrypt("text/plain"),data:On.encrypt(t)}]},n=new Promise((function(e){jn.a.post(s,i,{"Content-Type":"application/json"}).then((function(t){e(t)}))}));return n}},{key:"create",value:function(e,t){var s={drafts:[{device_id:sa.generateId(),device_conversation_id:e,mime_type:On.encrypt("text/plain"),data:On.encrypt(t)}]},i=Nn.get("create_drafts")+Nn.getAccountParam(),n=new Promise((function(e){jn.a.post(i,s,{"Content-Type":"application/json"}).then((function(t){e(t)}))}));return n}}]),e}(),Vn=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"get",value:function(){var e=Nn.get("folders")+Nn.getAccountParam(),t=new Promise((function(t,s){jn.a.get(e).then((function(e){e=e.data;for(var s=0;s<e.length;s++){var i=On.decryptFolder(e[s]);null!=i&&(e[s]=i)}t(e)})).catch((function(e){return sa.rejectHandler(e,s)}))}));return t}},{key:"delete",value:function(e){var t=Nn.get("remove_folder")+e+Nn.getAccountParam();jn.a.post(t)}}]),e}(),Wn=(s("34ef"),s("e9e8")),Jn=s.n(Wn),Yn=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=70,i=Nn.get("messages")+Nn.getAccountParam()+"&conversation_id="+e+"&limit="+s+"&web=true&offset="+t,n=new Promise((function(s,n){!ha.hasMessages(e)||t>0?jn.a.get(i).then((function(i){i=i.data;for(var n=0;n<i.length;n++){var a=On.decryptMessage(i[n]);null!=a&&(i[n]=a)}0==t&&ha.putMessages(i,e),s(i)})).catch((function(e){return sa.rejectHandler(e,n)})):s(ha.getMessages(e))}));return n}},{key:"delete",value:function(e){var t=Nn.get("remove_message")+e+Nn.getAccountParam();jn.a.post(t)}},{key:"send",value:function(e,t,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=E.state.account_id,a=i||sa.generateId(),r="text/plain"==t?"You: "+e:"<i>Picture Message</i>",o=On.encrypt(e),c=On.encrypt(r),l=(new Date).getTime(),d={account_id:n,device_id:a,device_conversation_id:s,message_type:2,data:o,timestamp:l,mime_type:On.encrypt(t),read:!0,seen:!0,sent_device:pa.getPlatformIdentifier()},h={account_id:n,read:!0,timestamp:l,snippet:c},u=Nn.get("add_message");jn.a.post(u,d,{"Content-Type":"application/json"}).catch((function(e){return console.log(e)})),u=Nn.get("update_conversation")+s,jn.a.post(u,h,{"Content-Type":"application/json"}).catch((function(e){return console.log(e)}));var m={device_id:a,conversation_id:s,timestamp:l,mime_type:t,message_type:2,data:xt.a.toImage(Mn.entityEncode(e)),read:!0,snippet:r};E.state.msgbus.$emit("newMessage",m)}}]),e}();Object(Oe["a"])(Yn,"media",{get:function(e){var t=Nn.get("media")+e+Nn.getAccountParam(),s=new Promise((function(e,s){jn.a.get(t).then((function(t){return e(t)})).catch((function(e){return sa.rejectHandler(e,s)}))}));return s},compress:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.type.startsWith("image/")?t<.05&&null!=t?Mn.snackbar("Image too large"):(null==t&&(t=.6),(e.type.startsWith("image/")||"image/gif"===!e.type)&&e.size>1048576?new Jn.a(e,{quality:t,maxWidth:1500,maxHeight:1500,success:function(e){return sa.messages.media.compress(e,.7*t)},error:function(){return null}}):(E.commit("loaded_media",e),void i["default"].nextTick((function(){return Mn.scrollToBottom(250)})))):Mn.snackbar("File type not supported")},send:function(e,t){E.commit("media_sending",!0);var s=new FileReader;s.onload=function(s){var i=On.encryptData(new Uint8Array(s.target.result));i=new TextEncoder("utf-8").encode(i);var n=sa.generateId(),a=E.state.account_id,r=u.a.storage().ref(),o=r.child(a),c=o.child(n+"");c.put(i).then((function(){t(e,n);var s=Nn.get("media")+n+Nn.getAccountParam();jn.a.get(s),E.commit("loaded_media",null),E.commit("media_sending",!1)}))},s.readAsArrayBuffer(e)}});var Xn=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"get",value:function(){var e=Nn.get("scheduled")+Nn.getAccountParam(),t=new Promise((function(t,s){jn.a.get(e).then((function(e){e=e.data;for(var s=0;s<e.length;s++){var i=On.decryptScheduledMessage(e[s]);null!=i&&(e[s]=i)}t(e)})).catch((function(e){return sa.rejectHandler(e,s)}))}));return t}},{key:"delete",value:function(e){var t=Nn.get("remove_scheduled")+e+Nn.getAccountParam();jn.a.post(t)}},{key:"create",value:function(e,t,s,i,n){var a={account_id:E.state.account_id,device_id:sa.generateId(),to:On.encrypt(e),data:On.encrypt(t),mime_type:On.encrypt("text/plain"),title:On.encrypt(0==i.trim().length?e:i.trim()),timestamp:s,repeat:n},r=Nn.get("create_scheduled"),o=new Promise((function(e){jn.a.post(r,a,{"Content-Type":"application/json"}).then((function(t){e(t)}))}));return o}}]),e}(),Qn=s("07e9"),Zn=s.n(Qn),ea=function(){function e(){Object(c["a"])(this,e),this.socket=null,this.open(),this.has_disconnected=!1,this.disconnected_timeout=null}return Object(l["a"])(e,[{key:"open",value:function(){var e=this;this.socket=new Zn.a(Nn.get("websocket")+Nn.getAccountParam()),this.socket.addEventListener("open",(function(){E.state.msgbus.$on("logout-btn",(function(){return e.close()})),e.has_disconnected&&(E.state.msgbus.$emit("refresh-btn"),Mn.snackbar(va.t("api.back"))),null!=e.disconnected_timeout&&(clearTimeout(e.disconnected_timeout),e.disconnected_timeout=null),e.has_disconnected=!1;var t=JSON.stringify({command:"subscribe",identifier:JSON.stringify({channel:"NotificationsChannel"})});e.socket.send(t)})),this.socket.addEventListener("message",(function(t){return e.handleMessage(t)})),this.socket.addEventListener("close",(function(t){t.wasClean||1001==t.code||(e.disconnected_timeout=setTimeout((function(){e.has_disconnected||Mn.snackbar(va.t("api.disconnected")),e.has_disconnected=!0}),5e3))}))}},{key:"close",value:function(){this.socket.close(1e3,"",{keepClosed:!0})}},{key:"handleMessage",value:function(e){if(-1==e.data.indexOf("ping")){var t=JSON.parse(e.data);if("undefined"!=typeof t.message){var s=t.message.operation;if("undefined"!=typeof t.message.content.data&&(t.message.content.data=xt.a.toImage(t.message.content.data)),"added_message"==s){var i=t.message.content;i.message_from=i.from,i=On.decryptMessage(i),this.notify(i),ha.cacheMessage(i),ha.updateConversation(i),E.state.msgbus.$emit("newMessage",i)}else if("removed_message"==s){var n=t.message.content;ha.deleteMessage(n.id),E.state.msgbus.$emit("deletedMessage",n.id)}else if("read_conversation"==s){var a=t.message.content.id;ha.readConversation(a,"index_public_unarchived"),ha.readConversation(a,"index_archived"),E.state.msgbus.$emit("conversationRead",a)}else if("updated_conversation"==s){var r=On.decryptConversation(t.message.content);r.conversation_id=r.id,r.snippet&&(ha.updateConversationSnippet(r.id,r.snippet,"index_public_unarchived"),ha.updateConversationSnippet(r.id,r.snippet,"index_archived"),ha.updateConversationSnippet(r.id,r.snippet,"index_private")),ha.readConversation(r.id,"index_public_unarchived",r.read),ha.readConversation(r.id,"index_archived",r.read),E.state.msgbus.$emit("newMessage",r)}else if("update_message_type"==s){var o=t.message.content.id,c=t.message.content.message_type;ha.updateMessageType(o,c),E.state.msgbus.$emit("updateMessageType-"+o,{message_type:c})}else if("added_conversation"==s){var l=t.message.content.id;ha.invalidateConversations("index_public_unarchived"),E.state.msgbus.$emit("addedConversation",{id:l})}else if("removed_conversation"==s){var d=t.message.content.id;ha.removeConversation(d,"index_public_unarchived"),ha.removeConversation(d,"index_archived"),ha.removeConversation(d,"index_private"),E.state.msgbus.$emit("removedConversation",{id:d})}else if("archive_conversation"==s){var h=t.message.content.id;t.message.content.archive?(ha.removeConversation(h,"index_public_unarchived"),ha.invalidateConversations("index_archived")):(ha.removeConversation(h,"index_archived"),ha.invalidateConversations("index_public_unarchived")),E.state.msgbus.$emit("removedConversation",{id:h})}}}else E.commit("last_ping",Date.now()/1e3>>0)}},{key:"notify",value:function(e){da.needsPermission()&&!E.state.notifications||0==e.type&&pa.isWebsite()&&sa.conversations.getById(e.conversation_id).then((function(t){if(null!=t&&!t.mute){var i=t.title,n=t.private_notifications?"":Mn.generateSnippet(e),a="/thread/"+e.conversation_id,r=da.notify(i,{icon:s("3034"),body:n});r.onclick=function(){window.focus(),$n.push(a).catch((function(){}))}}}))}}]),e}(),ta=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"get",value:function(){var e=Nn.get("templates")+Nn.getAccountParam(),t=new Promise((function(t,s){jn.a.get(e).then((function(e){e=e.data;for(var s=0;s<e.length;s++){var i=On.decryptTemplate(e[s]);null!=i&&(e[s]=i)}t(e)})).catch((function(e){return sa.rejectHandler(e,s)}))}));return t}},{key:"delete",value:function(e){var t=Nn.get("remove_template")+e+Nn.getAccountParam();jn.a.post(t)}}]),e}(),sa=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"generateId",value:function(){var e=1,t=922337203685477;return Math.floor(Math.random()*(t-e+1))+e}},{key:"rejectHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.response&&401==e.response.status?E.state.msgbus.$emit("logout-btn"):t?t(e):void 0}}]),e}();Object(Oe["a"])(sa,"stream",ea),Object(Oe["a"])(sa,"account",Pn),Object(Oe["a"])(sa,"autoReplies",Hn),Object(Oe["a"])(sa,"blacklist",Un),Object(Oe["a"])(sa,"contacts",qn),Object(Oe["a"])(sa,"conversations",zn),Object(Oe["a"])(sa,"devices",Gn),Object(Oe["a"])(sa,"drafts",Kn),Object(Oe["a"])(sa,"folders",Vn),Object(Oe["a"])(sa,"messages",Yn),Object(Oe["a"])(sa,"scheduledMessages",Xn),Object(Oe["a"])(sa,"templates",ta);var ia=s("a1b1"),na=s.n(ia),aa=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,ra=1,oa="mediaFiles",ca="media",la=function(){function e(){var t=this;Object(c["a"])(this,e),this.db=null,this.db_req=aa.open(oa,ra),this.db_req.onerror=function(){console.log("Error creating/accessing IndexedDB database")},this.db_req.onsuccess=function(){if(t.db=t.db_req.result,t.db.onerror=function(){console.log("Error creating/accessing IndexedDB database")},t.db.setVersion&&t.db.version!=ra){var e=t.db.setVersion(ra);e.onsuccess=function(){t.createObjectStore(t.db)}}},this.db_req.onupgradeneeded=function(e){t.createObjectStore(e.target.result)}}return Object(l["a"])(e,[{key:"getMedia",value:function(e){var t=this;return new Promise((function(s){t.getMediaFromStore(e).then((function(e){return s(e)})).catch((function(){t.getMediaFromServer(e).then((function(e){return s(e)})).catch((function(e){return console.log(e)}))}))}))}},{key:"getMediaFromStore",value:function(e){var t=this;return new Promise((function(s,i){var n=t.getTransaction(),a=n.objectStore(ca).get(e);a.onsuccess=function(e){var t=e.target.result;null!=t?s(t):i(null)}}))}},{key:"getMediaFromServer",value:function(e){var t=this;return new Promise((function(s,i){sa.messages.media.get(e).then((function(n){if(console.log("fetching media from web"),n.data.length>1e7)return i(null);var a=n.data;if(!a||null==a)return i(null);var r=t.db,o=t.getTransaction,c=t.storeMedia;function l(t){"done"==t.data.command&&(c(e,t.data.image,o(r)),s(t.data.image),d.removeEventListener("message",l),d.terminate())}var d=new na.a;d.addEventListener("message",l,!1),d.postMessage({imageData:a,key:E.state.key})}))}))}},{key:"storeMedia",value:function(e,t,s){var i=s||this.getTransaction();i.objectStore(ca).put(t,e)}},{key:"getTransaction",value:function(e){var t="undefined"==typeof IDBTransaction.READ_WRITE?"readwrite":IDBTransaction.READ_WRITE;return e?e.transaction([ca],t):this.db.transaction([ca],t)}},{key:"createObjectStore",value:function(e){e.createObjectStore(ca)}}]),e}(),da=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"getNotification",value:function(){var e=window.Notification;return e||{}}},{key:"needsPermission",value:function(){var t=e.getNotification();return!t||!t.permission||"granted"!==t.permission}},{key:"requestPermission",value:function(){return new Promise((function(t,s){return e.needsPermission()?e.getNotification().requestPermission().then((function(e){return"granted"===e?t():"denied"===e?s():void 0})):t()}))}},{key:"notify",value:function(t,s){var i=e.getNotification();return new i(t,s)}}]),e}(),ha=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"getAllConversations",value:function(){return E.state.session_conversations}},{key:"getConversations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"index_public_unarchived";return e.getAllConversations()[t]}},{key:"getConversation",value:function(t){var s=e.getConversations("index_public_unarchived");if(null!=s)for(var i=0;i<s.length;i++)if(s[i].device_id==t)return s[i];if(s=e.getConversations("index_archived"),null!=s)for(var n=0;n<s.length;n++)if(s[n].device_id==t)return s[n];if(s=e.getConversations("index_private"),null!=s)for(var a=0;a<s.length;a++)if(s[a].device_id==t)return s[a];return null}},{key:"getAllMessages",value:function(){return E.state.session_messages}},{key:"getMessages",value:function(t){return e.getAllMessages()[t]}},{key:"getContacts",value:function(){return E.state.compose_contacts}},{key:"putConversations",value:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"index_public_unarchived";if("index_public_unread"!=s){var i=e.getAllConversations();i[s]=JSON.parse(JSON.stringify(t)),E.commit("session_conversations",i)}}},{key:"putMessages",value:function(t,s){var i=e.getAllMessages();i[s]=JSON.parse(JSON.stringify(t)),E.commit("session_messages",i)}},{key:"putContacts",value:function(e){try{E.commit("compose_contacts",e)}catch(t){}}},{key:"hasConversations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"index_public_unarchived";return null!=e.getConversations(t)}},{key:"hasMessages",value:function(t){var s=e.getConversation(t),i=e.getMessages(t);return null!=s&&null!=i&&0!=i.length&&i[0].timestamp>=s.timestamp-2e3}},{key:"hasContacts",value:function(){return e.getContacts().length>0}},{key:"invalidateConversations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"index_public_unarchived";e.putConversations(null,t)}},{key:"invalidateMessages",value:function(t){e.putMessages(null,t)}},{key:"invalidateAllConversations",value:function(){E.commit("session_conversations",{})}},{key:"invalidateAllMessages",value:function(){E.commit("session_messages",{})}},{key:"invalidateContacts",value:function(){E.commit("compose_contacts",{})}},{key:"removeConversation",value:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"index_public_unarchived";if(e.hasConversations(s)){for(var i=e.getConversations(s),n=0;n<i.length;n++)if(i[n].device_id==t){i.splice(n,1);break}e.putConversations(i,s)}}},{key:"readConversation",value:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"index_public_unarchived",i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.hasConversations(s)){for(var n=e.getConversations(s),a=0;a<n.length;a++)if(n[a].device_id==t){n[a].read=i;break}e.putConversations(n,s)}}},{key:"updateConversationSnippet",value:function(t,s){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index_public_unarchived";if(e.hasConversations(i)){for(var n=e.getConversations(i),a=0;a<n.length;a++)if(n[a].device_id==t){n[a].snippet=s;break}e.putConversations(n,i)}}},{key:"updateConversationTitle",value:function(t,s){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index_public_unarchived";if(e.hasConversations(i)){for(var n=e.getConversations(i),a=0;a<n.length;a++)if(n[a].device_id==t){n[a].title=s;break}e.putConversations(n,i)}}},{key:"cacheMessage",value:function(t){if(e.hasMessages(t.conversation_id)){var s=e.getMessages(t.conversation_id);s.unshift(t),e.putMessages(s,t.conversation_id)}}},{key:"deleteMessage",value:function(t){var s=e.getAllMessages();if(null!=s){for(var i in s)if(s.hasOwnProperty(i))for(var n=0;n<s[i].length;n++)if(s[i][n].device_id==t){s[i].splice(n,1);break}E.commit("session_messages",s)}}},{key:"updateMessageType",value:function(t,s){var i=e.getAllMessages();if(null!=i){for(var n in i)if(i.hasOwnProperty(n))for(var a=0;a<i[n].length;a++)if(i[n][a].device_id==t){i[n][a].message_type=s;break}E.commit("session_messages",i)}}},{key:"updateConversation",value:function(t){var s=e.getConversations("index_public_unarchived");if(null!=s)for(var i=0;i<s.length;i++)if(s[i].device_id==t.conversation_id)return s[i].read=t.read,s[i].timestamp=t.timestamp,s[i].snippet=t.mime_type.indexOf("text")>-1?t.data:"",void this.putConversations(this.resortConversations(s),"index_public_unarchived");if(s=e.getConversations("index_archived"),null!=s)for(var n=0;n<s.length;n++)if(s[n].device_id==t.conversation_id)return s[n].read=t.read,s[n].timestamp=t.timestamp,s[n].snippet=t.mime_type.indexOf("text")>-1?t.data:"",void this.putConversations(this.resortConversations(s),"index_archived");if(s=e.getConversations("index_private"),null!=s)for(var a=0;a<s.length;a++)if(s[a].device_id==t.conversation_id)return s[a].read=t.read,s[a].timestamp=t.timestamp,s[a].snippet=t.mime_type.indexOf("text")>-1?t.data:"",void this.putConversations(this.resortConversations(s),"index_private")}},{key:"resortConversations",value:function(e){for(var t=[],s=[],i=0;i<e.length;i++)e[i].pinned?t.push(e[i]):s.push(e[i]);t.sort(a),s.sort(a);for(var n=0;n<s.length;n++)t.push(s[n]);return t;function a(e,t){return e.timestamp>t.timestamp?-1:e.timestamp<t.timestamp?1:0}}}]),e}(),ua=s("9b6a"),ma=function(){function e(){Object(c["a"])(this,e),this.initializeKeys(),this.performedShortcut=!1}return Object(l["a"])(e,[{key:"initializeKeys",value:function(){var e=this;Object(ua["a"])("control+shift+left,command+shift+left,alt+shift+left,ctrl+shift+left",(function(t){E.commit("hotkey_navigation",!0),e.finish(t,"page to previous conversation",(function(){E.state.msgbus.$emit("hotkey-page-previous")}))})),Object(ua["a"])("control+shift+right,command+shift+right,alt+shift+right,ctrl+shift+right",(function(t){E.commit("hotkey_navigation",!0),e.finish(t,"page to next conversation",(function(){E.state.msgbus.$emit("hotkey-page-next")}))})),Object(ua["a"])("control+backspace,command+backspace,alt+backspace,ctrl+backspace",(function(t){e.finish(t,"back to conversation list",(function(){$n.push("/")}))})),Object(ua["a"])("control+n,alt+n,ctrl+n",(function(t){e.finish(t,"open compose page",(function(){$n.push("/compose")}))})),Object(ua["a"])("control+shift+s,command+shift+s,alt+shift+s,ctrl+shift+s",(function(t){e.finish(t,"open search bar",(function(){E.state.msgbus.$emit("search-btn")}))})),Object(ua["a"])("control+e,command+e,alt+e,ctrl+e",(function(t){e.finish(t,"opened the emoji input",(function(){E.state.msgbus.$emit("hotkey-emoji")}))})),Object(ua["a"])("esc",(function(t){e.finish(t,"exiting image",(function(){E.state.msgbus.$emit("hotkey-esc")}))})),Object(ua["a"])("control+shift+w,command+shift+w,alt+shift+w,ctrl+shift+w",(function(t){E.commit("hotkey_navigation",!0),e.finish(t,"archive and advance",(function(){E.state.msgbus.$emit("hotkey-archive-and-advance")}))}))}},{key:"finish",value:function(e,t,s){if(!this.performedShortcut){console.log(t),s(),this.performedShortcut=!0;var i=this;setTimeout((function(){i.performedShortcut=!1}),300),e.preventDefault(),e.stopPropagation()}}}]),e}(),pa=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"isNativeDesktop",value:function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("electron")>0&&e.indexOf("pulse-sms")>0}},{key:"isChromeExtension",value:function(){return window.chrome&&window.chrome.runtime&&void 0!==window.chrome.runtime.id}},{key:"isChromeApp",value:function(){return navigator.userAgent.toLowerCase().indexOf("chrome-app")>0}},{key:"isWebsite",value:function(){return!e.isChromeExtension()&&!e.isChromeApp()&&!e.isNativeDesktop()}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"getPlatformIdentifier",value:function(){return e.isChromeExtension()?1:e.isChromeApp()?2:e.isNativeDesktop()?3:0}}]),e}(),fa=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,null,[{key:"second",value:function(){return 1e3}},{key:"minute",value:function(){return 60*e.second()}},{key:"hour",value:function(){return 60*e.minute()}},{key:"day",value:function(){return 24*e.hour()}},{key:"year",value:function(){return 365*e.day()}},{key:"formatTimestamp",value:function(t,s){var i=new Date(t);if(t>s-2*e.minute())return"Now";if(e.isToday(t)){var n={second:void 0,hour:"numeric",minute:"numeric"};return i.toLocaleTimeString(void 0,n)}if(t>s-7*e.day()){var a={second:void 0,hour:"numeric",minute:"numeric",weekday:"short"};return i.toLocaleTimeString(void 0,a)}if(t>s-1*e.year()){var r={month:"short",day:"numeric",second:void 0,hour:"numeric",minute:"numeric"};return i.toLocaleDateString(void 0,r)}return e.fullTimestamp(i)}},{key:"formatConversationTimestamp",value:function(t,s){var i=new Date(t);if(e.isToday(t)){var n={second:void 0,hour:"numeric",minute:"numeric"};return i.toLocaleTimeString(void 0,n)}if(t>s-7*e.day()){var a={second:void 0,hour:"numeric",minute:"numeric",weekday:"short"};return i.toLocaleTimeString(void 0,a)}if(t>s-1*e.year()){var r={month:"short",day:"numeric",second:void 0,hour:"numeric",minute:"numeric"};return i.toLocaleDateString(void 0,r)}return e.fullTimestamp(i)}},{key:"fullTimestamp",value:function(e){var t={year:"numeric",month:"short",day:"numeric",second:void 0,hour:"numeric",minute:"numeric"};return e.toLocaleDateString(void 0,t)}},{key:"isToday",value:function(t){var s=new Date;e.zeroDate(s);var i=new Date(t);return e.zeroDate(i),s.getTime()==i.getTime()}},{key:"isYesterday",value:function(t){var s=new Date;e.zeroDate(s),s=new Date(s.getTime()-864e5);var i=new Date(t);return e.zeroDate(i),s.getTime()==i.getTime()}},{key:"isLastWeek",value:function(t){var s=new Date;return e.zeroDate(s),s=new Date(s.getTime()-6048e5),t>s.getTime()&&t<(new Date).getTime()}},{key:"isLastMonth",value:function(e){return(new Date).getMonth()==new Date(e).getMonth()}},{key:"zeroDate",value:function(e){e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}}]),e}(),_a=s("a925");i["default"].use(_a["a"]);var va=new _a["a"]({locale:navigator.language.slice(0,2),fallbackLocale:"en",messages:{en:{login:{first:'First, <a href="https://messenger.klinkerapps.com/overview/signup.html" target="_blank">sign up</a> for an account from the <b>Text from any device</b> option in the navigation drawer of the phone app.',error:"Email or Password incorrect",email:"Email Address",password:"Password",forgotpassword:"Forgot your password?",iphone:"Have an <i>iPhone</i>?",login:"Log in"},sidebar:{conversations:"Conversations",unreadconversations:"Unread Conversations",privateconversations:"Private Conversations",archive:"Archive",folders:"Folders",scheduled:"Scheduled Messages",blacklist:"Blacklist",searchconversations:"Search Conversations"},api:{disconnected:"You've been disconnected. We're trying to reconnect you...",back:"And we're back !"},conversations:{pinned:"Pinned",today:"Today",yesterday:"Yesterday",thisweek:"This Week",thismonth:"This Month",older:"Older",noconv:"No Conversations",deleteconfirm:"Are you sure you want to delete these conversations?"},passcode:{enter:"Enter Passcode",passcode:"Passcode"},dialog:{continue:"Continue",cancel:"Cancel",save:"Save",close:"Close",create:"Create",delete:"Delete"},sendbar:{type:"Type message..."},thread:{settings:{updatecolors:"Update Theme Colors",pin:"Pin Conversation",mute:"Mute Conversation",private:"Private Conversation",conversationtitle:"Conversation Title",updatetitle:"Update Conversation Title"},delete:{delete:"Delete",cancel:"Cancel",thread:"Are you sure that you want to delete this conversation?",message:"Are you sure that you want to delete this message?"},blacklisted:"Contact blacklisted and moved to the archive.",groupblacklisted:"Cannot blacklist group conversations.",newmessage:"New Message",show:"Show"},menus:{account:"My Account",settings:"Settings",help:"Help and Feedback",logout:"Logout",convinfo:"Conversation Information",blacklist:"Blacklist Contact",delete:"Delete Conversation",archive:"Archive Conversation",unarchive:"Move to Inbox",deleteselected:"Delete Conversations",archiveselected:"Archive Conversations",unarchiveselected:"Move Conversations to Inbox",selectall:"Select All Conversations",convsettings:"Conversation Settings"},compose:{norecipient:"No Recipient",type:"Search contacts or enter phone numbers (separated by a semicolon)...",cantfind:"Can't find your contact?",alreadyadded:"{name} has already been added",downloading:"Downloading contacts..."},contact:{group:"Group",mobile:"Mobile",home:"Home",work:"Work",other:"Other"},blacklist:{none:"No Blacklisted Numbers",phone:"Phone Number",create_phone:"Blacklist by Phone",create_phrase:"Blacklist by Phrase",phrase:"Phrase",delete:"Remove blacklist"},scheduled:{repeat:{never:"Do not repeat",daily:"Repeat daily",weekly:"Repeat weekly",monthly:"Repeat monthly",yearly:"Repeat yearly"},media:"Media, within a scheduled message, can only be viewed on the phone app."},settings:{theme:"Theme Settings",refresh:"Refresh settings from phone",explanatory_intro:"These settings are pulled from the app, when you click this preference. You can also change them manually, from this page.",base:"Base Theme",daynight:"Day / Night",light:"Light",dark:"Dark",black:"Black",primary:"Primary Color",darkprimary:"Primary Color Dark",accent:"Accent Color",applyeverywhere:"Apply Colors to all Conversations",applyprimary:"Apply Primary Color to App Bar",messagetimestamp:"Display Timestamp on Every Message",conversationcategories:"Display Conversations in Date Categories",webspecific:"Web Specific Settings",shownotifs:"Show Notifications",entersend:"Use Enter to Send Messages",yes:"Yes",no:"No"},account:{upgrade_subscription:'Want to change or upgrade your subscription? Head to the "My Account" section, in the Android app!'},experiments:{disclaimer:"Disclaimer",explanatory_intro:"These preferences come with no support and no guarantee that they will continue to exist. As an open source app, they will be useful to test new features and provide developers with the means of implementing their own tweaks into the app. Use with caution and do not rely on them, unless you are maintaining them. They are meant to be experiments.",archive_after_send:"Archive Conversation After Sending Any Message",larger_app_bar:"Display Larger App Bar",unread_count_in_sidebar:"Display Unread Messages Count in Sidebar"}},fr:{login:{first:'D\'abord, <a href="https://messenger.klinkerapps.com/overview/signup.html" target="_blank">enregistrez-vous</a> avec le bouton <b>SMS depuis d\'autres appareils</b> dans le menu de navigation de l\'application mobile.',error:"Email ou Mot de passe incorrect",email:"Adresse email",password:"Mot de passe",forgotpassword:"Mot de passe oubli ?",iphone:"Vous avez un <i>iPhone</i>?",login:"Connexion"},sidebar:{conversations:"Conversations",privateconversations:"Conversations prives",archive:"Conversations archives",folders:"Dossiers",scheduled:"Messages programms",blacklist:"Liste noire"},api:{disconnected:"Vous avez t dconnect. Nous tentons de vous reconnecter...",back:"Connexion tablie !"},conversations:{pinned:"pingls",today:"Aujourd'hui",yesterday:"Hier",thisweek:"Cette semaine",thismonth:"Ce mois ci",older:"Anciens",noconv:"Aucune conversation"},passcode:{enter:"Entrez le code secret",passcode:"Code secret"},dialog:{continue:"Continuer",cancel:"Abandonner",save:"Sauvegarder",close:"Fermer",create:"Crer",delete:"Supprimer"},sendbar:{type:"Composez votre message"},thread:{settings:{updatecolors:"Changer les couleurs",pin:"pingler la conversation",mute:"Rendre muet",private:"Conversation prive"}},menus:{account:"Mon compte",settings:"Paramtres",help:"Aide et retours",logout:"Dconnexion",convinfo:"Informations",blacklist:"Bloquer",delete:"Supprimer",archive:"Archiver",unarchive:"Dsarchiver",convsettings:"Paramtres"},compose:{norecipient:"Pas de destinataire",type:"Entrez le nom d'un contact",cantfind:"Contact introuvable ?",alreadyadded:"{name} est dj destinataire"},blacklist:{none:"Liste noire vide",phone:"Numro de tlphone",create:"Ajouter un blocage"},settings:{theme:"Paramtre d'apparence",refresh:"Rcuprer les paramtres du tlphone",explanatory_intro:"Ces paramtres sont rcuprs depuis l'application, lorsque vous cliquez dessus. Vous pouvez aussi les changer manuellement depuis cette page.",base:"Thme de base",daynight:"Jour / Nuit",light:"Clair",dark:"Sombre",black:"Noir",primary:"Couleur primaire",darkprimary:"Couleur primaire fonce",accent:"Couleur secondaire",applyeverywhere:"Appliquer ces couleurs pour toutes les conversations",applyprimary:"Appliquer la couleur primaire  la barre de navigation",webspecific:"Paramtres spcifiques au web",shownotifs:"Afficher les notifications",entersend:"La touche entre envoie le message",yes:"Oui",no:"Non"}},sv:{login:{first:'<a href="https://messenger.klinkerapps.com/overview/signup.html" target="_blank">Skapa</a> frst ett konto genom att klicka p <b>Skriv frn valfri enhet</b> i menyn i telefonens app.',error:"Fel e-post eller lsenord",email:"Epostadress",password:"Lsenord",forgotpassword:"Glmt ditt lsenord?",iphone:"Har du en <i>iPhone</i>?",login:"Logga in"},sidebar:{conversations:"Konversationer",unreadconversations:"Olsta konversationer",privateconversations:"Privata konversationer",archive:"Arkiv",folders:"Mappar",scheduled:"Schemalagda meddelanden",blacklist:"Svartlistade",searchconversations:"Sk konversationer"},api:{disconnected:"Du har blivit frnkopplad. Frsker koppla upp igen...",back:"teruppkopplad!"},conversations:{pinned:"Pinnad",today:"Idag",yesterday:"Igr",thisweek:"Denna vecka",thismonth:"Denna mnad",older:"ldre",noconv:"Inga konversationer",deleteconfirm:"r du sker p att du vill radera dessa konversationer?"},passcode:{enter:"Skriv in lsenord",passcode:"Lsenord"},dialog:{continue:"Fortstt",cancel:"Avbryt",save:"Spara",close:"Stng",create:"Skapa",delete:"Radera"},sendbar:{type:"Skriv meddelande..."},thread:{settings:{updatecolors:"ndra temafrger",pin:"Pinna konversationer",mute:"Tysta konversationer",private:"Privata konversationer"},delete:{delete:"Radera",cancel:"Avbryt",thread:"r du sker p att du vill radera denna konversation?",message:"r du sker p att du vill radera detta meddelande?"},blacklisted:"Kontakten svartlistad och flyttad till arkivet.",groupblacklisted:"Kan inte svartlista gruppkonversationer.",newmessage:"Nytt meddelande",show:"Visa"},menus:{account:"Mitt konto",settings:"Instllningar",help:"Hjlp och feedback",logout:"Logga ut",convinfo:"Konversationsinformation",blacklist:"Svarlista kontakt",delete:"Radera konversation",archive:"Arkivera konversation",unarchive:"Flytta till Inkorgen",deleteselected:"Radera konversation",archiveselected:"Arkivera konversation",unarchiveselected:"Flytta konversation till Inkorgen",selectall:"Markera alla konversationer",convsettings:"Konversationsinstllningar"},compose:{norecipient:"Ingen mottagare",type:"Sk kontakter eller skriv ett eller flera telefonnummer (separerade med semikolon)...",cantfind:"Kan inte hitta kontakt?",alreadyadded:"{name} har redan lagts till",downloading:"Laddar ner kontakter..."},contact:{group:"Grupp",mobile:"Mobil",home:"Hem",work:"Arbete",other:"Annan"},blacklist:{none:"Inga svartlistade nummer",phone:"Telefonnummer",create_phone:"Svarlista telefonnummer",create_phrase:"Svartlista en fras",phrase:"Fras",delete:"Radera svartlista"},scheduled:{repeat:{never:"Upprepa ej",daily:"Upprepa dagligen",weekly:"Upprepa varje vecka",monthly:"Upprepa varje mnad",yearly:"Upprepa varje r"},media:"Media i ett schemalagt meddelande kan bara ses genom telefonappen."},settings:{theme:"Temainstllningar",refresh:"Uppdatera instllningar frn telefon",explanatory_intro:"Dessa instllningar hmtas frn telefonappen nr du vljer detta alternativ. Du kan ocks ndra dem manuellt p den hr sidan.",base:"Grundtema",daynight:"Dag / Natt",light:"Ljust",dark:"Mrkt",black:"Svart",primary:"Primr frg",darkprimary:"Primr mrk frg",accent:"Accentfrg",applyeverywhere:"Applicera frger p alla konversationer",applyprimary:'Applicera primr frg p "App Bar"',messagetimestamp:"Visa tidsstmpel p varje meddelande",conversationcategories:"Visa konversationer i datumkategorier",webspecific:"Webspecifika instllningar",shownotifs:"Visa notiser",entersend:"Anvnd Enter-knappen fr att skicka meddelanden",yes:"Ja",no:"Nej"},account:{upgrade_subscription:'Vill du ndra eller uppgradera ditt abonnemang? G till "Mitt konto" i Android appen!'},experiments:{disclaimer:"Varning",explanatory_intro:"Dessa instllningar ges ingen support eller garantier att de kommer fortstta finnas kvar. Som en app med ppen kllkod r de anvndbara fr att testa nya funktioner och frse utvecklare med verktyg fr att applicera sina egna justeringar i appen. Anvnd frsiktigt och frlita dig inte p dem om du inte underhller dem sjlv. De r avsedda som experiment.",larger_app_bar:'Visa strre "App Bar"',unread_count_in_sidebar:"Visa antal Olsta meddelanden i sidomenyn"}}}}),ga=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{style:e.marginLeft,attrs:{id:"sidebar"}},[i("div",{attrs:{id:"drawer-holder"}},[i("ul",{attrs:{id:"drawer-links"}},[i("li",{attrs:{id:"conversations-link"},on:{click:function(t){return e.routeTo("conversations")}}},[i("div",{staticClass:"link-card mdl-card mdl-js-button mdl-js-ripple-effect",class:{active:e.is_active("conversations")}},[i("img",{staticClass:"icon conversations",attrs:{src:s("b7fb"),width:"24",height:"24"}}),e._v(" "+e._s(e.$t("sidebar.conversations"))+" "),e.display_unread?i("span",[e._v(" ("+e._s(e.unread_count)+") ")]):e._e()])]),i("li",{attrs:{id:"unread-link"},on:{click:function(t){return e.routeTo("unread")}}},[i("div",{staticClass:"link-card mdl-card mdl-js-button mdl-js-ripple-effect",class:{active:e.is_active("unread")}},[i("img",{staticClass:"icon unread",attrs:{src:s("b7fb"),width:"24",height:"24"}}),e._v(" "+e._s(e.$t("sidebar.unreadconversations"))+" ")])]),i("li",{attrs:{id:"private-link"},on:{click:function(t){return e.routeTo("private")}}},[i("div",{staticClass:"link-card mdl-card mdl-js-button mdl-js-ripple-effect",class:{active:e.is_active("private")}},[i("img",{staticClass:"icon private",attrs:{src:s("b7fb"),width:"24",height:"24"}}),e._v(" "+e._s(e.$t("sidebar.privateconversations"))+" ")])]),i("li",{attrs:{id:"archive-link"},on:{click:function(t){return e.routeTo("archive")}}},[i("div",{staticClass:"link-card mdl-card mdl-js-button mdl-js-ripple-effect",class:{active:e.is_active("archive")}},[i("img",{staticClass:"icon archive",attrs:{src:s("b7fb"),width:"24",height:"24"}}),e._v(" "+e._s(e.$t("sidebar.archive"))+" ")])]),i("li",{attrs:{id:"folder-link"},on:{click:function(t){return e.routeTo("folders")}}},[i("div",{staticClass:"link-card mdl-card mdl-js-button mdl-js-ripple-effect",class:{active:e.is_active("folders")}},[i("img",{staticClass:"icon folders",attrs:{src:s("b7fb"),width:"24",height:"24"}}),e._v(" "+e._s(e.$t("sidebar.folders"))+" ")])]),i("li",{attrs:{id:"scheduled-messages-link"},on:{click:function(t){return e.routeTo("scheduled")}}},[i("div",{staticClass:"link-card mdl-card mdl-js-button mdl-js-ripple-effect",class:{active:e.is_active("scheduled")}},[i("img",{staticClass:"icon scheduled_messages",attrs:{src:s("b7fb"),width:"24",height:"24"}}),e._v(" "+e._s(e.$t("sidebar.scheduled"))+" ")])]),i("li",{attrs:{id:"blacklist-link"},on:{click:function(t){return e.routeTo("blacklists")}}},[i("div",{staticClass:"link-card mdl-card mdl-js-button mdl-js-ripple-effect",class:{active:e.is_active("blacklists")}},[i("img",{staticClass:"icon blacklist",attrs:{src:s("b7fb"),width:"24",height:"24"}}),e._v(" "+e._s(e.$t("sidebar.blacklist"))+" ")])]),e.showConversations?i("li",[i("div",{staticClass:"link-card mdl-card"},[i("img",{staticClass:"icon search",attrs:{src:s("b7fb"),width:"24",height:"24"}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],staticClass:"quick_find fixed_pos",attrs:{id:"search-bar",type:"text text_box",placeholder:e.$t("sidebar.searchconversations"),autocomplete:"off",autocorrect:"off",spellcheck:"false"},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}})])]):e._e()]),i("transition",{attrs:{name:"slide-left"}},[e.showConversations?i("conversations",{attrs:{small:"true"}}):e._e()],1)],1)]),e._v(" "),i("transition",{attrs:{name:"fade"}},[!e.full_theme&&e.open?i("div",{attrs:{id:"sidebar-overlay"},on:{click:e.close_drawer}}):e._e()])],1)},ba=[],Ca=(s("b54a"),{name:"Sidebar",components:{Conversations:It},data:function(){return{links:{conversations:{name:"conversations-list"},unread:{name:"conversations-list-unread"},archive:{name:"conversations-list-archived"},blacklists:{name:"blacklists"},private:{name:"conversations-list-private"},folders:{name:"folders"},scheduled:{name:"scheduled-messages"}},listeners:[],searchQuery:""}},computed:{marginLeft:function(){return this.open?"margin-left: 0px;":"margin-left: -269px;"},open:function(){return this.$store.state.sidebar_open},full_theme:function(){return this.$store.state.full_theme},showConversations:function(){return"conversations-list"!=this.$route.name&&""!=this.$store.state.account_id},display_unread:function(){return this.$store.state.unread_count_in_sidebar},unread_count:function(){return this.$store.state.unread_count}},watch:{searchQuery:function(e){this.$store.state.msgbus.$emit("searchUpdated",e)}},mounted:function(){var e=this.$el.querySelector("#sidebar"),t=Mn.addEventListeners(["mousewheel","DOMMouseScroll"],(function(t){var s=e.scrollTop,i=e.scrollHeight,n=e.offsetHeight,a=t.wheelDelta,r=a>0,o=function(){return t.stopPropagation(),t.preventDefault(),t.returnValue=!1,!1};return!r&&-a>i-n-s?(e.scrollTop=i,o()):r&&a>s?(e.scrollTop=0,o()):void 0}),e);this.listeners.extend(t)},beforeDestroy:function(){Mn.removeEventListeners(this.listeners)},methods:{routeTo:function(e){this.close_drawer(),this.$router.push(this.links[e]).catch((function(){})),this.searchQuery=""},close_drawer:function(){this.full_theme||this.$store.commit("sidebar_open",!1)},is_active:function(e){return"conversations"==e&&("conversations-list"==this.$route.name||"thread"==this.$route.name)||("unread"==e&&"conversations-list-unread"==this.$route.name||("private"==e&&("passcode"==this.$route.name||"conversations-list-private"==this.$route.name)||("archive"==e&&("conversations-list-archived"==this.$route.name||"thread-archived"==this.$route.name)||("folders"==e&&("folders"==this.$route.name||"conversations-list-folder"==this.$route.name)||("scheduled"==e&&("scheduled-messages"==this.$route.name||"create-scheduled-message"==this.$route.name||"edit-scheduled-message"==this.$route.name)||"blacklists"==e&&("blacklists"==this.$route.name||"create-blacklist"==this.$route.name))))))}}}),ya=Ca,Ea=(s("8c64"),Object(B["a"])(ya,ga,ba,!1,null,"51f14dc0",null)),Aa=Ea.exports,ka=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"mdl",rawName:"v-mdl"}],staticClass:"mdl-snackbar mdl-js-snackbar",attrs:{"aria-atomic":"true","aria-relevant":"text"}},[s("div",{staticClass:"mdl-snackbar__text"}),s("button",{staticClass:"mdl-snackbar__action",attrs:{type:"button"}})])},wa=[],Sa={name:"Snackbar"},Da=Sa,xa=(s("783d"),Object(B["a"])(Da,ka,wa,!1,null,"d1e7647c",null)),La=xa.exports,Ba=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"fade"}},[e.display?s("div",{staticClass:"lightbox-wrapper"},[s("div",{staticClass:"lightbox-toolbar"},[s("button",{staticClass:"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect",attrs:{id:"close-button",tag:"button"},on:{click:e.close}},[s("i",{staticClass:"material-icons material-icons-white"},[e._v("cancel")])]),s("button",{staticClass:"menu_icon add mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect",attrs:{id:"download-button"},on:{click:e.download}},[s("i",{staticClass:"material-icons material-icons-white"},[e._v("save")])])]),s("div",{staticClass:"lightbox-overlay",on:{click:function(t){return e.close()}}},[s("img",{staticClass:"full-image",attrs:{src:e.image_data,alt:"Image"}})])]):e._e()])},Ta=[],Fa={name:"Imageviewer",data:function(){return{image_data:"",display:!1}},mounted:function(){E.state.msgbus.$on("showImage",this.showImage),E.state.msgbus.$on("hideImage",this.close),E.state.msgbus.$on("hotkey-esc",this.close)},beforeDestroy:function(){this.$store.state.msgbus.$off("showImage",this.showImage),this.$store.state.msgbus.$off("hideImage",this.close),this.$store.state.msgbus.$off("hotkey-esc",this.close)},methods:{close:function(){this.display=!1,this.image_data=""},download:function(){var e=document.createElement("a");e.download="pulse-image-".concat((new Date).getTime(),".jpg"),e.href=document.querySelector(".full-image").src,document.body.appendChild(e),e.click(),document.body.removeChild(e)},downloadUri:function(){},showImage:function(e){var t=this,s=E.state.media_loader;s.getMedia(e.messageId,e.type).then((function(e){t.display=!0;var s="data:"+t.mime+";base64,";t.image_data=s+e}))}}},Ia=Fa,$a=(s("9943"),Object(B["a"])(Ia,Ba,Ta,!1,null,"64340fc1",null)),Ma=$a.exports,Oa={name:"App",components:{Sidebar:Aa,Snackbar:La,ImageViewer:Ma},data:function(){return{margin:0,loading:this.$store.state.loading,mm:null,toolbar_color:this.$store.state.theme_global_default,menu_items:[],hour:null,selected_conversations:[]}},computed:{has_selected:function(){return this.selected_conversations.length>0},icon_class:function(){return{logo:this.full_theme&&!this.apply_appbar_color,logo_dark:this.full_theme&&this.apply_appbar_color,menu_toggle:!this.full_theme&&!this.apply_appbar_color,menu_toggle_dark:!this.full_theme&&this.apply_appbar_color}},sidebar_open:function(){return this.$store.state.sidebar_open},full_theme:function(){return this.$store.state.full_theme},theme_str:function(){var e=this.$store.state.theme_base;return"day_night"==e?this.is_night?"dark":"":"black"==e?"dark black":e},is_night:function(){return this.hour<7||this.hour>=20},theme_toolbar:function(){return this.has_selected?"#202020":this.apply_appbar_color?this.$store.state.theme_use_global?this.$store.state.theme_global_default:this.toolbar_color:this.default_toolbar_color},default_toolbar_color:function(){return this.apply_appbar_color?this.$store.state.theme_global_default?this.$store.state.theme_global_default:"#1775D2":this.theme_str.indexOf("black")>=0?"#000000":this.theme_str.indexOf("dark")>=0?"#202024":"#FFFFFF"},text_color:function(){if(this.has_selected)return"#FFF";try{return this.apply_appbar_color?this.toolbar_color.indexOf("rgb(")>-1||this.toolbar_color.indexOf("rgba(")>-1?Mn.getTextColorBasedOnBackground(this.toolbar_color):"#FFF":this.theme_str.indexOf("black")>=0||this.theme_str.indexOf("dark")>=0?"#FFF":"#000"}catch(e){return"#FFF"}},show_search:function(){return!this.has_selected&&this.$route.name.indexOf("conversations-list")>-1},show_compose:function(){return!this.has_selected&&-1!=this.$route.path.indexOf("thread")},show_archive:function(){return this.has_selected&&-1==this.$route.path.indexOf("archive")},show_unarchive:function(){return this.has_selected&&-1!=this.$route.path.indexOf("archive")},apply_appbar_color:function(){return"rgba(255,255,255,1)"!=this.toolbar_color&&this.$store.state.theme_apply_appbar_color},unread_count:function(){return this.$store.state.unread_count},title:function(){if(this.has_selected){var e=this.selected_conversations.length;return 1==e?"Selected 1 conversation":"Selected "+this.selected_conversations.length+" conversations"}return this.$store.state.title}},watch:{$route:function(){this.populateMenuItems()},"$store.state.colors_default":function(e){this.updateTheme(e)},theme_str:function(e,t){this.updateBodyClass(e,t)},theme_toolbar:function(e){var t=this;i["default"].nextTick((function(){var s=t.$el.querySelector("#toolbar");Mn.materialColorChange(s,e)}))},"$store.state.title":function(){this.updateTitle()},"$store.state.unread_count":function(){this.updateTitle()}},beforeCreate:function(){this.$store.commit("title","Pulse SMS"),""!=this.$store.state.account_id?On.setupAes():"login"!=this.$route.name&&this.$router.push("login"),navigator.serviceWorker&&navigator.serviceWorker.register("/service-worker.js").then((function(e){return console.log("Registered SW with scope: ",e.scope)})).catch((function(e){return console.log("Unable to register SW",e)}));var e=this.$store.state.account_id,t=this.$store.state.hash,s=this.$store.state.salt;addEventListener("message",(function(i){i.origin.startsWith("chrome-extension://")&&("requesting account id"==i.data?i.source.postMessage("account id: "+e,i.origin):"requesting hash"==i.data?i.source.postMessage("hash: "+t,i.origin):"requesting salt"==i.data&&i.source.postMessage("salt: "+s,i.origin))}))},mounted:function(){var e=this;this.applyExperiments(),this.calculateHour(),this.updateBodyClass(this.theme_str,""),window.addEventListener("resize",this.handleResize),this.handleResize(),Mn.firebaseConfig();var t={default:this.$store.state.theme_global_default,dark:this.$store.state.theme_global_dark,accent:this.$store.state.theme_global_accent};if(this.$store.commit("colors",t),""!=this.$store.state.account_id?this.applicationStart():(this.$store.state.msgbus.$on("start-app",this.applicationStart),this.mount_view=!0),this.$store.state.msgbus.$on("settings-btn",this.settings),this.$store.state.msgbus.$on("account-btn",this.account),this.$store.state.msgbus.$on("help-feedback-btn",this.helpAndFeedback),this.$store.state.msgbus.$on("logout-btn",this.logout),this.$store.state.msgbus.$on("currentlySelectedConversations",this.updateSelectedConversations),this.$store.state.notifications&&!pa.isFirefox())Mn.requestNotifications();else if(pa.isFirefox()&&this.$store.state.notifications&&da.needsPermission()){var s={okText:this.$t("settings.yes"),cancelText:this.$t("settings.no"),animation:"fade"};this.$dialog.confirm("".concat(this.$t("settings.shownotifs"),"?"),s).then((function(){Mn.requestNotifications()})).catch((function(){e.$store.commit("notifications",!1)}))}var i=this.$el.querySelector("#toolbar");Mn.materialColorChange(i,this.theme_toolbar)},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize),this.$store.state.msgbus.$off("start-app",this.applicationStart),this.$store.state.msgbus.$off("settings-btn",this.settings),this.$store.state.msgbus.$off("account-btn",this.account),this.$store.state.msgbus.$off("help-feedback-btn",this.helpAndFeedback),this.$store.state.msgbus.$off("logout-btn",this.logout),this.$store.state.msgbus.$off("currentlySelectedConversations",this.updateSelectedConversations),this.stream.close()},methods:{applicationStart:function(){var e=this;this.stream=new sa.stream,this.shortcuts=new ma,this.populateMenuItems(),this.$store.commit("media_loader",new la),setTimeout((function(){sa.contacts.get().then((function(t){return e.processContacts(t)})),sa.account.settings.get()}),1500),setInterval((function(){var t=e.$store.state.last_ping;null!=t&&(t>(Date.now()/1e3>>0)-15||(e.stream.close(),e.stream=new sa.stream,e.stream.has_diconnected=!0,e.calculateHour()))}),15e3)},toggleSidebar:function(){this.full_theme?this.$router.push("/").catch((function(){})):this.$store.commit("sidebar_open",!this.sidebar_open)},handleResize:function(){var e=950,t=document.documentElement.clientWidth,s=0;t>750?(this.$store.commit("sidebar_open",!0),this.$store.commit("full_theme",!0)):(this.$store.commit("sidebar_open",!1),this.$store.commit("full_theme",!1)),t>e&&(s=(t-e)/2),this.margin=s,this.$store.state.msgbus.$emit("newMargin",s)},populateMenuItems:function(){var e=[];return this.has_selected?e.unshift({name:"select-all",title:va.t("menus.selectall")}):this.$route.name.indexOf("thread")>-1?e.unshift({name:"conversation-information",title:va.t("menus.convinfo")},{name:"blacklist",title:va.t("menus.blacklist")},{name:"delete",title:va.t("menus.delete")},-1==this.$route.path.indexOf("archived")?{name:"archive",title:va.t("menus.archive")}:{name:"unarchive",title:va.t("menus.unarchive")},{name:"conversation-settings",title:va.t("menus.convsettings")}):e.unshift({name:"account",title:va.t("menus.account")},{name:"help-feedback",title:va.t("menus.help")},{name:"settings",title:va.t("menus.settings")},{name:"logout",title:va.t("menus.logout")}),this.menu_items=e},dispatchMenuButton:function(e){if(this.$store.state.msgbus.$emit(e+"-btn"),"refresh"==e){var t=this.$el.querySelector("#refresh-button");t.className+=" rotate",setTimeout((function(){t.className=t.className.replace(" rotate","")}),250)}},updateTheme:function(e){if(!this.$store.state.theme_apply_appbar_color)return!1;this.toolbar_color=e},updateTitle:function(){var e=this.$store.state.title,t=this.$store.state.unread_count?"(".concat(this.$store.state.unread_count,")"):"";e.length>0?document.title="".concat(t," ").concat(e):document.title="".concat(t," Pulse SMS")},settings:function(){this.$router.push("/settings").catch((function(){}))},account:function(){this.$router.push("/account").catch((function(){}))},helpAndFeedback:function(){this.$router.push("/help_feedback").catch((function(){}))},logout:function(){this.$store.commit("account_id",""),this.$store.commit("hash",""),this.$store.commit("salt",""),this.$store.commit("key",""),this.$store.commit("aes",""),this.$store.commit("clearContacts",{}),ha.invalidateAllConversations(),ha.invalidateAllMessages(),window.localStorage.clear(),this.stream.close(),Mn.snackbar("You've been logged out"),this.$router.push("login")},updateBodyClass:function(e,t){var s=this.$el.parentElement,i=s.className.replace(t,"");s.className=i+" "+e},calculateHour:function(){var e=this,t=60*(60-(new Date).getMinutes())*1e3;this.hour=(new Date).getHours(),setTimeout((function(){e.calculateHour()}),t+2e3)},processContacts:function(e){var t=[],s=!0,i=!1,n=void 0;try{for(var a,r=e[Symbol.iterator]();!(s=(a=r.next()).done);s=!0){var o=a.value,c=Mn.generateContact(Mn.createIdMatcher(o.phone_number),o.name,o.phone_number,!1,!1,o.color,o.color_accent,null,null);t.push(c)}}catch(l){i=!0,n=l}finally{try{s||null==r.return||r.return()}finally{if(i)throw n}}this.$store.commit("contacts",t)},openUrl:function(e){window.open(e,"_blank")},applyExperiments:function(){var e=this.$el.parentElement,t="larger_app_bar";this.$store.state.larger_app_bar&&!e.className.includes(t)&&(e.className+=" ".concat(t," "))},updateSelectedConversations:function(e){this.selected_conversations=e,this.populateMenuItems()}}},Na=Oa,Ra=(s("5c0b"),Object(B["a"])(Na,r,o,!1,null,null,null)),ja=Ra.exports,Pa=s("9224"),Ha=s("353a"),Ua=s.n(Ha),qa=s("3181"),za=s.n(qa);s("c5c5"),s("41e9"),s("230c");if(i["default"].config.productionTip=!1,!Mn.isDevMode()){var Ga=function(e){var t=e.context;if(t.includes("/thread/")){var s=e.context.match(/(.*\/thread\/)(\d+)(.*)/);e.context="".concat(s[1],":id").concat(s[3])}},Ka=Ua()({beforeSend:Ga,apiKey:"c9e7daf16e171be27f206895b77cee70",appVersion:Pa["a"]});Ka.use(za.a,i["default"])}i["default"].use(a.a),i["default"].directive("mdl",{bind:function(e){Qt.upgradeElements(e)}}),new i["default"]({i18n:va,el:"#app",store:E,router:$n,components:{App:ja},template:"<App/>"})},"59c8":function(e,t,s){"use strict";var i=s("a5ed"),n=s.n(i);n.a},"5c0b":function(e,t,s){"use strict";var i=s("9c0c"),n=s.n(i);n.a},"5e7c":function(e,t,s){},6303:function(e,t,s){},"63b7":function(e,t,s){"use strict";var i=s("0977"),n=s.n(i);n.a},"697c":function(e,t,s){},"6d24":function(e,t,s){"use strict";var i=s("7d34"),n=s.n(i);n.a},"6e96":function(e,t,s){"use strict";var i=s("b94c"),n=s.n(i);n.a},"783d":function(e,t,s){"use strict";var i=s("c1ac"),n=s.n(i);n.a},"787d":function(e,t,s){},"7aad":function(e,t,s){"use strict";var i=s("a449"),n=s.n(i);n.a},"7ae8":function(e,t,s){},"7d34":function(e,t,s){},"7e29":function(e,t,s){"use strict";var i=s("ad80"),n=s.n(i);n.a},8685:function(e,t,s){},"897b":function(e,t,s){},"8b56":function(e,t,s){},"8c64":function(e,t,s){"use strict";var i=s("8685"),n=s.n(i);n.a},"8dc1":function(e,t,s){},"8dca":function(e,t,s){"use strict";var i=s("3b27"),n=s.n(i);n.a},9224:function(e){e.exports=JSON.parse('{"a":"v1.3.6"}')},"94ce":function(e,t,s){"use strict";var i=s("f6b0"),n=s.n(i);n.a},"975e":function(e,t,s){},9796:function(e,t,s){"use strict";var i=s("e579"),n=s.n(i);n.a},9943:function(e,t,s){"use strict";var i=s("e7ad"),n=s.n(i);n.a},"9c0c":function(e,t,s){},"9e3d":function(e,t,s){"use strict";var i=s("51d2"),n=s.n(i);n.a},a121:function(e,t,s){"use strict";var i=s("897b"),n=s.n(i);n.a},a146:function(e,t,s){},a1a5:function(e,t,s){"use strict";var i=s("b3f9"),n=s.n(i);n.a},a1b1:function(e,t,s){e.exports=function(){return new Worker(s.p+"decrypter.worker.js")}},a449:function(e,t,s){},a491:function(e,t,s){},a568:function(e,t,s){"use strict";var i=s("975e"),n=s.n(i);n.a},a5ed:function(e,t,s){},a6a8:function(e,t,s){"use strict";var i=s("8b56"),n=s.n(i);n.a},a7ba:function(e,t,s){"use strict";var i=s("8dc1"),n=s.n(i);n.a},ab2a:function(e,t,s){"use strict";var i=s("2685"),n=s.n(i);n.a},ad31:function(e,t,s){},ad80:function(e,t,s){},b2e1:function(e,t,s){},b3f9:function(e,t,s){},b7fb:function(e,t){e.exports="data:image/gif;base64,R0lGODlhCgAKAIAAAP///wAAACH5BAEAAAAALAAAAAAKAAoAAAIIhI+py+0PYysAOw=="},b94c:function(e,t,s){},bb86:function(e,t,s){},bc79:function(e,t,s){"use strict";var i=s("16a5"),n=s.n(i);n.a},bd58:function(e,t,s){"use strict";var i=s("a491"),n=s.n(i);n.a},c1ac:function(e,t,s){},c3ab:function(e,t,s){},c788:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return n}));s("262f"),s("6d67"),s("0cd8"),s("4f37"),s("673e"),s("28a5"),s("4917"),s("34ef");var i=s("7618"),n=(s("9c29"),s("57e7"),s("a481"),s("6b54"),s("87b3"),{cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}});function a(e,t,s){if(4!==t.length)throw new n.exception.invalid("invalid aes block size");var i=e.i[s],a=t[0]^i[0],r=t[s?3:1]^i[1],o=t[2]^i[2];t=t[s?1:3]^i[3];var c,l,d,h,u=i.length/4-2,m=4,p=[0,0,0,0];c=e.M[s],e=c[0];var f=c[1],_=c[2],v=c[3],g=c[4];for(h=0;h<u;h++)c=e[a>>>24]^f[r>>16&255]^_[o>>8&255]^v[255&t]^i[m],l=e[r>>>24]^f[o>>16&255]^_[t>>8&255]^v[255&a]^i[m+1],d=e[o>>>24]^f[t>>16&255]^_[a>>8&255]^v[255&r]^i[m+2],t=e[t>>>24]^f[a>>16&255]^_[r>>8&255]^v[255&o]^i[m+3],m+=4,a=c,r=l,o=d;for(h=0;4>h;h++)p[s?3&-h:h]=g[a>>>24]<<24^g[r>>16&255]<<16^g[o>>8&255]<<8^g[255&t]^i[m++],c=a,a=r,r=o,o=t,t=c;return p}function r(e,t){var s,i=n.random.$[e],a=[];for(s in i)i.hasOwnProperty(s)&&a.push(i[s]);for(s=0;s<a.length;s++)a[s](t)}function o(e,t){"undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?e.addEntropy(window.performance.now(),t,"loadtime"):e.addEntropy((new Date).valueOf(),t,"loadtime")}function c(e){e.i=l(e).concat(l(e)),e.aa=new n.cipher.aes(e.i)}function l(e){for(var t=0;4>t&&(e.F[t]=e.F[t]+1|0,!e.F[t]);t++);return e.aa.encrypt(e.F)}function d(e,t){return function(){t.apply(e,arguments)}}n.cipher.aes=function(e){this.M[0][0][0]||this.T();var t,s,i,a,r=this.M[0][4],o=this.M[1];t=e.length;var c=1;if(4!==t&&6!==t&&8!==t)throw new n.exception.invalid("invalid aes key size");for(this.i=[i=e.slice(0),a=[]],e=t;e<4*t+28;e++)s=i[e-1],(0===e%t||8===t&&4===e%t)&&(s=r[s>>>24]<<24^r[s>>16&255]<<16^r[s>>8&255]<<8^r[255&s],0===e%t&&(s=s<<8^s>>>24^c<<24,c=c<<1^283*(c>>7))),i[e]=i[e-t]^s;for(t=0;e;t++,e--)s=i[3&t?e:e-4],a[t]=4>=e||4>t?s:o[0][r[s>>>24]]^o[1][r[s>>16&255]]^o[2][r[s>>8&255]]^o[3][r[255&s]]},n.cipher.aes.prototype={encrypt:function(e){return a(this,e,0)},decrypt:function(e){return a(this,e,1)},M:[[[],[],[],[],[]],[[],[],[],[],[]]],T:function(){var e,t,s,i,n,a,r,o=this.M[0],c=this.M[1],l=o[4],d=c[4],h=[],u=[];for(e=0;256>e;e++)u[(h[e]=e<<1^283*(e>>7))^e]=e;for(t=s=0;!l[t];t^=i||1,s=u[s]||1)for(a=s^s<<1^s<<2^s<<3^s<<4,a=a>>8^255&a^99,l[t]=a,d[a]=t,n=h[e=h[i=h[t]]],r=16843009*n^65537*e^257*i^16843008*t,n=257*h[a]^16843008*a,e=0;4>e;e++)o[e][t]=n=n<<24^n>>>8,c[e][a]=r=r<<24^r>>>8;for(e=0;5>e;e++)o[e]=o[e].slice(0),c[e]=c[e].slice(0)}},n.bitArray={bitSlice:function(e,t,s){return e=n.bitArray.ra(e.slice(t/32),32-(31&t)).slice(1),void 0===s?e:n.bitArray.clamp(e,s-t)},extract:function(e,t,s){var i=Math.floor(-t-s&31);return(-32&(t+s-1^t)?e[t/32|0]<<32-i^e[t/32+1|0]>>>i:e[t/32|0]>>>i)&(1<<s)-1},concat:function(e,t){if(0===e.length||0===t.length)return e.concat(t);var s=e[e.length-1],i=n.bitArray.getPartial(s);return 32===i?e.concat(t):n.bitArray.ra(t,i,0|s,e.slice(0,e.length-1))},bitLength:function(e){var t=e.length;return 0===t?0:32*(t-1)+n.bitArray.getPartial(e[t-1])},clamp:function(e,t){if(32*e.length<t)return e;e=e.slice(0,Math.ceil(t/32));var s=e.length;return t&=31,0<s&&t&&(e[s-1]=n.bitArray.partial(t,e[s-1]&2147483648>>t-1,1)),e},partial:function(e,t,s){return 32===e?t:(s?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,t){if(n.bitArray.bitLength(e)!==n.bitArray.bitLength(t))return!1;var s,i=0;for(s=0;s<e.length;s++)i|=e[s]^t[s];return 0===i},ra:function(e,t,s,i){var a;for(a=0,void 0===i&&(i=[]);32<=t;t-=32)i.push(s),s=0;if(0===t)return i.concat(e);for(a=0;a<e.length;a++)i.push(s|e[a]>>>t),s=e[a]<<32-t;return a=e.length?e[e.length-1]:0,e=n.bitArray.getPartial(a),i.push(n.bitArray.partial(t+e&31,32<t+e?s:i.pop(),1)),i},l:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM:function(e){var t,s;for(t=0;t<e.length;++t)s=e[t],e[t]=s>>>24|s>>>8&65280|(65280&s)<<8|s<<24;return e}},n.codec.utf8String={fromBits:function(e){var t,s,i="",a=n.bitArray.bitLength(e);for(t=0;t<a/8;t++)0===(3&t)&&(s=e[t/4]),i+=String.fromCharCode(s>>>8>>>8>>>8),s<<=8;return decodeURIComponent(escape(i))},toBits:function(e){e=unescape(encodeURIComponent(e));var t,s=[],i=0;for(t=0;t<e.length;t++)i=i<<8|e.charCodeAt(t),3===(3&t)&&(s.push(i),i=0);return 3&t&&s.push(n.bitArray.partial(8*(3&t),i)),s}},n.codec.hex={fromBits:function(e){var t,s="";for(t=0;t<e.length;t++)s+=(0xf00000000000+(0|e[t])).toString(16).substr(4);return s.substr(0,n.bitArray.bitLength(e)/4)},toBits:function(e){var t,s,i=[];for(e=e.replace(/\s|0x/g,""),s=e.length,e+="00000000",t=0;t<e.length;t+=8)i.push(0^parseInt(e.substr(t,8),16));return n.bitArray.clamp(i,4*s)}},n.codec.base32={D:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",la:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(e,t,s){var i=n.codec.base32.BASE,a=n.codec.base32.REMAINING,r="",o=0,c=n.codec.base32.D,l=0,d=n.bitArray.bitLength(e);for(s&&(c=n.codec.base32.la),s=0;r.length*i<d;)r+=c.charAt((l^e[s]>>>o)>>>a),o<i?(l=e[s]<<i-o,o+=a,s++):(l<<=i,o-=i);for(;7&r.length&&!t;)r+="=";return r},toBits:function(e,t){e=e.replace(/\s|=/g,"").toUpperCase();var s,i,a=n.codec.base32.BITS,r=n.codec.base32.BASE,o=n.codec.base32.REMAINING,c=[],l=0,d=n.codec.base32.D,h=0,u="base32";for(t&&(d=n.codec.base32.la,u="base32hex"),s=0;s<e.length;s++){if(i=d.indexOf(e.charAt(s)),0>i){if(!t)try{return n.codec.base32hex.toBits(e)}catch(m){}throw new n.exception.invalid("this isn't "+u+"!")}l>o?(l-=o,c.push(h^i>>>l),h=i<<a-l):(l+=r,h^=i<<a-l)}return 56&l&&c.push(n.bitArray.partial(56&l,h,1)),c}},n.codec.base32hex={fromBits:function(e,t){return n.codec.base32.fromBits(e,t,1)},toBits:function(e){return n.codec.base32.toBits(e,1)}},n.codec.base64={D:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,t,s){var i="",a=0,r=n.codec.base64.D,o=0,c=n.bitArray.bitLength(e);for(s&&(r=r.substr(0,62)+"-_"),s=0;6*i.length<c;)i+=r.charAt((o^e[s]>>>a)>>>26),6>a?(o=e[s]<<6-a,a+=26,s++):(o<<=6,a-=6);for(;3&i.length&&!t;)i+="=";return i},toBits:function(e,t){e=e.replace(/\s|=/g,"");var s,i,a=[],r=0,o=n.codec.base64.D,c=0;for(t&&(o=o.substr(0,62)+"-_"),s=0;s<e.length;s++){if(i=o.indexOf(e.charAt(s)),0>i)throw new n.exception.invalid("this isn't base64!");26<r?(r-=26,a.push(c^i>>>r),c=i<<32-r):(r+=6,c^=i<<32-r)}return 56&r&&a.push(n.bitArray.partial(56&r,c,1)),a}},n.codec.base64url={fromBits:function(e){return n.codec.base64.fromBits(e,1,1)},toBits:function(e){return n.codec.base64.toBits(e,1)}},n.codec.bytes={fromBits:function(e){var t,s,i=[],a=n.bitArray.bitLength(e);for(t=0;t<a/8;t++)0===(3&t)&&(s=e[t/4]),i.push(s>>>24),s<<=8;return i},toBits:function(e){var t,s=[],i=0;for(t=0;t<e.length;t++)i=i<<8|e[t],3===(3&t)&&(s.push(i),i=0);return 3&t&&s.push(n.bitArray.partial(8*(3&t),i)),s}},n.codec.z85={D:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.-:+=^!/*?&<>()[]{}@%$#",ya:[0,68,0,84,83,82,72,0,75,76,70,65,0,63,62,69,0,1,2,3,4,5,6,7,8,9,64,0,73,66,74,71,81,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,77,0,78,67,0,0,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,79,0,80,0,0],fromBits:function(e){if(!e)return null;if(0!==n.bitArray.bitLength(e)%32)throw new n.exception.invalid("Invalid bitArray length!");for(var t="",s=n.codec.z85.D,i=0;i<e.length;++i){for(var a=e[i],r=0,o=0;4>o;++o)r=256*r+(a>>>8*(4-o-1)&255);for(a=52200625;a;)t+=s.charAt(Math.floor(r/a)%85),a=Math.floor(a/85)}if(t.length!==5*e.length)throw new n.exception.invalid("Bad Z85 conversion!");return t},toBits:function(e){if(!e)return[];if(0!==e.length%5)throw new n.exception.invalid("Invalid Z85 string!");for(var t=[],s=0,i=n.codec.z85.ya,a=0,r=0,o=0;o<e.length;)if(s=85*s+i[e[o++].charCodeAt(0)-32],0===o%5){for(var c=16777216;c;)a=a*Math.pow(2,8)+Math.floor(s/c)%256,++r,4===r&&(t.push(a),r=a=0),c=Math.floor(c/256);s=0}return t}},n.hash.sha256=function(e){this.i[0]||this.T(),e?(this.c=e.c.slice(0),this.h=e.h.slice(0),this.f=e.f):this.reset()},n.hash.sha256.hash=function(e){return(new n.hash.sha256).update(e).finalize()},n.hash.sha256.prototype={blockSize:512,reset:function(){return this.c=this.A.slice(0),this.h=[],this.f=0,this},update:function(e){"string"===typeof e&&(e=n.codec.utf8String.toBits(e));var t,s=this.h=n.bitArray.concat(this.h,e);if(t=this.f,e=this.f=t+n.bitArray.bitLength(e),9007199254740991<e)throw new n.exception.invalid("Cannot hash more than 2^53 - 1 bits");if("undefined"!==typeof Uint32Array){var i=new Uint32Array(s),a=0;for(t=512+t-(512+t&511);t<=e;t+=512)this.m(i.subarray(16*a,16*(a+1))),a+=1;s.splice(0,16*a)}else for(t=512+t-(512+t&511);t<=e;t+=512)this.m(s.splice(0,16));return this},finalize:function(){var e,t=this.h,s=this.c;t=n.bitArray.concat(t,[n.bitArray.partial(1,1)]);for(e=t.length+2;15&e;e++)t.push(0);for(t.push(Math.floor(this.f/4294967296)),t.push(0|this.f);t.length;)this.m(t.splice(0,16));return this.reset(),s},A:[],i:[],T:function(){function e(e){return 4294967296*(e-Math.floor(e))|0}for(var t,s,i=0,n=2;64>i;n++){for(s=!0,t=2;t*t<=n;t++)if(0===n%t){s=!1;break}s&&(8>i&&(this.A[i]=e(Math.pow(n,.5))),this.i[i]=e(Math.pow(n,1/3)),i++)}},m:function(e){var t,s,i,n=this.c,a=this.i,r=n[0],o=n[1],c=n[2],l=n[3],d=n[4],h=n[5],u=n[6],m=n[7];for(t=0;64>t;t++)16>t?s=e[t]:(s=e[t+1&15],i=e[t+14&15],s=e[15&t]=(s>>>7^s>>>18^s>>>3^s<<25^s<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+e[15&t]+e[t+9&15]|0),s=s+m+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(u^d&(h^u))+a[t],m=u,u=h,h=d,d=l+s|0,l=c,c=o,o=r,r=s+(o&c^l&(o^c))+(o>>>2^o>>>13^o>>>22^o<<30^o<<19^o<<10)|0;n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+c|0,n[3]=n[3]+l|0,n[4]=n[4]+d|0,n[5]=n[5]+h|0,n[6]=n[6]+u|0,n[7]=n[7]+m|0}},n.hash.sha512=function(e){this.i[0]||this.T(),e?(this.c=e.c.slice(0),this.h=e.h.slice(0),this.f=e.f):this.reset()},n.hash.sha512.hash=function(e){return(new n.hash.sha512).update(e).finalize()},n.hash.sha512.prototype={blockSize:1024,reset:function(){return this.c=this.A.slice(0),this.h=[],this.f=0,this},update:function(e){"string"===typeof e&&(e=n.codec.utf8String.toBits(e));var t,s=this.h=n.bitArray.concat(this.h,e);if(t=this.f,e=this.f=t+n.bitArray.bitLength(e),9007199254740991<e)throw new n.exception.invalid("Cannot hash more than 2^53 - 1 bits");if("undefined"!==typeof Uint32Array){var i=new Uint32Array(s),a=0;for(t=1024+t-(1024+t&1023);t<=e;t+=1024)this.m(i.subarray(32*a,32*(a+1))),a+=1;s.splice(0,32*a)}else for(t=1024+t-(1024+t&1023);t<=e;t+=1024)this.m(s.splice(0,32));return this},finalize:function(){var e,t=this.h,s=this.c;t=n.bitArray.concat(t,[n.bitArray.partial(1,1)]);for(e=t.length+4;31&e;e++)t.push(0);for(t.push(0),t.push(0),t.push(Math.floor(this.f/4294967296)),t.push(0|this.f);t.length;)this.m(t.splice(0,32));return this.reset(),s},A:[],Fa:[12372232,13281083,9762859,1914609,15106769,4090911,4308331,8266105],i:[],Ha:[2666018,15689165,5061423,9034684,4764984,380953,1658779,7176472,197186,7368638,14987916,16757986,8096111,1480369,13046325,6891156,15813330,5187043,9229749,11312229,2818677,10937475,4324308,1135541,6741931,11809296,16458047,15666916,11046850,698149,229999,945776,13774844,2541862,12856045,9810911,11494366,7844520,15576806,8533307,15795044,4337665,16291729,5553712,15684120,6662416,7413802,12308920,13816008,4303699,9366425,10176680,13195875,4295371,6546291,11712675,15708924,1519456,15772530,6568428,6495784,8568297,13007125,7492395,2515356,12632583,14740254,7262584,1535930,13146278,16321966,1853211,294276,13051027,13221564,1051980,4080310,6651434,14088940,4675607],T:function(){function e(e){return 4294967296*(e-Math.floor(e))|0}function t(e){return 1099511627776*(e-Math.floor(e))&255}for(var s,i,n=0,a=2;80>n;a++){for(i=!0,s=2;s*s<=a;s++)if(0===a%s){i=!1;break}i&&(8>n&&(this.A[2*n]=e(Math.pow(a,.5)),this.A[2*n+1]=t(Math.pow(a,.5))<<24|this.Fa[n]),this.i[2*n]=e(Math.pow(a,1/3)),this.i[2*n+1]=t(Math.pow(a,1/3))<<24|this.Ha[n],n++)}},m:function(e){var t,s,i,n=this.c,a=this.i,r=n[0],o=n[1],c=n[2],l=n[3],d=n[4],h=n[5],u=n[6],m=n[7],p=n[8],f=n[9],_=n[10],v=n[11],g=n[12],b=n[13],C=n[14],y=n[15];if("undefined"!==typeof Uint32Array){i=Array(160);for(var E=0;32>E;E++)i[E]=e[E]}else i=e;E=r;var A=o,k=c,w=l,S=d,D=h,x=u,L=m,B=p,T=f,F=_,I=v,$=g,M=b,O=C,N=y;for(e=0;80>e;e++){if(16>e)t=i[2*e],s=i[2*e+1];else{s=i[2*(e-15)];var R=i[2*(e-15)+1];t=(R<<31|s>>>1)^(R<<24|s>>>8)^s>>>7;var j=(s<<31|R>>>1)^(s<<24|R>>>8)^(s<<25|R>>>7);s=i[2*(e-2)];var P=i[2*(e-2)+1],H=(R=(P<<13|s>>>19)^(s<<3|P>>>29)^s>>>6,P=(s<<13|P>>>19)^(P<<3|s>>>29)^(s<<26|P>>>6),i[2*(e-7)]),U=i[2*(e-16)],q=i[2*(e-16)+1];s=j+i[2*(e-7)+1],t=t+H+(s>>>0<j>>>0?1:0),s+=P,t+=R+(s>>>0<P>>>0?1:0),s+=q,t+=U+(s>>>0<q>>>0?1:0)}i[2*e]=t|=0,i[2*e+1]=s|=0;H=B&F^~B&$;var z=T&I^~T&M,G=(P=E&k^E&S^k&S,A&w^A&D^w&D),K=(U=(A<<4|E>>>28)^(E<<30|A>>>2)^(E<<25|A>>>7),q=(E<<4|A>>>28)^(A<<30|E>>>2)^(A<<25|E>>>7),a[2*e]),V=a[2*e+1];R=N+((B<<18|T>>>14)^(B<<14|T>>>18)^(T<<23|B>>>9)),j=O+((T<<18|B>>>14)^(T<<14|B>>>18)^(B<<23|T>>>9))+(R>>>0<N>>>0?1:0),R=R+z,j=j+(H+(R>>>0<z>>>0?1:0)),R=R+V,j=j+(K+(R>>>0<V>>>0?1:0)),R=R+s|0,j=j+(t+(R>>>0<s>>>0?1:0));s=q+G,t=U+P+(s>>>0<q>>>0?1:0),O=$,N=M,$=F,M=I,F=B,I=T,T=L+R|0,B=x+j+(T>>>0<L>>>0?1:0)|0,x=S,L=D,S=k,D=w,k=E,w=A,A=R+s|0,E=j+t+(A>>>0<R>>>0?1:0)|0}o=n[1]=o+A|0,n[0]=r+E+(o>>>0<A>>>0?1:0)|0,l=n[3]=l+w|0,n[2]=c+k+(l>>>0<w>>>0?1:0)|0,h=n[5]=h+D|0,n[4]=d+S+(h>>>0<D>>>0?1:0)|0,m=n[7]=m+L|0,n[6]=u+x+(m>>>0<L>>>0?1:0)|0,f=n[9]=f+T|0,n[8]=p+B+(f>>>0<T>>>0?1:0)|0,v=n[11]=v+I|0,n[10]=_+F+(v>>>0<I>>>0?1:0)|0,b=n[13]=b+M|0,n[12]=g+$+(b>>>0<M>>>0?1:0)|0,y=n[15]=y+N|0,n[14]=C+O+(y>>>0<N>>>0?1:0)|0}},n.hash.sha1=function(e){e?(this.c=e.c.slice(0),this.h=e.h.slice(0),this.f=e.f):this.reset()},n.hash.sha1.hash=function(e){return(new n.hash.sha1).update(e).finalize()},n.hash.sha1.prototype={blockSize:512,reset:function(){return this.c=this.A.slice(0),this.h=[],this.f=0,this},update:function(e){"string"===typeof e&&(e=n.codec.utf8String.toBits(e));var t,s=this.h=n.bitArray.concat(this.h,e);if(t=this.f,e=this.f=t+n.bitArray.bitLength(e),9007199254740991<e)throw new n.exception.invalid("Cannot hash more than 2^53 - 1 bits");if("undefined"!==typeof Uint32Array){var i=new Uint32Array(s),a=0;for(t=this.blockSize+t-(this.blockSize+t&this.blockSize-1);t<=e;t+=this.blockSize)this.m(i.subarray(16*a,16*(a+1))),a+=1;s.splice(0,16*a)}else for(t=this.blockSize+t-(this.blockSize+t&this.blockSize-1);t<=e;t+=this.blockSize)this.m(s.splice(0,16));return this},finalize:function(){var e,t=this.h,s=this.c;t=n.bitArray.concat(t,[n.bitArray.partial(1,1)]);for(e=t.length+2;15&e;e++)t.push(0);for(t.push(Math.floor(this.f/4294967296)),t.push(0|this.f);t.length;)this.m(t.splice(0,16));return this.reset(),s},A:[1732584193,4023233417,2562383102,271733878,3285377520],i:[1518500249,1859775393,2400959708,3395469782],m:function(e){var t,s,i,n,a,r,o,c=this.c;if("undefined"!==typeof Uint32Array)for(o=Array(80),s=0;16>s;s++)o[s]=e[s];else o=e;for(s=c[0],i=c[1],n=c[2],a=c[3],r=c[4],e=0;79>=e;e++)16<=e&&(t=o[e-3]^o[e-8]^o[e-14]^o[e-16],o[e]=t<<1|t>>>31),t=19>=e?i&n|~i&a:39>=e?i^n^a:59>=e?i&n|i&a|n&a:79>=e?i^n^a:void 0,t=(s<<5|s>>>27)+t+r+o[e]+this.i[Math.floor(e/20)]|0,r=a,a=n,n=i<<30|i>>>2,i=s,s=t;c[0]=c[0]+s|0,c[1]=c[1]+i|0,c[2]=c[2]+n|0,c[3]=c[3]+a|0,c[4]=c[4]+r|0}},n.mode.ccm={name:"ccm",W:[],listenProgress:function(e){n.mode.ccm.W.push(e)},unListenProgress:function(e){e=n.mode.ccm.W.indexOf(e),-1<e&&n.mode.ccm.W.splice(e,1)},ha:function(e){var t,s=n.mode.ccm.W.slice();for(t=0;t<s.length;t+=1)s[t](e)},encrypt:function(e,t,s,i,a){var r,o=t.slice(0),c=n.bitArray,l=c.bitLength(s)/8,d=c.bitLength(o)/8;if(a=a||64,i=i||[],7>l)throw new n.exception.invalid("ccm: iv must be at least 7 bytes");for(r=2;4>r&&d>>>8*r;r++);return r<15-l&&(r=15-l),s=c.clamp(s,8*(15-r)),t=n.mode.ccm.R(e,t,s,i,a,r),o=n.mode.ccm.u(e,o,s,t,a,r),c.concat(o.data,o.tag)},decrypt:function(e,t,s,i,a){a=a||64,i=i||[];var r=n.bitArray,o=r.bitLength(s)/8,c=r.bitLength(t),l=r.clamp(t,c-a),d=r.bitSlice(t,c-a);c=(c-a)/8;if(7>o)throw new n.exception.invalid("ccm: iv must be at least 7 bytes");for(t=2;4>t&&c>>>8*t;t++);if(t<15-o&&(t=15-o),s=r.clamp(s,8*(15-t)),l=n.mode.ccm.u(e,l,s,d,a,t),e=n.mode.ccm.R(e,l.data,s,i,a,t),!r.equal(l.tag,e))throw new n.exception.corrupt("ccm: tag doesn't match");return l.data},oa:function(e,t,s,i,a,r){var o=[],c=n.bitArray,l=c.l;if(i=[c.partial(8,(t.length?64:0)|i-2<<2|r-1)],i=c.concat(i,s),i[3]|=a,i=e.encrypt(i),t.length)for(s=c.bitLength(t)/8,65279>=s?o=[c.partial(16,s)]:4294967295>=s&&(o=c.concat([c.partial(16,65534)],[s])),o=c.concat(o,t),t=0;t<o.length;t+=4)i=e.encrypt(l(i,o.slice(t,t+4).concat([0,0,0])));return i},R:function(e,t,s,i,a,r){var o=n.bitArray,c=o.l;if(a/=8,a%2||4>a||16<a)throw new n.exception.invalid("ccm: invalid tag length");if(4294967295<i.length||4294967295<t.length)throw new n.exception.bug("ccm: can't deal with 4GiB or more data");for(s=n.mode.ccm.oa(e,i,s,a,o.bitLength(t)/8,r),i=0;i<t.length;i+=4)s=e.encrypt(c(s,t.slice(i,i+4).concat([0,0,0])));return o.clamp(s,8*a)},u:function(e,t,s,i,a,r){var o,c=n.bitArray;o=c.l;var l=t.length,d=c.bitLength(t),h=l/50,u=h;if(s=c.concat([c.partial(8,r-1)],s).concat([0,0,0]).slice(0,4),i=c.bitSlice(o(i,e.encrypt(s)),0,a),!l)return{tag:i,data:[]};for(o=0;o<l;o+=4)o>h&&(n.mode.ccm.ha(o/l),h+=u),s[3]++,a=e.encrypt(s),t[o]^=a[0],t[o+1]^=a[1],t[o+2]^=a[2],t[o+3]^=a[3];return{tag:i,data:c.clamp(t,d)}}},void 0===n.beware&&(n.beware={}),n.beware["CTR mode is dangerous because it doesn't protect message integrity."]=function(){n.mode.ctr={name:"ctr",encrypt:function(e,t,s,i){return n.mode.ctr.ga(e,t,s,i)},decrypt:function(e,t,s,i){return n.mode.ctr.ga(e,t,s,i)},ga:function(e,t,s,i){var a,r,o;if(i&&i.length)throw new n.exception.invalid("ctr can't authenticate data");if(128!==n.bitArray.bitLength(s))throw new n.exception.invalid("ctr iv must be 128 bits");if(!(i=t.length))return[];for(s=s.slice(0),a=t.slice(0),t=n.bitArray.bitLength(a),o=0;o<i;o+=4)r=e.encrypt(s),a[o]^=r[0],a[o+1]^=r[1],a[o+2]^=r[2],a[o+3]^=r[3],s[3]++;return n.bitArray.clamp(a,t)}}},void 0===n.beware&&(n.beware={}),n.beware["CBC mode is dangerous because it doesn't protect message integrity."]=function(){n.mode.cbc={name:"cbc",encrypt:function(e,t,s,i){if(i&&i.length)throw new n.exception.invalid("cbc can't authenticate data");if(128!==n.bitArray.bitLength(s))throw new n.exception.invalid("cbc iv must be 128 bits");var a=n.bitArray,r=a.l,o=a.bitLength(t),c=0,l=[];if(7&o)throw new n.exception.invalid("pkcs#5 padding only works for multiples of a byte");for(i=0;c+128<=o;i+=4,c+=128)s=e.encrypt(r(s,t.slice(i,i+4))),l.splice(i,0,s[0],s[1],s[2],s[3]);return o=16843009*(16-(o>>3&15)),s=e.encrypt(r(s,a.concat(t,[o,o,o,o]).slice(i,i+4))),l.splice(i,0,s[0],s[1],s[2],s[3]),l},decrypt:function(e,t,s,i){if(i&&i.length)throw new n.exception.invalid("cbc can't authenticate data");if(128!==n.bitArray.bitLength(s))throw new n.exception.invalid("cbc iv must be 128 bits");if(127&n.bitArray.bitLength(t)||!t.length)throw new n.exception.corrupt("cbc ciphertext must be a positive multiple of the block size");var a,r=n.bitArray,o=r.l,c=[];for(i=0;i<t.length;i+=4)a=t.slice(i,i+4),s=o(s,e.decrypt(a)),c.splice(i,0,s[0],s[1],s[2],s[3]),s=a;if(a=255&c[i-1],0===a||16<a)throw new n.exception.corrupt("pkcs#5 padding corrupt");if(s=16843009*a,!r.equal(r.bitSlice([s,s,s,s],0,8*a),r.bitSlice(c,32*c.length-8*a,32*c.length)))throw new n.exception.corrupt("pkcs#5 padding corrupt");return r.bitSlice(c,0,32*c.length-8*a)}}},n.mode.ocb2={name:"ocb2",encrypt:function(e,t,s,i,a,r){if(128!==n.bitArray.bitLength(s))throw new n.exception.invalid("ocb iv must be 128 bits");var o,c=n.mode.ocb2.U,l=n.bitArray,d=l.l,h=[0,0,0,0];s=c(e.encrypt(s));var u,m=[];for(i=i||[],a=a||64,o=0;o+4<t.length;o+=4)u=t.slice(o,o+4),h=d(h,u),m=m.concat(d(s,e.encrypt(d(s,u)))),s=c(s);return u=t.slice(o),t=l.bitLength(u),o=e.encrypt(d(s,[0,0,0,t])),u=l.clamp(d(u.concat([0,0,0]),o),t),h=d(h,d(u.concat([0,0,0]),o)),h=e.encrypt(d(h,d(s,c(s)))),i.length&&(h=d(h,r?i:n.mode.ocb2.pmac(e,i))),m.concat(l.concat(u,l.clamp(h,a)))},decrypt:function(e,t,s,i,a,r){if(128!==n.bitArray.bitLength(s))throw new n.exception.invalid("ocb iv must be 128 bits");a=a||64;var o,c,l=n.mode.ocb2.U,d=n.bitArray,h=d.l,u=[0,0,0,0],m=l(e.encrypt(s)),p=n.bitArray.bitLength(t)-a,f=[];for(i=i||[],s=0;s+4<p/32;s+=4)o=h(m,e.decrypt(h(m,t.slice(s,s+4)))),u=h(u,o),f=f.concat(o),m=l(m);if(c=p-32*s,o=e.encrypt(h(m,[0,0,0,c])),o=h(o,d.clamp(t.slice(s),c).concat([0,0,0])),u=h(u,o),u=e.encrypt(h(u,h(m,l(m)))),i.length&&(u=h(u,r?i:n.mode.ocb2.pmac(e,i))),!d.equal(d.clamp(u,a),d.bitSlice(t,p)))throw new n.exception.corrupt("ocb: tag doesn't match");return f.concat(d.clamp(o,c))},pmac:function(e,t){var s,i=n.mode.ocb2.U,a=n.bitArray,r=a.l,o=[0,0,0,0],c=e.encrypt([0,0,0,0]);c=r(c,i(i(c)));for(s=0;s+4<t.length;s+=4)c=i(c),o=r(o,e.encrypt(r(c,t.slice(s,s+4))));return s=t.slice(s),128>a.bitLength(s)&&(c=r(c,i(c)),s=a.concat(s,[-2147483648,0,0,0])),o=r(o,s),e.encrypt(r(i(r(c,i(c))),o))},U:function(e){return[e[0]<<1^e[1]>>>31,e[1]<<1^e[2]>>>31,e[2]<<1^e[3]>>>31,e[3]<<1^135*(e[0]>>>31)]}},n.mode.ocb2progressive={createEncryptor:function(e,t,s,i,a){if(128!==n.bitArray.bitLength(t))throw new n.exception.invalid("ocb iv must be 128 bits");var r,o,c,l,d=n.mode.ocb2.U,h=n.bitArray,u=h.l,m=[0,0,0,0],p=d(e.encrypt(t)),f=[];return s=s||[],i=i||64,{process:function(t){if(0==n.bitArray.bitLength(t))return[];var s=[];for(f=f.concat(t),r=0;r+4<f.length;r+=4)o=f.slice(r,r+4),m=u(m,o),s=s.concat(u(p,e.encrypt(u(p,o)))),p=d(p);return f=f.slice(r),s},finalize:function(){return o=f,c=h.bitLength(o),l=e.encrypt(u(p,[0,0,0,c])),o=h.clamp(u(o.concat([0,0,0]),l),c),m=u(m,u(o.concat([0,0,0]),l)),m=e.encrypt(u(m,u(p,d(p)))),s.length&&(m=u(m,a?s:n.mode.ocb2.pmac(e,s))),h.concat(o,h.clamp(m,i))}}},createDecryptor:function(e,t,s,i,a){if(128!==n.bitArray.bitLength(t))throw new n.exception.invalid("ocb iv must be 128 bits");i=i||64;var r,o,c,l,d=n.mode.ocb2.U,h=n.bitArray,u=h.l,m=[0,0,0,0],p=d(e.encrypt(t)),f=[];return s=s||[],{process:function(t){if(0==t.length)return[];var s=[];for(f=f.concat(t),t=n.bitArray.bitLength(f),r=0;r+4<(t-i)/32;r+=4)o=u(p,e.decrypt(u(p,f.slice(r,r+4)))),m=u(m,o),s=s.concat(o),p=d(p);return f=f.slice(r),s},finalize:function(){if(c=n.bitArray.bitLength(f)-i,l=e.encrypt(u(p,[0,0,0,c])),o=u(l,h.clamp(f,c).concat([0,0,0])),m=u(m,o),m=e.encrypt(u(m,u(p,d(p)))),s.length&&(m=u(m,a?s:n.mode.ocb2.pmac(e,s))),!h.equal(h.clamp(m,i),h.bitSlice(f,c)))throw new n.exception.corrupt("ocb: tag doesn't match");return h.clamp(o,c)}}}},n.mode.gcm={name:"gcm",encrypt:function(e,t,s,i,a){var r=t.slice(0);return t=n.bitArray,i=i||[],e=n.mode.gcm.u(!0,e,r,i,s,a||128),t.concat(e.data,e.tag)},decrypt:function(e,t,s,i,a){var r=t.slice(0),o=n.bitArray,c=o.bitLength(r);if(a=a||128,i=i||[],a<=c?(t=o.bitSlice(r,c-a),r=o.bitSlice(r,0,c-a)):(t=r,r=[]),e=n.mode.gcm.u(!1,e,r,i,s,a),!o.equal(e.tag,t))throw new n.exception.corrupt("gcm: tag doesn't match");return e.data},Da:function(e,t){var s,i,a,r,o,c=n.bitArray.l;for(a=[0,0,0,0],r=t.slice(0),s=0;128>s;s++){for((i=0!==(e[Math.floor(s/32)]&1<<31-s%32))&&(a=c(a,r)),o=0!==(1&r[3]),i=3;0<i;i--)r[i]=r[i]>>>1|(1&r[i-1])<<31;r[0]>>>=1,o&&(r[0]^=-520093696)}return a},J:function(e,t,s){var i,a=s.length;for(t=t.slice(0),i=0;i<a;i+=4)t[0]^=4294967295&s[i],t[1]^=4294967295&s[i+1],t[2]^=4294967295&s[i+2],t[3]^=4294967295&s[i+3],t=n.mode.gcm.Da(t,e);return t},u:function(e,t,s,i,a,r){var o,c,l,d,h,u,m,p,f=n.bitArray;for(u=s.length,m=f.bitLength(s),p=f.bitLength(i),c=f.bitLength(a),o=t.encrypt([0,0,0,0]),96===c?(a=a.slice(0),a=f.concat(a,[1])):(a=n.mode.gcm.J(o,[0,0,0,0],a),a=n.mode.gcm.J(o,a,[0,0,Math.floor(c/4294967296),4294967295&c])),c=n.mode.gcm.J(o,[0,0,0,0],i),h=a.slice(0),i=c.slice(0),e||(i=n.mode.gcm.J(o,c,s)),d=0;d<u;d+=4)h[3]++,l=t.encrypt(h),s[d]^=l[0],s[d+1]^=l[1],s[d+2]^=l[2],s[d+3]^=l[3];return s=f.clamp(s,m),e&&(i=n.mode.gcm.J(o,c,s)),e=[Math.floor(p/4294967296),4294967295&p,Math.floor(m/4294967296),4294967295&m],i=n.mode.gcm.J(o,i,e),l=t.encrypt(a),i[0]^=l[0],i[1]^=l[1],i[2]^=l[2],i[3]^=l[3],{tag:f.bitSlice(i,0,r),data:s}}},n.misc.hmac=function(e,t){this.ka=t=t||n.hash.sha256;var s,i=[[],[]],a=t.prototype.blockSize/32;for(this.P=[new t,new t],e.length>a&&(e=t.hash(e)),s=0;s<a;s++)i[0][s]=909522486^e[s],i[1][s]=1549556828^e[s];this.P[0].update(i[0]),this.P[1].update(i[1]),this.ea=new t(this.P[0])},n.misc.hmac.prototype.encrypt=n.misc.hmac.prototype.mac=function(e){if(this.ta)throw new n.exception.invalid("encrypt on already updated hmac called!");return this.update(e),this.digest(e)},n.misc.hmac.prototype.reset=function(){this.ea=new this.ka(this.P[0]),this.ta=!1},n.misc.hmac.prototype.update=function(e){this.ta=!0,this.ea.update(e)},n.misc.hmac.prototype.digest=function(){var e=this.ea.finalize();e=new this.ka(this.P[1]).update(e).finalize();return this.reset(),e},n.misc.pbkdf2=function(e,t,s,i,a){if(s=s||1e4,0>i||0>s)throw new n.exception.invalid("invalid params to pbkdf2");"string"===typeof e&&(e=n.codec.utf8String.toBits(e)),"string"===typeof t&&(t=n.codec.utf8String.toBits(t)),a=a||n.misc.hmac,e=new a(e);var r,o,c,l,d=[],h=n.bitArray;for(l=1;32*d.length<(i||1);l++){for(a=r=e.encrypt(h.concat(t,[l])),o=1;o<s;o++)for(r=e.encrypt(r),c=0;c<r.length;c++)a[c]^=r[c];d=d.concat(a)}return i&&(d=h.clamp(d,i)),d},n.misc.scrypt=function(e,t,s,i,a,r,o){var c=Math.pow(2,32)-1,l=n.misc.scrypt;if(s=s||16384,i=i||8,a=a||1,i*a>=Math.pow(2,30))throw n.exception.invalid("The parameters r, p must satisfy r * p < 2^30");if(2>s||s&0!=s-1)throw n.exception.invalid("The parameter N must be a power of 2.");if(s>c/128/i)throw n.exception.invalid("N too big.");if(i>c/128/a)throw n.exception.invalid("r too big.");for(t=n.misc.pbkdf2(e,t,1,128*a*i*8,o),i=t.length/a,l.reverse(t),c=0;c<a;c++){var d=t.slice(c*i,(c+1)*i);l.blockcopy(l.ROMix(d,s),0,t,c*i)}return l.reverse(t),n.misc.pbkdf2(e,t,1,r,o)},n.misc.scrypt.salsa20Core=function(e,t){function s(e,t){return e<<t|e>>>32-t}for(var i=e.slice(0),n=t;0<n;n-=2)i[4]^=s(i[0]+i[12],7),i[8]^=s(i[4]+i[0],9),i[12]^=s(i[8]+i[4],13),i[0]^=s(i[12]+i[8],18),i[9]^=s(i[5]+i[1],7),i[13]^=s(i[9]+i[5],9),i[1]^=s(i[13]+i[9],13),i[5]^=s(i[1]+i[13],18),i[14]^=s(i[10]+i[6],7),i[2]^=s(i[14]+i[10],9),i[6]^=s(i[2]+i[14],13),i[10]^=s(i[6]+i[2],18),i[3]^=s(i[15]+i[11],7),i[7]^=s(i[3]+i[15],9),i[11]^=s(i[7]+i[3],13),i[15]^=s(i[11]+i[7],18),i[1]^=s(i[0]+i[3],7),i[2]^=s(i[1]+i[0],9),i[3]^=s(i[2]+i[1],13),i[0]^=s(i[3]+i[2],18),i[6]^=s(i[5]+i[4],7),i[7]^=s(i[6]+i[5],9),i[4]^=s(i[7]+i[6],13),i[5]^=s(i[4]+i[7],18),i[11]^=s(i[10]+i[9],7),i[8]^=s(i[11]+i[10],9),i[9]^=s(i[8]+i[11],13),i[10]^=s(i[9]+i[8],18),i[12]^=s(i[15]+i[14],7),i[13]^=s(i[12]+i[15],9),i[14]^=s(i[13]+i[12],13),i[15]^=s(i[14]+i[13],18);for(n=0;16>n;n++)e[n]=i[n]+e[n]},n.misc.scrypt.blockMix=function(e){for(var t=e.slice(-16),s=[],i=e.length/16,a=n.misc.scrypt,r=0;r<i;r++)a.blockxor(e,16*r,t,0,16),a.salsa20Core(t,8),0==(1&r)?a.blockcopy(t,0,s,8*r):a.blockcopy(t,0,s,8*(r^1+i));return s},n.misc.scrypt.ROMix=function(e,t){for(var s=e.slice(0),i=[],a=n.misc.scrypt,r=0;r<t;r++)i.push(s.slice(0)),s=a.blockMix(s);for(r=0;r<t;r++)a.blockxor(i[s[s.length-16]&t-1],0,s,0),s=a.blockMix(s);return s},n.misc.scrypt.reverse=function(e){for(var t in e){var s=255&e[t];s=s<<8|e[t]>>>8&255,s=s<<8|e[t]>>>16&255,s=s<<8|e[t]>>>24&255;e[t]=s}},n.misc.scrypt.blockcopy=function(e,t,s,i,n){var a;for(n=n||e.length-t,a=0;a<n;a++)s[i+a]=0|e[t+a]},n.misc.scrypt.blockxor=function(e,t,s,i,n){var a;for(n=n||e.length-t,a=0;a<n;a++)s[i+a]=s[i+a]^e[t+a]|0},n.prng=function(e){this.s=[new n.hash.sha256],this.K=[0],this.da=0,this.X={},this.ca=0,this.ia={},this.qa=this.B=this.L=this.Aa=0,this.i=[0,0,0,0,0,0,0,0],this.F=[0,0,0,0],this.aa=void 0,this.ba=e,this.V=!1,this.$={progress:{},seeded:{}},this.O=this.za=0,this.Y=1,this.Z=2,this.va=65536,this.fa=[0,48,64,96,128,192,256,384,512,768,1024],this.wa=3e4,this.ua=80},n.prng.prototype={randomWords:function(e,t){var s,i,a=[];if(s=this.isReady(t),s===this.O)throw new n.exception.notReady("generator isn't seeded");if(s&this.Z){s=!(s&this.Y),i=[];var r,o=0;for(this.qa=i[0]=(new Date).valueOf()+this.wa,r=0;16>r;r++)i.push(4294967296*Math.random()|0);for(r=0;r<this.s.length&&(i=i.concat(this.s[r].finalize()),o+=this.K[r],this.K[r]=0,s||!(this.da&1<<r));r++);for(this.da>=1<<this.s.length&&(this.s.push(new n.hash.sha256),this.K.push(0)),this.B-=o,o>this.L&&(this.L=o),this.da++,this.i=n.hash.sha256.hash(this.i.concat(i)),this.aa=new n.cipher.aes(this.i),s=0;4>s&&(this.F[s]=this.F[s]+1|0,!this.F[s]);s++);}for(s=0;s<e;s+=4)0===(s+1)%this.va&&c(this),i=l(this),a.push(i[0],i[1],i[2],i[3]);return c(this),a.slice(0,e)},setDefaultParanoia:function(e,t){if(0===e&&"Setting paranoia=0 will ruin your security; use it only for testing"!==t)throw new n.exception.invalid("Setting paranoia=0 will ruin your security; use it only for testing");this.ba=e},addEntropy:function(e,t,s){s=s||"user";var a,o,c=(new Date).valueOf(),l=this.X[s],d=this.isReady(),h=0;switch(a=this.ia[s],void 0===a&&(a=this.ia[s]=this.Aa++),void 0===l&&(l=this.X[s]=0),this.X[s]=(this.X[s]+1)%this.s.length,Object(i["a"])(e)){case"number":void 0===t&&(t=1),this.s[l].update([a,this.ca++,1,t,c,1,0|e]);break;case"object":if(s=Object.prototype.toString.call(e),"[object Uint32Array]"===s){for(o=[],s=0;s<e.length;s++)o.push(e[s]);e=o}else for("[object Array]"!==s&&(h=1),s=0;s<e.length&&!h;s++)"number"!==typeof e[s]&&(h=1);if(!h){if(void 0===t)for(s=t=0;s<e.length;s++)for(o=e[s];0<o;)t++,o>>>=1;this.s[l].update([a,this.ca++,2,t,c,e.length].concat(e))}break;case"string":void 0===t&&(t=e.length),this.s[l].update([a,this.ca++,3,t,c,e.length]),this.s[l].update(e);break;default:h=1}if(h)throw new n.exception.bug("random: addEntropy only supports number, array of numbers or string");this.K[l]+=t,this.B+=t,d===this.O&&(this.isReady()!==this.O&&r("seeded",Math.max(this.L,this.B)),r("progress",this.getProgress()))},isReady:function(e){return e=this.fa[void 0!==e?e:this.ba],this.L&&this.L>=e?this.K[0]>this.ua&&(new Date).valueOf()>this.qa?this.Z|this.Y:this.Y:this.B>=e?this.Z|this.O:this.O},getProgress:function(e){return e=this.fa[e||this.ba],this.L>=e||this.B>e?1:this.B/e},startCollectors:function(){if(!this.V){if(this.j={loadTimeCollector:d(this,this.Ia),mouseCollector:d(this,this.Ja),keyboardCollector:d(this,this.Ga),accelerometerCollector:d(this,this.xa),touchCollector:d(this,this.La)},window.addEventListener)window.addEventListener("load",this.j.loadTimeCollector,!1),window.addEventListener("mousemove",this.j.mouseCollector,!1),window.addEventListener("keypress",this.j.keyboardCollector,!1),window.addEventListener("devicemotion",this.j.accelerometerCollector,!1),window.addEventListener("touchmove",this.j.touchCollector,!1);else{if(!document.attachEvent)throw new n.exception.bug("can't attach event");document.attachEvent("onload",this.j.loadTimeCollector),document.attachEvent("onmousemove",this.j.mouseCollector),document.attachEvent("keypress",this.j.keyboardCollector)}this.V=!0}},stopCollectors:function(){this.V&&(window.removeEventListener?(window.removeEventListener("load",this.j.loadTimeCollector,!1),window.removeEventListener("mousemove",this.j.mouseCollector,!1),window.removeEventListener("keypress",this.j.keyboardCollector,!1),window.removeEventListener("devicemotion",this.j.accelerometerCollector,!1),window.removeEventListener("touchmove",this.j.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.j.loadTimeCollector),document.detachEvent("onmousemove",this.j.mouseCollector),document.detachEvent("keypress",this.j.keyboardCollector)),this.V=!1)},addEventListener:function(e,t){this.$[e][this.za++]=t},removeEventListener:function(e,t){var s,i,n=this.$[e],a=[];for(i in n)n.hasOwnProperty(i)&&n[i]===t&&a.push(i);for(s=0;s<a.length;s++)i=a[s],delete n[i]},Ga:function(){o(this,1)},Ja:function(e){var t,s;try{t=e.x||e.clientX||e.offsetX||0,s=e.y||e.clientY||e.offsetY||0}catch(i){s=t=0}0!=t&&0!=s&&this.addEntropy([t,s],2,"mouse"),o(this,0)},La:function(e){e=e.touches[0]||e.changedTouches[0],this.addEntropy([e.pageX||e.clientX,e.pageY||e.clientY],1,"touch"),o(this,0)},Ia:function(){o(this,2)},xa:function(e){if(e=e.accelerationIncludingGravity.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z,window.orientation){var t=window.orientation;"number"===typeof t&&this.addEntropy(t,1,"accelerometer")}e&&this.addEntropy(e,2,"accelerometer"),o(this,0)}},n.random=new n.prng(6);e:try{var h,u,m,p;if(p=e.exports){var f;try{f=s("1c46")}catch(v){f=null}p=u=f}if(p&&u.randomBytes)h=u.randomBytes(128),h=new Uint32Array(new Uint8Array(h).buffer),n.random.addEntropy(h,1024,"crypto['randomBytes']");else if("undefined"!==typeof window&&"undefined"!==typeof Uint32Array){if(m=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(m);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break e;window.msCrypto.getRandomValues(m)}n.random.addEntropy(m,1024,"crypto['getRandomValues']")}}catch(v){"undefined"!==typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(v))}n.json={defaults:{v:1,iter:1e4,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},Ca:function(e,t,s,i){s=s||{},i=i||{};var a,r=n.json,o=r.C({iv:n.random.randomWords(4,0)},r.defaults);if(r.C(o,s),s=o.adata,"string"===typeof o.salt&&(o.salt=n.codec.base64.toBits(o.salt)),"string"===typeof o.iv&&(o.iv=n.codec.base64.toBits(o.iv)),!n.mode[o.mode]||!n.cipher[o.cipher]||"string"===typeof e&&100>=o.iter||64!==o.ts&&96!==o.ts&&128!==o.ts||128!==o.ks&&192!==o.ks&&256!==o.ks||2>o.iv.length||4<o.iv.length)throw new n.exception.invalid("json encrypt: invalid parameters");return"string"===typeof e?(a=n.misc.cachedPbkdf2(e,o),e=a.key.slice(0,o.ks/32),o.salt=a.salt):n.ecc&&e instanceof n.ecc.elGamal.publicKey&&(a=e.kem(),o.kemtag=a.tag,e=a.key.slice(0,o.ks/32)),"string"===typeof t&&(t=n.codec.utf8String.toBits(t)),"string"===typeof s&&(o.adata=s=n.codec.utf8String.toBits(s)),a=new n.cipher[o.cipher](e),r.C(i,o),i.key=e,o.ct="ccm"===o.mode&&n.arrayBuffer&&n.arrayBuffer.ccm&&t instanceof ArrayBuffer?n.arrayBuffer.ccm.encrypt(a,t,o.iv,s,o.ts):n.mode[o.mode].encrypt(a,t,o.iv,s,o.ts),o},encrypt:function(e,t,s,i){var a=n.json,r=a.Ca.apply(a,arguments);return a.encode(r)},Ba:function(e,t,s,i){s=s||{},i=i||{};var a,r,o=n.json;if(t=o.C(o.C(o.C({},o.defaults),t),s,!0),a=t.adata,"string"===typeof t.salt&&(t.salt=n.codec.base64.toBits(t.salt)),"string"===typeof t.iv&&(t.iv=n.codec.base64.toBits(t.iv)),!n.mode[t.mode]||!n.cipher[t.cipher]||"string"===typeof e&&100>=t.iter||64!==t.ts&&96!==t.ts&&128!==t.ts||128!==t.ks&&192!==t.ks&&256!==t.ks||!t.iv||2>t.iv.length||4<t.iv.length)throw new n.exception.invalid("json decrypt: invalid parameters");return"string"===typeof e?(r=n.misc.cachedPbkdf2(e,t),e=r.key.slice(0,t.ks/32),t.salt=r.salt):n.ecc&&e instanceof n.ecc.elGamal.secretKey&&(e=e.unkem(n.codec.base64.toBits(t.kemtag)).slice(0,t.ks/32)),"string"===typeof a&&(a=n.codec.utf8String.toBits(a)),r=new n.cipher[t.cipher](e),a="ccm"===t.mode&&n.arrayBuffer&&n.arrayBuffer.ccm&&t.ct instanceof ArrayBuffer?n.arrayBuffer.ccm.decrypt(r,t.ct,t.iv,t.tag,a,t.ts):n.mode[t.mode].decrypt(r,t.ct,t.iv,a,t.ts),o.C(i,t),i.key=e,1===s.raw?a:n.codec.utf8String.fromBits(a)},decrypt:function(e,t,s,i){var a=n.json;return a.Ba(e,a.decode(t),s,i)},encode:function(e){var t,s="{",a="";for(t in e)if(e.hasOwnProperty(t)){if(!t.match(/^[a-z0-9]+$/i))throw new n.exception.invalid("json encode: invalid property name");switch(s+=a+'"'+t+'":',a=",",Object(i["a"])(e[t])){case"number":case"boolean":s+=e[t];break;case"string":s+='"'+escape(e[t])+'"';break;case"object":s+='"'+n.codec.base64.fromBits(e[t],0)+'"';break;default:throw new n.exception.bug("json encode: unsupported type")}}return s+"}"},decode:function(e){if(e=e.replace(/\s/g,""),!e.match(/^\{.*\}$/))throw new n.exception.invalid("json decode: this isn't json!");e=e.replace(/^\{|\}$/g,"").split(/,/);var t,s,i={};for(t=0;t<e.length;t++){if(!(s=e[t].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new n.exception.invalid("json decode: this isn't json!");null!=s[3]?i[s[2]]=parseInt(s[3],10):null!=s[4]?i[s[2]]=s[2].match(/^(ct|adata|salt|iv)$/)?n.codec.base64.toBits(s[4]):unescape(s[4]):null!=s[5]&&(i[s[2]]="true"===s[5])}return i},C:function(e,t,s){if(void 0===e&&(e={}),void 0===t)return e;for(var i in t)if(t.hasOwnProperty(i)){if(s&&void 0!==e[i]&&e[i]!==t[i])throw new n.exception.invalid("required parameter overridden");e[i]=t[i]}return e},Na:function(e,t){var s,i={};for(s in e)e.hasOwnProperty(s)&&e[s]!==t[s]&&(i[s]=e[s]);return i},Ma:function(e,t){var s,i={};for(s=0;s<t.length;s++)void 0!==e[t[s]]&&(i[t[s]]=e[t[s]]);return i}},n.encrypt=n.json.encrypt,n.decrypt=n.json.decrypt,n.misc.Ka={},n.misc.cachedPbkdf2=function(e,t){var s,i=n.misc.Ka;return t=t||{},s=t.iter||1e3,i=i[e]=i[e]||{},s=i[s]=i[s]||{firstSalt:t.salt&&t.salt.length?t.salt.slice(0):n.random.randomWords(2,0)},i=void 0===t.salt?s.firstSalt:t.salt,s[i]=s[i]||n.misc.pbkdf2(e,i,t.iter),{key:s[i].slice(0),salt:i.slice(0)}},n.bn=function(e){this.initWith(e)},n.bn.prototype={radix:24,maxMul:8,o:n.bn,copy:function(){return new this.o(this)},initWith:function(e){var t,s=0;switch(Object(i["a"])(e)){case"object":this.limbs=e.limbs.slice(0);break;case"number":this.limbs=[e],this.normalize();break;case"string":for(e=e.replace(/^0x/,""),this.limbs=[],t=this.radix/4,s=0;s<e.length;s+=t)this.limbs.push(parseInt(e.substring(Math.max(e.length-s-t,0),e.length-s),16));break;default:this.limbs=[0]}return this},equals:function(e){"number"===typeof e&&(e=new this.o(e));var t,s=0;for(this.fullReduce(),e.fullReduce(),t=0;t<this.limbs.length||t<e.limbs.length;t++)s|=this.getLimb(t)^e.getLimb(t);return 0===s},getLimb:function(e){return e>=this.limbs.length?0:this.limbs[e]},greaterEquals:function(e){"number"===typeof e&&(e=new this.o(e));var t,s,i,n=0,a=0;for(t=Math.max(this.limbs.length,e.limbs.length)-1;0<=t;t--)s=this.getLimb(t),i=e.getLimb(t),a|=i-s&~n,n|=s-i&~a;return(a|~n)>>>31},toString:function(){this.fullReduce();var e,t,s="",i=this.limbs;for(e=0;e<this.limbs.length;e++){for(t=i[e].toString(16);e<this.limbs.length-1&&6>t.length;)t="0"+t;s=t+s}return"0x"+s},addM:function(e){"object"!==Object(i["a"])(e)&&(e=new this.o(e));var t=this.limbs,s=e.limbs;for(e=t.length;e<s.length;e++)t[e]=0;for(e=0;e<s.length;e++)t[e]+=s[e];return this},doubleM:function(){var e,t,s=0,i=this.radix,n=this.radixMask,a=this.limbs;for(e=0;e<a.length;e++)t=a[e],t=t+t+s,a[e]=t&n,s=t>>i;return s&&a.push(s),this},halveM:function(){var e,t,s=0,i=this.radix,n=this.limbs;for(e=n.length-1;0<=e;e--)t=n[e],n[e]=t+s>>1,s=(1&t)<<i;return n[n.length-1]||n.pop(),this},subM:function(e){"object"!==Object(i["a"])(e)&&(e=new this.o(e));var t=this.limbs,s=e.limbs;for(e=t.length;e<s.length;e++)t[e]=0;for(e=0;e<s.length;e++)t[e]-=s[e];return this},mod:function(e){var t=!this.greaterEquals(new n.bn(0));e=new n.bn(e).normalize();var s=new n.bn(this).normalize(),i=0;for(t&&(s=new n.bn(0).subM(s).normalize());s.greaterEquals(e);i++)e.doubleM();for(t&&(s=e.sub(s).normalize());0<i;i--)e.halveM(),s.greaterEquals(e)&&s.subM(e).normalize();return s.trim()},inverseMod:function(e){var t,s=new n.bn(1),i=new n.bn(0),a=new n.bn(this),r=new n.bn(e),o=1;if(!(1&e.limbs[0]))throw new n.exception.invalid("inverseMod: p must be odd");do{for(1&a.limbs[0]&&(a.greaterEquals(r)||(t=a,a=r,r=t,t=s,s=i,i=t),a.subM(r),a.normalize(),s.greaterEquals(i)||s.addM(e),s.subM(i)),a.halveM(),1&s.limbs[0]&&s.addM(e),s.normalize(),s.halveM(),t=o=0;t<a.limbs.length;t++)o|=a.limbs[t]}while(o);if(!r.equals(1))throw new n.exception.invalid("inverseMod: p and x must be relatively prime");return i},add:function(e){return this.copy().addM(e)},sub:function(e){return this.copy().subM(e)},mul:function(e){"number"===typeof e&&(e=new this.o(e));var t,s,i=this.limbs,n=e.limbs,a=i.length,r=n.length,o=new this.o,c=o.limbs,l=this.maxMul;for(t=0;t<this.limbs.length+e.limbs.length+1;t++)c[t]=0;for(t=0;t<a;t++){for(s=i[t],e=0;e<r;e++)c[t+e]+=s*n[e];--l||(l=this.maxMul,o.cnormalize())}return o.cnormalize().reduce()},square:function(){return this.mul(this)},power:function(e){e=new n.bn(e).normalize().trim().limbs;var t,s,i=new this.o(1),a=this;for(t=0;t<e.length;t++)for(s=0;s<this.radix;s++){if(e[t]&1<<s&&(i=i.mul(a)),t==e.length-1&&0==e[t]>>s+1)break;a=a.square()}return i},mulmod:function(e,t){return this.mod(t).mul(e.mod(t)).mod(t)},powermod:function(e,t){if(e=new n.bn(e),t=new n.bn(t),1==(1&t.limbs[0])){var s=this.montpowermod(e,t);if(0!=s)return s}var i,a=e.normalize().trim().limbs,r=new this.o(1),o=this;for(s=0;s<a.length;s++)for(i=0;i<this.radix;i++){if(a[s]&1<<i&&(r=r.mulmod(o,t)),s==a.length-1&&0==a[s]>>i+1)break;o=o.mulmod(o,t)}return r},montpowermod:function(e,t){function s(e,t){var s=t%e.radix;return(e.limbs[Math.floor(t/e.radix)]&1<<s)>>s}function i(e,s){var i,n,a=(1<<c+1)-1;for(i=e.mul(s),n=i.mul(p),n.limbs=n.limbs.slice(0,o.limbs.length),n.limbs.length==o.limbs.length&&(n.limbs[o.limbs.length-1]&=a),n=n.mul(t),n=i.add(n).normalize().trim(),n.limbs=n.limbs.slice(o.limbs.length-1),i=0;i<n.limbs.length;i++)0<i&&(n.limbs[i-1]|=(n.limbs[i]&a)<<d-c-1),n.limbs[i]>>=c+1;return n.greaterEquals(t)&&n.subM(t),n}e=new n.bn(e).normalize().trim(),t=new n.bn(t);var a,r,o,c,l,d=this.radix,h=new this.o(1);for(a=this.copy(),l=e.bitLength(),o=new n.bn({limbs:t.copy().normalize().trim().limbs.map((function(){return 0}))}),c=this.radix;0<c;c--)if(1==(t.limbs[t.limbs.length-1]>>c&1)){o.limbs[o.limbs.length-1]=1<<c;break}if(0==l)return this;l=18>l?1:48>l?3:144>l?4:768>l?5:6;var u=o.copy(),m=t.copy();r=new n.bn(1);for(var p=new n.bn(0),f=o.copy();f.greaterEquals(1);)f.halveM(),0==(1&r.limbs[0])?(r.halveM(),p.halveM()):(r.addM(m),r.halveM(),p.halveM(),p.addM(u));if(r=r.normalize(),p=p.normalize(),u.doubleM(),m=u.mulmod(u,t),!u.mul(r).sub(t.mul(p)).equals(1))return!1;for(a=i(a,m),h=i(h,m),u={},r=(1<<l-1)-1,u[1]=a.copy(),u[2]=i(a,a),a=1;a<=r;a++)u[2*a+1]=i(u[2*a-1],u[2]);for(a=e.bitLength()-1;0<=a;)if(0==s(e,a))h=i(h,h),--a;else{for(m=a-l+1;0==s(e,m);)m++;for(f=0,r=m;r<=a;r++)f+=s(e,r)<<r-m,h=i(h,h);h=i(h,u[f]),a=m-1}return i(h,1)},trim:function(){var e,t=this.limbs;do{e=t.pop()}while(t.length&&0===e);return t.push(e),this},reduce:function(){return this},fullReduce:function(){return this.normalize()},normalize:function(){var e,t,s=0,i=this.placeVal,n=this.ipv,a=this.limbs,r=a.length,o=this.radixMask;for(e=0;e<r||0!==s&&-1!==s;e++)s=(a[e]||0)+s,t=a[e]=s&o,s=(s-t)*n;return-1===s&&(a[e-1]-=i),this.trim(),this},cnormalize:function(){var e,t,s=0,i=this.ipv,n=this.limbs,a=n.length,r=this.radixMask;for(e=0;e<a-1;e++)s=n[e]+s,t=n[e]=s&r,s=(s-t)*i;return n[e]+=s,this},toBits:function(e){this.fullReduce(),e=e||this.exponent||this.bitLength();var t=Math.floor((e-1)/24),s=n.bitArray,i=[s.partial((e+7&-8)%this.radix||this.radix,this.getLimb(t))];for(t--;0<=t;t--)i=s.concat(i,[s.partial(Math.min(this.radix,e),this.getLimb(t))]),e-=this.radix;return i},bitLength:function(){this.fullReduce();for(var e=this.radix*(this.limbs.length-1),t=this.limbs[this.limbs.length-1];t;t>>>=1)e++;return e+7&-8}},n.bn.fromBits=function(e){var t=new this,s=[],i=n.bitArray,a=this.prototype,r=Math.min(this.bitLength||4294967296,i.bitLength(e)),o=r%a.radix||a.radix;for(s[0]=i.extract(e,0,o);o<r;o+=a.radix)s.unshift(i.extract(e,o,a.radix));return t.limbs=s,t},n.bn.prototype.ipv=1/(n.bn.prototype.placeVal=Math.pow(2,n.bn.prototype.radix)),n.bn.prototype.radixMask=(1<<n.bn.prototype.radix)-1,n.bn.pseudoMersennePrime=function(e,t){function s(e){this.initWith(e)}var i,a,r=s.prototype=new n.bn;for(i=r.modOffset=Math.ceil(a=e/r.radix),r.exponent=e,r.offset=[],r.factor=[],r.minOffset=i,r.fullMask=0,r.fullOffset=[],r.fullFactor=[],r.modulus=s.modulus=new n.bn(Math.pow(2,e)),r.fullMask=0|-Math.pow(2,e%r.radix),i=0;i<t.length;i++)r.offset[i]=Math.floor(t[i][0]/r.radix-a),r.fullOffset[i]=Math.ceil(t[i][0]/r.radix-a),r.factor[i]=t[i][1]*Math.pow(.5,e-t[i][0]+r.offset[i]*r.radix),r.fullFactor[i]=t[i][1]*Math.pow(.5,e-t[i][0]+r.fullOffset[i]*r.radix),r.modulus.addM(new n.bn(Math.pow(2,t[i][0])*t[i][1])),r.minOffset=Math.min(r.minOffset,-r.offset[i]);return r.o=s,r.modulus.cnormalize(),r.reduce=function(){var e,t,s,i,n=this.modOffset,a=this.limbs,r=this.offset,o=this.offset.length,c=this.factor;for(e=this.minOffset;a.length>n;){for(s=a.pop(),i=a.length,t=0;t<o;t++)a[i+r[t]]-=c[t]*s;e--,e||(a.push(0),this.cnormalize(),e=this.minOffset)}return this.cnormalize(),this},r.sa=-1===r.fullMask?r.reduce:function(){var e,t,s=this.limbs,i=s.length-1;if(this.reduce(),i===this.modOffset-1){for(t=s[i]&this.fullMask,s[i]-=t,e=0;e<this.fullOffset.length;e++)s[i+this.fullOffset[e]]-=this.fullFactor[e]*t;this.normalize()}},r.fullReduce=function(){var e,t;for(this.sa(),this.addM(this.modulus),this.addM(this.modulus),this.normalize(),this.sa(),t=this.limbs.length;t<this.modOffset;t++)this.limbs[t]=0;for(e=this.greaterEquals(this.modulus),t=0;t<this.limbs.length;t++)this.limbs[t]-=this.modulus.limbs[t]*e;return this.cnormalize(),this},r.inverse=function(){return this.power(this.modulus.sub(2))},s.fromBits=n.bn.fromBits,s};var _=n.bn.pseudoMersennePrime;n.bn.prime={p127:_(127,[[0,-1]]),p25519:_(255,[[0,-19]]),p192k:_(192,[[32,-1],[12,-1],[8,-1],[7,-1],[6,-1],[3,-1],[0,-1]]),p224k:_(224,[[32,-1],[12,-1],[11,-1],[9,-1],[7,-1],[4,-1],[1,-1],[0,-1]]),p256k:_(256,[[32,-1],[9,-1],[8,-1],[7,-1],[6,-1],[4,-1],[0,-1]]),p192:_(192,[[0,-1],[64,-1]]),p224:_(224,[[0,1],[96,-1]]),p256:_(256,[[0,-1],[96,1],[192,1],[224,-1]]),p384:_(384,[[0,-1],[32,1],[96,-1],[128,-1]]),p521:_(521,[[0,-1]])},n.bn.random=function(e,t){"object"!==Object(i["a"])(e)&&(e=new n.bn(e));for(var s,a,r=e.limbs.length,o=e.limbs[r-1]+1,c=new n.bn;;){do{s=n.random.randomWords(r,t),0>s[r-1]&&(s[r-1]+=4294967296)}while(Math.floor(s[r-1]/o)===Math.floor(4294967296/o));for(s[r-1]%=o,a=0;a<r-1;a++)s[a]&=e.radixMask;if(c.limbs=s,!c.greaterEquals(e))return c}},n.ecc={},n.ecc.point=function(e,t,s){void 0===t?this.isIdentity=!0:(t instanceof n.bn&&(t=new e.field(t)),s instanceof n.bn&&(s=new e.field(s)),this.x=t,this.y=s,this.isIdentity=!1),this.curve=e},n.ecc.point.prototype={toJac:function(){return new n.ecc.pointJac(this.curve,this.x,this.y,new this.curve.field(1))},mult:function(e){return this.toJac().mult(e,this).toAffine()},mult2:function(e,t,s){return this.toJac().mult2(e,this,t,s).toAffine()},multiples:function(){var e,t,s;if(void 0===this.pa)for(s=this.toJac().doubl(),e=this.pa=[new n.ecc.point(this.curve),this,s.toAffine()],t=3;16>t;t++)s=s.add(this),e.push(s.toAffine());return this.pa},negate:function(){var e=new this.curve.field(0).sub(this.y).normalize().reduce();return new n.ecc.point(this.curve,this.x,e)},isValid:function(){return this.y.square().equals(this.curve.b.add(this.x.mul(this.curve.a.add(this.x.square()))))},toBits:function(){return n.bitArray.concat(this.x.toBits(),this.y.toBits())}},n.ecc.pointJac=function(e,t,s,i){void 0===t?this.isIdentity=!0:(this.x=t,this.y=s,this.z=i,this.isIdentity=!1),this.curve=e},n.ecc.pointJac.prototype={add:function(e){var t,s,i,a;if(this.curve!==e.curve)throw new n.exception.invalid("sjcl['ecc']['add'](): Points must be on the same curve to add them!");return this.isIdentity?e.toJac():e.isIdentity?this:(t=this.z.square(),s=e.x.mul(t).subM(this.x),s.equals(0)?this.y.equals(e.y.mul(t.mul(this.z)))?this.doubl():new n.ecc.pointJac(this.curve):(t=e.y.mul(t.mul(this.z)).subM(this.y),i=s.square(),e=t.square(),a=s.square().mul(s).addM(this.x.add(this.x).mul(i)),e=e.subM(a),t=this.x.mul(i).subM(e).mul(t),i=this.y.mul(s.square().mul(s)),t=t.subM(i),s=this.z.mul(s),new n.ecc.pointJac(this.curve,e,t,s)))},doubl:function(){if(this.isIdentity)return this;var e=this.y.square(),t=e.mul(this.x.mul(4)),s=e.square().mul(8),i=(e=this.z.square(),this.curve.a.toString()==new n.bn(-3).toString()?this.x.sub(e).mul(3).mul(this.x.add(e)):this.x.square().mul(3).add(e.square().mul(this.curve.a)));e=i.square().subM(t).subM(t),t=t.sub(e).mul(i).subM(s),s=this.y.add(this.y).mul(this.z);return new n.ecc.pointJac(this.curve,e,t,s)},toAffine:function(){if(this.isIdentity||this.z.equals(0))return new n.ecc.point(this.curve);var e=this.z.inverse(),t=e.square();return new n.ecc.point(this.curve,this.x.mul(t).fullReduce(),this.y.mul(t.mul(e)).fullReduce())},mult:function(e,t){"number"===typeof e?e=[e]:void 0!==e.limbs&&(e=e.normalize().limbs);var s,i,a=new n.ecc.point(this.curve).toJac(),r=t.multiples();for(s=e.length-1;0<=s;s--)for(i=n.bn.prototype.radix-4;0<=i;i-=4)a=a.doubl().doubl().doubl().doubl().add(r[e[s]>>i&15]);return a},mult2:function(e,t,s,i){"number"===typeof e?e=[e]:void 0!==e.limbs&&(e=e.normalize().limbs),"number"===typeof s?s=[s]:void 0!==s.limbs&&(s=s.normalize().limbs);var a,r=new n.ecc.point(this.curve).toJac();t=t.multiples();var o,c,l=i.multiples();for(i=Math.max(e.length,s.length)-1;0<=i;i--)for(o=0|e[i],c=0|s[i],a=n.bn.prototype.radix-4;0<=a;a-=4)r=r.doubl().doubl().doubl().doubl().add(t[o>>a&15]).add(l[c>>a&15]);return r},negate:function(){return this.toAffine().negate().toJac()},isValid:function(){var e=this.z.square(),t=e.square();e=t.mul(e);return this.y.square().equals(this.curve.b.mul(e).add(this.x.mul(this.curve.a.mul(t).add(this.x.square()))))}},n.ecc.curve=function(e,t,s,i,a,r){this.field=e,this.r=new n.bn(t),this.a=new e(s),this.b=new e(i),this.G=new n.ecc.point(this,new e(a),new e(r))},n.ecc.curve.prototype.fromBits=function(e){var t=n.bitArray,s=this.field.prototype.exponent+7&-8;if(e=new n.ecc.point(this,this.field.fromBits(t.bitSlice(e,0,s)),this.field.fromBits(t.bitSlice(e,s,2*s))),!e.isValid())throw new n.exception.corrupt("not on the curve!");return e},n.ecc.curves={c192:new n.ecc.curve(n.bn.prime.p192,"0xffffffffffffffffffffffff99def836146bc9b1b4d22831",-3,"0x64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1","0x188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012","0x07192b95ffc8da78631011ed6b24cdd573f977a11e794811"),c224:new n.ecc.curve(n.bn.prime.p224,"0xffffffffffffffffffffffffffff16a2e0b8f03e13dd29455c5c2a3d",-3,"0xb4050a850c04b3abf54132565044b0b7d7bfd8ba270b39432355ffb4","0xb70e0cbd6bb4bf7f321390b94a03c1d356c21122343280d6115c1d21","0xbd376388b5f723fb4c22dfe6cd4375a05a07476444d5819985007e34"),c256:new n.ecc.curve(n.bn.prime.p256,"0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551",-3,"0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b","0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296","0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),c384:new n.ecc.curve(n.bn.prime.p384,"0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973",-3,"0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef","0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7","0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),c521:new n.ecc.curve(n.bn.prime.p521,"0x1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409",-3,"0x051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","0xC6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","0x11839296A789A3BC0045C8A5FB42C7D1BD998F54449579B446817AFBD17273E662C97EE72995EF42640C550B9013FAD0761353C7086A272C24088BE94769FD16650"),k192:new n.ecc.curve(n.bn.prime.p192k,"0xfffffffffffffffffffffffe26f2fc170f69466a74defd8d",0,3,"0xdb4ff10ec057e9ae26b07d0280b7f4341da5d1b1eae06c7d","0x9b2f2f6d9c5628a7844163d015be86344082aa88d95e2f9d"),k224:new n.ecc.curve(n.bn.prime.p224k,"0x010000000000000000000000000001dce8d2ec6184caf0a971769fb1f7",0,5,"0xa1455b334df099df30fc28a169a467e9e47075a90f7e650eb6b7a45c","0x7e089fed7fba344282cafbd6f7e319f7c0b0bd59e2ca4bdb556d61a5"),k256:new n.ecc.curve(n.bn.prime.p256k,"0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",0,7,"0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},n.ecc.curveName=function(e){for(var t in n.ecc.curves)if(n.ecc.curves.hasOwnProperty(t)&&n.ecc.curves[t]===e)return t;throw new n.exception.invalid("no such curve")},n.ecc.deserialize=function(e){if(!e||!e.curve||!n.ecc.curves[e.curve])throw new n.exception.invalid("invalid serialization");if(-1===["elGamal","ecdsa"].indexOf(e.type))throw new n.exception.invalid("invalid type");var t=n.ecc.curves[e.curve];if(e.secretKey){if(!e.exponent)throw new n.exception.invalid("invalid exponent");var s=new n.bn(e.exponent);return new n.ecc[e.type].secretKey(t,s)}if(!e.point)throw new n.exception.invalid("invalid point");return s=t.fromBits(n.codec.hex.toBits(e.point)),new n.ecc[e.type].publicKey(t,s)},n.ecc.basicKey={publicKey:function(e,t){this.w=e,this.I=e.r.bitLength(),this.H=t instanceof Array?e.fromBits(t):t,this.serialize=function(){var t=n.ecc.curveName(e);return{type:this.getType(),secretKey:!1,point:n.codec.hex.fromBits(this.H.toBits()),curve:t}},this.get=function(){var e=this.H.toBits(),t=n.bitArray.bitLength(e),s=n.bitArray.bitSlice(e,0,t/2);e=n.bitArray.bitSlice(e,t/2);return{x:s,y:e}}},secretKey:function(e,t){this.w=e,this.I=e.r.bitLength(),this.S=t,this.serialize=function(){var t=this.get(),s=n.ecc.curveName(e);return{type:this.getType(),secretKey:!0,exponent:n.codec.hex.fromBits(t),curve:s}},this.get=function(){return this.S.toBits()}}},n.ecc.basicKey.generateKeys=function(e){return function(t,s,i){if(t=t||256,"number"===typeof t&&(t=n.ecc.curves["c"+t],void 0===t))throw new n.exception.invalid("no such curve");return i=i||n.bn.random(t.r,s),s=t.G.mult(i),{pub:new n.ecc[e].publicKey(t,s),sec:new n.ecc[e].secretKey(t,i)}}},n.ecc.elGamal={generateKeys:n.ecc.basicKey.generateKeys("elGamal"),publicKey:function(e,t){n.ecc.basicKey.publicKey.apply(this,arguments)},secretKey:function(e,t){n.ecc.basicKey.secretKey.apply(this,arguments)}},n.ecc.elGamal.publicKey.prototype={kem:function(e){e=n.bn.random(this.w.r,e);var t=this.w.G.mult(e).toBits();return{key:n.hash.sha256.hash(this.H.mult(e).toBits()),tag:t}},getType:function(){return"elGamal"}},n.ecc.elGamal.secretKey.prototype={unkem:function(e){return n.hash.sha256.hash(this.w.fromBits(e).mult(this.S).toBits())},dh:function(e){return n.hash.sha256.hash(e.H.mult(this.S).toBits())},dhJavaEc:function(e){return e.H.mult(this.S).x.toBits()},getType:function(){return"elGamal"}},n.ecc.ecdsa={generateKeys:n.ecc.basicKey.generateKeys("ecdsa")},n.ecc.ecdsa.publicKey=function(e,t){n.ecc.basicKey.publicKey.apply(this,arguments)},n.ecc.ecdsa.publicKey.prototype={verify:function(e,t,s){n.bitArray.bitLength(e)>this.I&&(e=n.bitArray.clamp(e,this.I));var i=n.bitArray,a=this.w.r,r=this.I,o=n.bn.fromBits(i.bitSlice(t,0,r)),c=(i=n.bn.fromBits(i.bitSlice(t,r,2*r)),s?i:i.inverseMod(a));r=n.bn.fromBits(e).mul(c).mod(a),c=o.mul(c).mod(a),r=this.w.G.mult2(r,c,this.H).x;if(o.equals(0)||i.equals(0)||o.greaterEquals(a)||i.greaterEquals(a)||!r.equals(o)){if(void 0===s)return this.verify(e,t,!0);throw new n.exception.corrupt("signature didn't check out")}return!0},getType:function(){return"ecdsa"}},n.ecc.ecdsa.secretKey=function(e,t){n.ecc.basicKey.secretKey.apply(this,arguments)},n.ecc.ecdsa.secretKey.prototype={sign:function(e,t,s,i){n.bitArray.bitLength(e)>this.I&&(e=n.bitArray.clamp(e,this.I));var a=this.w.r,r=a.bitLength();return i=i||n.bn.random(a.sub(1),t).add(1),t=this.w.G.mult(i).x.mod(a),e=n.bn.fromBits(e).add(t.mul(this.S)),s=s?e.inverseMod(a).mul(i).mod(a):e.mul(i.inverseMod(a)).mod(a),n.bitArray.concat(t.toBits(r),s.toBits(r))},getType:function(){return"ecdsa"}},n.keyexchange.srp={makeVerifier:function(e,t,s,i){return e=n.keyexchange.srp.makeX(e,t,s),e=n.bn.fromBits(e),i.g.powermod(e,i.N)},makeX:function(e,t,s){return e=n.hash.sha1.hash(e+":"+t),n.hash.sha1.hash(n.bitArray.concat(s,e))},knownGroup:function(e){return"string"!==typeof e&&(e=e.toString()),n.keyexchange.srp.ja||n.keyexchange.srp.Ea(),n.keyexchange.srp.na[e]},ja:!1,Ea:function(){var e,t;for(e=0;e<n.keyexchange.srp.ma.length;e++)t=n.keyexchange.srp.ma[e].toString(),t=n.keyexchange.srp.na[t],t.N=new n.bn(t.N),t.g=new n.bn(t.g);n.keyexchange.srp.ja=!0},ma:[1024,1536,2048,3072,4096,6144,8192],na:{1024:{N:"EEAF0AB9ADB38DD69C33F80AFA8FC5E86072618775FF3C0B9EA2314C9C256576D674DF7496EA81D3383B4813D692C6E0E0D5D8E250B98BE48E495C1D6089DAD15DC7D7B46154D6B6CE8EF4AD69B15D4982559B297BCF1885C529F566660E57EC68EDBC3C05726CC02FD4CBF4976EAA9AFD5138FE8376435B9FC61D2FC0EB06E3",g:2},1536:{N:"9DEF3CAFB939277AB1F12A8617A47BBBDBA51DF499AC4C80BEEEA9614B19CC4D5F4F5F556E27CBDE51C6A94BE4607A291558903BA0D0F84380B655BB9A22E8DCDF028A7CEC67F0D08134B1C8B97989149B609E0BE3BAB63D47548381DBC5B1FC764E3F4B53DD9DA1158BFD3E2B9C8CF56EDF019539349627DB2FD53D24B7C48665772E437D6C7F8CE442734AF7CCB7AE837C264AE3A9BEB87F8A2FE9B8B5292E5A021FFF5E91479E8CE7A28C2442C6F315180F93499A234DCF76E3FED135F9BB",g:2},2048:{N:"AC6BDB41324A9A9BF166DE5E1389582FAF72B6651987EE07FC3192943DB56050A37329CBB4A099ED8193E0757767A13DD52312AB4B03310DCD7F48A9DA04FD50E8083969EDB767B0CF6095179A163AB3661A05FBD5FAAAE82918A9962F0B93B855F97993EC975EEAA80D740ADBF4FF747359D041D5C33EA71D281E446B14773BCA97B43A23FB801676BD207A436C6481F1D2B9078717461A5B9D32E688F87748544523B524B0D57D5EA77A2775D2ECFA032CFBDBF52FB3786160279004E57AE6AF874E7303CE53299CCC041C7BC308D82A5698F3A8D0C38271AE35F8E9DBFBB694B5C803D89F7AE435DE236D525F54759B65E372FCD68EF20FA7111F9E4AFF73",g:2},3072:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",g:5},4096:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C934063199FFFFFFFFFFFFFFFF",g:5},6144:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C93402849236C3FAB4D27C7026C1D4DCB2602646DEC9751E763DBA37BDF8FF9406AD9E530EE5DB382F413001AEB06A53ED9027D831179727B0865A8918DA3EDBEBCF9B14ED44CE6CBACED4BB1BDB7F1447E6CC254B332051512BD7AF426FB8F401378CD2BF5983CA01C64B92ECF032EA15D1721D03F482D7CE6E74FEF6D55E702F46980C82B5A84031900B1C9E59E7C97FBEC7E8F323A97A7E36CC88BE0F1D45B7FF585AC54BD407B22B4154AACC8F6D7EBF48E1D814CC5ED20F8037E0A79715EEF29BE32806A1D58BB7C5DA76F550AA3D8A1FBFF0EB19CCB1A313D55CDA56C9EC2EF29632387FE8D76E3C0468043E8F663F4860EE12BF2D5B0B7474D6E694F91E6DCC4024FFFFFFFFFFFFFFFF",g:5},8192:{N:"FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C93402849236C3FAB4D27C7026C1D4DCB2602646DEC9751E763DBA37BDF8FF9406AD9E530EE5DB382F413001AEB06A53ED9027D831179727B0865A8918DA3EDBEBCF9B14ED44CE6CBACED4BB1BDB7F1447E6CC254B332051512BD7AF426FB8F401378CD2BF5983CA01C64B92ECF032EA15D1721D03F482D7CE6E74FEF6D55E702F46980C82B5A84031900B1C9E59E7C97FBEC7E8F323A97A7E36CC88BE0F1D45B7FF585AC54BD407B22B4154AACC8F6D7EBF48E1D814CC5ED20F8037E0A79715EEF29BE32806A1D58BB7C5DA76F550AA3D8A1FBFF0EB19CCB1A313D55CDA56C9EC2EF29632387FE8D76E3C0468043E8F663F4860EE12BF2D5B0B7474D6E694F91E6DBE115974A3926F12FEE5E438777CB6A932DF8CD8BEC4D073B931BA3BC832B68D9DD300741FA7BF8AFC47ED2576F6936BA424663AAB639C5AE4F5683423B4742BF1C978238F16CBE39D652DE3FDB8BEFC848AD922222E04A4037C0713EB57A81A23F0C73473FC646CEA306B4BCBC8862F8385DDFA9D4B7FA2C087E879683303ED5BDD3A062B3CF5B3A278A66D2A13F83F44F82DDF310EE074AB6A364597E899A0255DC164F31CC50846851DF9AB48195DED7EA1B1D510BD7EE74D73FAF36BC31ECFA268359046F4EB879F924009438B481C6CD7889A002ED5EE382BC9190DA6FC026E479558E4475677E9AA9E3050E2765694DFC81F56E880B96E7160C980DD98EDD3DFFFFFFFFFFFFFFFFF",g:19}}},n.arrayBuffer=n.arrayBuffer||{},"undefined"===typeof ArrayBuffer&&function(e){e.ArrayBuffer=function(){},e.DataView=function(){}}(void 0),n.arrayBuffer.ccm={mode:"ccm",defaults:{tlen:128},compat_encrypt:function(e,t,s,i,a){var r=n.codec.arrayBuffer.fromBits(t,!0,16);return t=n.bitArray.bitLength(t)/8,i=i||[],e=n.arrayBuffer.ccm.encrypt(e,r,s,i,a||64,t),s=n.codec.arrayBuffer.toBits(e.ciphertext_buffer),s=n.bitArray.clamp(s,8*t),n.bitArray.concat(s,e.tag)},compat_decrypt:function(e,t,s,i,a){a=a||64,i=i||[];var r=n.bitArray,o=r.bitLength(t),c=r.clamp(t,o-a);return t=r.bitSlice(t,o-a),c=n.codec.arrayBuffer.fromBits(c,!0,16),e=n.arrayBuffer.ccm.decrypt(e,c,s,t,i,a,(o-a)/8),n.bitArray.clamp(n.codec.arrayBuffer.toBits(e),o-a)},encrypt:function(e,t,s,i,a,r){var o,c=n.bitArray,l=c.bitLength(s)/8;for(i=i||[],a=a||n.arrayBuffer.ccm.defaults.tlen,r=r||t.byteLength,a=Math.ceil(a/8),o=2;4>o&&r>>>8*o;o++);return o<15-l&&(o=15-l),s=c.clamp(s,8*(15-o)),i=n.arrayBuffer.ccm.R(e,t,s,i,a,r,o),i=n.arrayBuffer.ccm.u(e,t,s,i,a,o),{ciphertext_buffer:t,tag:i}},decrypt:function(e,t,s,i,a,r,o){var c,l=n.bitArray,d=l.bitLength(s)/8;for(a=a||[],r=r||n.arrayBuffer.ccm.defaults.tlen,o=o||t.byteLength,r=Math.ceil(r/8),c=2;4>c&&o>>>8*c;c++);if(c<15-d&&(c=15-d),s=l.clamp(s,8*(15-c)),i=n.arrayBuffer.ccm.u(e,t,s,i,r,c),e=n.arrayBuffer.ccm.R(e,t,s,a,r,o,c),!n.bitArray.equal(i,e))throw new n.exception.corrupt("ccm: tag doesn't match");return t},R:function(e,t,s,i,a,r,o){if(s=n.mode.ccm.oa(e,i,s,a,r,o),0!==t.byteLength){for(i=new DataView(t);r<t.byteLength;r++)i.setUint8(r,0);for(r=0;r<i.byteLength;r+=16)s[0]^=i.getUint32(r),s[1]^=i.getUint32(r+4),s[2]^=i.getUint32(r+8),s[3]^=i.getUint32(r+12),s=e.encrypt(s)}return n.bitArray.clamp(s,8*a)},u:function(e,t,s,i,a,r){var o,c,l,d,h;o=n.bitArray,c=o.l;var u=t.byteLength/50,m=u;if(new DataView(new ArrayBuffer(16)),s=o.concat([o.partial(8,r-1)],s).concat([0,0,0]).slice(0,4),i=o.bitSlice(c(i,e.encrypt(s)),0,8*a),s[3]++,0===s[3]&&s[2]++,0!==t.byteLength)for(a=new DataView(t),h=0;h<a.byteLength;h+=16)h>u&&(n.mode.ccm.ha(h/t.byteLength),u+=m),d=e.encrypt(s),o=a.getUint32(h),c=a.getUint32(h+4),r=a.getUint32(h+8),l=a.getUint32(h+12),a.setUint32(h,o^d[0]),a.setUint32(h+4,c^d[1]),a.setUint32(h+8,r^d[2]),a.setUint32(h+12,l^d[3]),s[3]++,0===s[3]&&s[2]++;return i}},"undefined"===typeof ArrayBuffer&&function(e){e.ArrayBuffer=function(){},e.DataView=function(){}}(void 0),n.codec.arrayBuffer={fromBits:function(e,t,s){var i;if(t=void 0==t||t,s=s||8,0===e.length)return new ArrayBuffer(0);if(i=n.bitArray.bitLength(e)/8,0!==n.bitArray.bitLength(e)%8)throw new n.exception.invalid("Invalid bit size, must be divisble by 8 to fit in an arraybuffer correctly");for(t&&0!==i%s&&(i+=s-i%s),s=new DataView(new ArrayBuffer(4*e.length)),t=0;t<e.length;t++)s.setUint32(4*t,e[t]<<32);if(e=new DataView(new ArrayBuffer(i)),e.byteLength===s.byteLength)return s.buffer;for(i=s.byteLength<e.byteLength?s.byteLength:e.byteLength,t=0;t<i;t++)e.setUint8(t,s.getUint8(t));return e.buffer},toBits:function(e){var t,s,i,a=[];if(0===e.byteLength)return[];for(s=new DataView(e),t=s.byteLength-s.byteLength%4,e=0;e<t;e+=4)a.push(s.getUint32(e));if(0!=s.byteLength%4){i=new DataView(new ArrayBuffer(4)),e=0;for(var r=s.byteLength%4;e<r;e++)i.setUint8(e+4-r,s.getUint8(t+e));a.push(n.bitArray.partial(s.byteLength%4*8,i.getUint32(0)))}return a},Oa:function(e){function t(e){return e+="",4<=e.length?e:Array(4-e.length+1).join("0")+e}e=new DataView(e);for(var s="",n=0;n<e.byteLength;n+=2)0==n%16&&(s+="\n"+n.toString(16)+"\t"),s+=t(e.getUint16(n).toString(16))+" ";void 0===("undefined"===typeof console?"undefined":Object(i["a"])(console))&&(console=console||{log:function(){}}),console.log(s.toUpperCase())}},function(){function e(e,t){return e<<t|e>>>32-t}function t(e){return(255&e)<<24|(65280&e)<<8|(16711680&e)>>>8|(-16777216&e)>>>24}function s(t){for(var s,i=this.c[0],n=this.c[1],o=this.c[2],c=this.c[3],m=this.c[4],p=this.c[0],f=this.c[1],_=this.c[2],v=this.c[3],g=this.c[4],b=0;16>b;++b)s=e(i+(n^o^c)+t[l[b]]+a[b],h[b])+m,i=m,m=c,c=e(o,10),o=n,n=s,s=e(p+(f^(_|~v))+t[d[b]]+r[b],u[b])+g,p=g,g=v,v=e(_,10),_=f,f=s;for(;32>b;++b)s=e(i+(n&o|~n&c)+t[l[b]]+a[b],h[b])+m,i=m,m=c,c=e(o,10),o=n,n=s,s=e(p+(f&v|_&~v)+t[d[b]]+r[b],u[b])+g,p=g,g=v,v=e(_,10),_=f,f=s;for(;48>b;++b)s=e(i+((n|~o)^c)+t[l[b]]+a[b],h[b])+m,i=m,m=c,c=e(o,10),o=n,n=s,s=e(p+((f|~_)^v)+t[d[b]]+r[b],u[b])+g,p=g,g=v,v=e(_,10),_=f,f=s;for(;64>b;++b)s=e(i+(n&c|o&~c)+t[l[b]]+a[b],h[b])+m,i=m,m=c,c=e(o,10),o=n,n=s,s=e(p+(f&_|~f&v)+t[d[b]]+r[b],u[b])+g,p=g,g=v,v=e(_,10),_=f,f=s;for(;80>b;++b)s=e(i+(n^(o|~c))+t[l[b]]+a[b],h[b])+m,i=m,m=c,c=e(o,10),o=n,n=s,s=e(p+(f^_^v)+t[d[b]]+r[b],u[b])+g,p=g,g=v,v=e(_,10),_=f,f=s;s=this.c[1]+o+v,this.c[1]=this.c[2]+c+g,this.c[2]=this.c[3]+m+p,this.c[3]=this.c[4]+i+f,this.c[4]=this.c[0]+n+_,this.c[0]=s}n.hash.ripemd160=function(e){e?(this.c=e.c.slice(0),this.h=e.h.slice(0),this.f=e.f):this.reset()},n.hash.ripemd160.hash=function(e){return(new n.hash.ripemd160).update(e).finalize()},n.hash.ripemd160.prototype={reset:function(){return this.c=i.slice(0),this.h=[],this.f=0,this},update:function(e){"string"===typeof e&&(e=n.codec.utf8String.toBits(e));var i,a=this.h=n.bitArray.concat(this.h,e);if(i=this.f,e=this.f=i+n.bitArray.bitLength(e),9007199254740991<e)throw new n.exception.invalid("Cannot hash more than 2^53 - 1 bits");for(i=512+i-(512+i&511);i<=e;i+=512){for(var r=a.splice(0,16),o=0;16>o;++o)r[o]=t(r[o]);s.call(this,r)}return this},finalize:function(){var e=n.bitArray.concat(this.h,[n.bitArray.partial(1,1)]),i=(this.f+1)%512,a=(i=(448<i?512:448)-i%448,i%32);for(0<a&&(e=n.bitArray.concat(e,[n.bitArray.partial(a,0)]));32<=i;i-=32)e.push(0);for(e.push(t(0|this.f)),e.push(t(Math.floor(this.f/4294967296)));e.length;){for(a=e.splice(0,16),i=0;16>i;++i)a[i]=t(a[i]);s.call(this,a)}for(e=this.c,this.reset(),i=0;5>i;++i)e[i]=t(e[i]);return e}};for(var i=[1732584193,4023233417,2562383102,271733878,3285377520],a=[0,1518500249,1859775393,2400959708,2840853838],r=[1352829926,1548603684,1836072691,2053994217,0],o=4;0<=o;--o)for(var c=1;16>c;++c)a.splice(o,0,a[o]),r.splice(o,0,r[o]);var l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],u=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]}(),e.exports&&(e.exports=n),"function"===typeof define&&define([],(function(){return n})),window["sjcl"]=n}).call(this,s("dd40")(e))},d314:function(e,t,s){},d7b9:function(e,t,s){"use strict";var i=s("4ab4"),n=s.n(i);n.a},dbd8:function(e,t,s){"use strict";var i=s("bb86"),n=s.n(i);n.a},e0f7:function(e,t,s){},e20c:function(e,t,s){"use strict";var i=s("ad31"),n=s.n(i);n.a},e579:function(e,t,s){},e7ad:function(e,t,s){},eb91:function(e,t,s){},ec05:function(e,t,s){},ee8f:function(e,t,s){"use strict";var i=s("b2e1"),n=s.n(i);n.a},f4dc:function(e,t,s){"use strict";var i=s("7ae8"),n=s.n(i);n.a},f677:function(e,t,s){"use strict";var i=s("a146"),n=s.n(i);n.a},f6b0:function(e,t,s){},f7d4:function(e,t,s){"use strict";var i=s("787d"),n=s.n(i);n.a},f890:function(e,t,s){"use strict";var i=s("4d04"),n=s.n(i);n.a}});
//# sourceMappingURL=app.dacd0c7c.js.map